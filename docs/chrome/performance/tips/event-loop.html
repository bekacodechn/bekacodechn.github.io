<!DOCTYPE html>
  <html>
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <link rel="icon" href="" type="image/svg+xml"></link>
      <script  id="check-dark-light">
        ;(() => {
          const saved = localStorage.getItem('island-theme-appearance')
          const prefereDark = window.matchMedia('(prefers-color-scheme: dark)').matches
          if (!saved || saved === 'auto' ? prefereDark : saved === 'dark') {
            document.documentElement.classList.add('dark')
          }
        })()
      </script>
      <title data-rh="true">äº‹ä»¶å¾ªç¯åŸºç¡€çŸ¥è¯†</title>
      <meta data-rh="true" name="description" content="Island"/>
      
      
      <script defer src='https://ga.jspm.io/npm:es-module-shims@1.6.0/dist/es-module-shims.js'></script>
      <script type="importmap">
        {
          "imports": {
            "react": "/react.js","react-dom": "/react-dom.js","react-dom/client": "/react-dom_client.js","react/jsx-runtime": "/react_jsx-runtime.js"
          }
        }
      </script>

      <link rel="stylesheet" href="/assets/style.71d86141.css">

    </head>
    <body>
      <div id="root"><div style="height:100%"><header relative="" z="4" fixed="md:~" class="top-0 left-0" w="100%"><div relative="" p="l-8 sm:x-8" transition="background-color duration-500" class="divider-bottom md:border-b-transparent lg:border-b-transparent" nav-h="mobile lg:desktop"><div flex="" justify="between" m="0 auto" nav-h="mobile lg:desktop" class="_container_1ic07_52  _has-sidebar_1ic07_16"><div border="border t-0 b-1 border-solid transparent" class="_nav-bar-title_1ic07_16"><a href="/" w="100%" h="100%" text="1rem" font="semibold" transition="opacity duration-300" hover="opacity-60" class="flex items-center"><span>bekaçš„åšå®¢</span></a></div><div class="_content_1ic07_24" flex="~ 1" justify="end" items-center=""><div class="search" flex="sm:1" pl="sm:8"><div flex="" items-center="~" relative="" mr="2" font="semibold"><svg width="32" height="32" viewBox="0 0 32 32" w="5" h="5" fill="currentColor"><path fill="#888888" d="m29 27.586l-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9a9.01 9.01 0 0 1-9-9Z"></path></svg><input disabled="" cursor="text focus:auto" placeholder="Search" height="8" border="none" type="text" text="sm" p="t-0 r-2 b-0 l-2" transition="all duration-200 ease" class="rounded-sm _searchInput_y03a3_1 " aria-label="Search" autoComplete="off"/><div m="r-3" w="10" h="6" p="x-1.5" rounded="md" border="1px solid gray-light-3" text="xs gray-light-3" flex="~" items-center="~" justify="around" class="_searchCommand_y03a3_7"><span>âŒ˜</span><span>K</span></div></div></div><div class="_rightNav_1ic07_42"><div class="menu"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Article</a></div><div text="sm" font="medium" m="x-3" class="text-brand"><a class="_link_r3fql_1 " target="" cursor="pointer">Chrome</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Design-pattern</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Open-source</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Promise</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Webpack</a></div></div><div class="appearance" before="menu-item-before" display="none sm:flex" items-center="center"><button class="_switch_1tqe3_1 undefined" id="" type="button" role="switch"><span class="_check_1tqe3_17"><span class="_icon_1tqe3_34"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="_sun_8e60k_1"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="_moon_8e60k_5"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div></div><button class=" _navHamburger_14nz8_1"><span class="_container_14nz8_14"><span class="_top_14nz8_21"></span><span class="_middle_14nz8_27"></span><span class="_bottom_14nz8_33"></span></span></button><div class="_navScreen_1mkpq_1 " id="navScreen"><div class="_container_1mkpq_21"><div class="_navMenu_1mkpq_27"><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Article</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class="text-brand"><a class="_link_r3fql_1 " target="" cursor="pointer">Chrome</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Design-pattern</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Open-source</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Promise</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Webpack</a></div></div></div><div class="_socialAndAppearance_1mkpq_50" flex="~" justify="center" items-center="center"><div class="items-center appearance pa-2 _navAppearance_1mkpq_46" flex="~" justify="center"><button class="_switch_1tqe3_1 undefined" id="" type="button" role="switch"><span class="_check_1tqe3_17"><span class="_icon_1tqe3_34"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="_sun_8e60k_1"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="_moon_8e60k_5"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div></div></div></div></div></div></div></header><section style="padding-top:var(--island-nav-height)"><div p="t-0 x-6 b-24 sm:6" class="_docLayout_5cssi_8"><div class="_localNav_ncerp_1"><button flex="center" class="_menu_ncerp_16"><div text="md" mr="2" class="i-carbon:menu"></div><span text="md ">Menu</span></button></div><aside class="_sidebar_iav29_1 "><nav><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">Chorme lala</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:28px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ•ˆæœæŒ‡æ ‡</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">æµè§ˆå™¨å·¥ä½œåŸç†</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:168px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">é«˜çº§ä½“ç³»ç»“æ„ï¼ˆç¬¬ 1 éƒ¨åˆ†ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">å¯¼èˆªé˜¶æ®µï¼ˆç¬¬ 2 éƒ¨åˆ†ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">æ¸²æŸ“é˜¶æ®µï¼ˆç¬¬ 3 éƒ¨åˆ†ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">åŠ è½½é˜¶æ®µçš„ä¼˜åŒ–ï¼ˆç¬¬ 4 éƒ¨åˆ†ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">äº¤äº’é˜¶æ®µçš„ä¼˜åŒ–ï¼ˆç¬¬ 5 éƒ¨åˆ†ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä»€ä¹ˆå¼ºåˆ¶äº†é‡æ’/å›æµ</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">Html</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:84px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Metadata</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">html</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer"># æ–‡æ¡£ç»“æ„</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">å…³é”®æŒ‡æ ‡</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:84px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">First Contentful Paint (FCP)</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Largest Contentful Paint (LCP)</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Time to First Byte (TTFB)</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">æ€§èƒ½</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:140px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä¸€èˆ¬ HTML æ€§èƒ½æ³¨æ„äº‹é¡¹</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">optimize-resource-loading ä¼˜åŒ–èµ„æºè´Ÿè½½</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">asdf</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Welcome to Lean performance</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">é€Ÿåº¦ä¸ºä»€ä¹ˆé‡è¦</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">æ€§èƒ½æŠ€å·§</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:448px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Web ä¸Šçš„å¤šè¿›ç¨‹ï¼šæµè§ˆå™¨è¿›ç¨‹æ¨¡å‹</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Browser Rendering Pipeline</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">é€šè¿‡ç«ç„°å›¾æ‰¾åˆ°æœ‰é—®é¢˜çš„ä»£ç </a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">å¦‚ä½•æ”¶é›† Web æ€§èƒ½è·Ÿè¸ª</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-brand"><a class="_link_r3fql_1 " target="" cursor="pointer">äº‹ä»¶å¾ªç¯åŸºç¡€çŸ¥è¯†</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">æ·±åº¦è®²è§£ç«ç„°å›¾ ğŸ”¥ğŸ”¥</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">é•¿ä»»åŠ¡ï¼šå®ƒä»¬æ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆåº”è¯¥é¿å…å®ƒä»¬</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">performance æŸ¥çœ‹ä¸»çº¿ç¨‹ï¼ˆé¢œè‰²å«ä¹‰ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">æ£€æµ‹æµè§ˆå™¨ä½•æ—¶åœ¨ JavaScript ä¸­ç»˜åˆ¶Frame</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">å¦‚ä½•é˜…è¯» Chromium Profiler</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä½¿ç”¨ Chromium ç½‘ç»œæ ‡ç­¾é¡µè·å–æ€§èƒ½è¯¦æƒ…</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä½¿ç”¨æ€§èƒ½æ—¶åºæ ‡è®°è¿›è¡ŒğŸ“æµ‹é‡</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Chromium F12 æ€§èƒ½åˆ†æå™¨çš„åŸºæœ¬æ¦‚è¿°</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä¼ è¾“å¤§å° vs èµ„æºå¤§å°</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">å¦‚ä½•é˜…è¯»ç«ç„°å›¾ ğŸ”¥</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">è¯†åˆ« Web åº”ç”¨ä¸­çš„æœªå‹ç¼©èµ„æº</a></div></div></div></div></section></nav></aside><div flex="~ 1 shrink-0" m="x-auto" class="_content_5cssi_2"><div m="x-auto" flex="~ col" class="max-w-100%"><div relative="~" m="x-auto" p="l-2" class="w-100% md:max-w-712px lg:min-w-640px "><div class="island-doc "><!--$--><h1 id="äº‹ä»¶å¾ªç¯åŸºç¡€çŸ¥è¯†"><a class="header-anchor" aria-hidden="true" href="#äº‹ä»¶å¾ªç¯åŸºç¡€çŸ¥è¯†">#</a>äº‹ä»¶å¾ªç¯åŸºç¡€çŸ¥è¯†</h1>
<p><code>metadata:</code></p>
<p><strong>åŸæ ‡é¢˜:</strong> Event Loop Fundamentals</p>
<p><strong>é“¾æ¥:</strong> <a href="https://webperf.tips/tip/event-loop/" target="_blank" rel="nofollow">https://webperf.tips/tip/event-loop/</a></p>
<hr/>
<p>æµè§ˆå™¨äº‹ä»¶å¾ªç¯å¯èƒ½æ˜¯éœ€è¦æŒæ¡çš„æœ€é‡è¦çš„å‰ç«¯æ€§èƒ½æ¦‚å¿µã€‚å®ƒçš„è¡Œä¸ºå†³å®šäº† Web åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶çš„è¡Œä¸ºæ–¹å¼ã€‚</p>
<h2 id="the-main-thread"><a class="header-anchor" aria-hidden="true" href="#the-main-thread">#</a>The Main Thread</h2>
<p>åœ¨è®¨è®ºäº‹ä»¶å¾ªç¯ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä»‹ç»ä¸€äº›å…³é”®æ¦‚å¿µã€‚è®©æˆ‘ä»¬ä»ä¸»çº¿ç¨‹å¼€å§‹ã€‚</p>
<p>Web åº”ç”¨ç¨‹åºéœ€è¦åœ¨æ­¤å•ä¸ªä¸»çº¿ç¨‹ä¸Šæ‰§è¡ŒæŸäº›å…³é”®æ“ä½œã€‚å¯¼èˆªåˆ° Web åº”ç”¨ç¨‹åºæ—¶ï¼Œæµè§ˆå™¨å°†åˆ›å»ºå¹¶å‘åº”ç”¨ç¨‹åºæˆäºˆæ­¤çº¿ç¨‹ï¼Œä»¥ä¾¿ä»£ç åœ¨å…¶ä¸Šæ‰§è¡Œã€‚</p>
<p>ç½‘ç»œåº”ç”¨ç¨‹åºçš„å¤§éƒ¨åˆ†è¿è¡Œæ—¶æ´»åŠ¨éƒ½åœ¨è¿™ä¸ªå•çº¿ç¨‹ä¸Šè¿›è¡Œï¼Œçº¿ç¨‹ä¸Šçš„æ¯ä¸ªæ´»åŠ¨éƒ½åœ¨ä»»åŠ¡ä¸­è°ƒç”¨ã€‚</p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110010507.png" alt="20231110010507"/></p>
<div class="island-directive tip"><p class="island-directive-title">TIP</p><div class="island-directive-content"><p>æ³¨æ„ï¼šè¿™å¹¶ä¸æ„å‘³ç€æµè§ˆå™¨ï¼ˆå³ Chromeï¼‰æ˜¯å•çº¿ç¨‹çš„ã€‚ç°ä»£æµè§ˆå™¨æ—¢æ˜¯å¤š<a href="https://webperf.tips/tip/browser-process-model/" target="_blank" rel="nofollow">è¿›ç¨‹çš„ï¼Œä¹Ÿæ˜¯å¤šçº¿ç¨‹çš„</a>ã€‚</p></div></div>
<h2 id="tasks"><a class="header-anchor" aria-hidden="true" href="#tasks">#</a>Tasks</h2>
<p>ä»»åŠ¡æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œçš„è¿è¡Œæ—¶æ‰§è¡Œå•å…ƒã€‚</p>
<p>ä»»åŠ¡çš„ä¸€äº›å¸¸è§ç¤ºä¾‹åŒ…æ‹¬ï¼š</p>
<ul>
<li>Parsing of HTML or CSS</li>
<li>User Input Handling, such as clicking or typing</li>
<li>Compiling and Executing JavaScript</li>
<li>Receiving Network Data</li>
<li>The Render Steps (Style, Layout, and Paint; discussed later)</li>
</ul>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110010725.png" alt="20231110010725"/></p>
<p>æŸäº›ä»»åŠ¡å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œã€‚ä¾‹å¦‚ï¼Œä»»ä½•ç›´æ¥éœ€è¦è®¿é—® DOMï¼ˆå³æ–‡æ¡£ï¼‰çš„ä»»åŠ¡éƒ½å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œï¼ˆå› ä¸º DOM ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼‰ã€‚è¿™åŒ…æ‹¬å¤§å¤šæ•°ä¸ç”¨æˆ·ç•Œé¢ç›¸å…³çš„ä»£ç ã€‚</p>
<p>ä¸»çº¿ç¨‹ä¸Šä¸€æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªä»»åŠ¡ã€‚</p>
<p>æ­¤å¤–ï¼Œä¸€ä¸ªä»»åŠ¡å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œå®Œæˆåï¼Œæ‰èƒ½è¿è¡Œå¦ä¸€ä¸ªä»»åŠ¡ã€‚æµè§ˆå™¨æ²¡æœ‰ &quot;éƒ¨åˆ† &quot;æ‰§è¡Œä»»åŠ¡çš„æœºåˆ¶--æ¯ä¸ªä»»åŠ¡éƒ½æ˜¯å®Œæ•´è¿è¡Œçš„ã€‚</p>
<p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œä¸¤ä¸ªä»»åŠ¡ä¾æ¬¡è¿è¡Œï¼Œæ¯ä¸ªä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šå®Œæˆï¼š</p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110010916.png" alt="20231110010916"/></p>
<h2 id="task-queue"><a class="header-anchor" aria-hidden="true" href="#task-queue">#</a>Task Queue</h2>
<p>åœ¨ä¸»çº¿ç¨‹ä¸Šä¸å¯èƒ½åŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡ï¼Œå› æ­¤ä»»ä½•æœªä¸»åŠ¨è¿è¡Œçš„ä»»åŠ¡éƒ½ä¼šé©»ç•™åœ¨ä¸€ä¸ªåä¸ºä»»åŠ¡é˜Ÿåˆ—çš„æ•°æ®ç»“æ„ä¸­ã€‚</p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110011042.png" alt="20231110011042"/></p>
<p>å½“æ‚¨çš„Webåº”ç”¨ç¨‹åºåœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œæ—¶ï¼Œæµè§ˆå™¨ä¼šå°†ä»»åŠ¡æ’é˜Ÿåˆ°æ­¤æ•°æ®ç»“æ„ä¸­ã€‚</p>
<p>å½“ä¸»çº¿ç¨‹å‡†å¤‡å¥½æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡æ—¶ï¼Œæµè§ˆå™¨ä¹Ÿä¼šä»è¯¥é˜Ÿåˆ—ä¸­è¯»å–æ•°æ®ã€‚</p>
<div class="island-directive info"><p class="island-directive-title">INFO</p><div class="island-directive-content"><p>æ³¨æ„ï¼šä»»åŠ¡é˜Ÿåˆ—ä¸æ˜¯å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ã€‚å¤§å¤šæ•°æµè§ˆå™¨éƒ½é‡‡ç”¨<strong>å¯å‘å¼è°ƒåº¦é€»è¾‘</strong>ï¼Œå°†æŸäº›ä»»åŠ¡æ’åœ¨å…¶ä»–ä»»åŠ¡ä¹‹å‰ã€‚</p><p><strong>å¯å‘å¼è°ƒåº¦</strong>æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</p></div></div>
<h2 id="the-render-steps-task-and-frames-æ¸²æŸ“æ­¥éª¤ä»»åŠ¡å’Œå¸§"><a class="header-anchor" aria-hidden="true" href="#the-render-steps-task-and-frames-æ¸²æŸ“æ­¥éª¤ä»»åŠ¡å’Œå¸§">#</a>The Render Steps Task and Frames (æ¸²æŸ“æ­¥éª¤ä»»åŠ¡å’Œå¸§)</h2>
<p>æ¸²æŸ“æ­¥éª¤ä»»åŠ¡è´Ÿè´£å°†æ´»åŠ¨ DOM å’Œ CSS æ ·å¼è½¬æ¢ä¸ºç”¨æˆ·å±å¹•ä¸Šçš„å¯è§†åƒç´ ã€‚</p>
<p>æ¸²æŸ“æ­¥éª¤ä»»åŠ¡å®Œæˆåç”Ÿæˆçš„å†…å®¹ç§°ä¸º <em>Frame</em>ã€‚</p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110011446.png" alt="20231110011446"/></p>
<p><strong>å¯¹ç½‘é¡µ DOM æˆ– CSS æ ·å¼çš„ç¼–è¾‘ä¼šé€šçŸ¥æµè§ˆå™¨éœ€è¦ç”Ÿæˆ<em>Frame</em>ã€‚å½“æµè§ˆå™¨æ£€æµ‹åˆ°éœ€è¦ç”Ÿæˆ<em>Frame</em>æ—¶ï¼Œå®ƒä¼šè¿è¡Œæ¸²æŸ“æ­¥éª¤ä»»åŠ¡ï¼Œè€Œä¸æ˜¯ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è¿è¡Œä»»åŠ¡ï¼š</strong></p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110011553.png" alt="20231110011553"/></p>
<p>There are generally 3 key steps for the Render Steps to complete:</p>
<ol>
<li><em>Style</em> - Assign CSS colors, fonts, and other styling properties to visual elements</li>
<li><em>Layout</em>Â - Position visual elements with precise coordinates(ç²¾ç¡®åæ ‡)</li>
<li><em>Paint</em>Â - Instruct graphics(å›¾å½¢) libraries on how to draw positioned, styled visual elements</li>
</ol>
<p>For more details on each step, check out my detailed tip on <a href="https://webperf.tips/tip/browser-rendering-pipeline" target="_blank" rel="nofollow">the browser rendering pipeline</a>.</p>
<h2 id="the-event-loop"><a class="header-anchor" aria-hidden="true" href="#the-event-loop">#</a>The Event Loop</h2>
<p>æœ€åï¼Œåœ¨ä»‹ç»äº†æ‰€æœ‰è¿™äº›åŸºç¡€ä¸»é¢˜åï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥è®¨è®º &quot;äº‹ä»¶å¾ªç¯ &quot;äº†ï¼</p>
<p>äº‹ä»¶å¾ªç¯æ˜¯è¿™äº›åŸºç¡€éƒ¨åˆ†ä¹‹é—´çš„åè°ƒè€…ã€‚</p>
<p>å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œè´Ÿè´£ä»¥ä¸‹å·¥ä½œï¼š</p>
<ul>
<li>ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªå¯ç”¨ä»»åŠ¡ï¼Œå¹¶å°†å…¶ç½®äºä¸»çº¿ç¨‹ä¸­è¿è¡Œå®Œæˆ</li>
<li>å¶å°”é€‰æ‹© &quot;æ¸²æŸ“æ­¥éª¤ &quot;ä»»åŠ¡ï¼Œè€Œä¸æ˜¯ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è¯»å–æ¥ç”Ÿæˆ<em>Frame</em></li>
</ul>
<p>è¿™ä¸ªä¼ªä»£ç ç‰‡æ®µæ€»ç»“äº†äº‹ä»¶å¾ªç¯ï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#81A1C1">while</span><span style="color:#D8DEE9FF"> (</span><span style="color:#81A1C1">true</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#81A1C1">var</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">nextTask</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4">    </span><span style="color:#616E88">// The browser notifies the Event Loop</span></span>
<span class="line"><span style="color:#ECEFF4">    </span><span style="color:#616E88">// when it&#x27;s time to render a frame</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#81A1C1">if</span><span style="color:#D8DEE9FF"> (</span><span style="color:#88C0D0">shouldRenderFrame</span><span style="color:#D8DEE9FF">()) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">        </span><span style="color:#D8DEE9">nextTask</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">getRenderStepsTask</span><span style="color:#D8DEE9FF">()</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">else</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">        </span><span style="color:#616E88">// If it&#x27;s not ready for a frame,</span></span>
<span class="line"><span style="color:#ECEFF4">        </span><span style="color:#616E88">// the Event Loop should run the</span></span>
<span class="line"><span style="color:#ECEFF4">        </span><span style="color:#616E88">// next Task.</span></span>
<span class="line"><span style="color:#D8DEE9FF">        </span><span style="color:#D8DEE9">nextTask</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">taskQueue</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">next</span><span style="color:#D8DEE9FF">()</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4">    </span><span style="color:#616E88">// Run Task to completion</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">runOnMainThread</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">nextTask</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span><span class="line-number">6</span><span class="line-number">7</span><span class="line-number">8</span><span class="line-number">9</span><span class="line-number">10</span><span class="line-number">11</span><span class="line-number">12</span><span class="line-number">13</span><span class="line-number">14</span><span class="line-number">15</span><span class="line-number">16</span><span class="line-number">17</span></div></div>
<p>åœ¨äº‹ä»¶å¾ªç¯çš„æ¯ä¸€è½®ä¸­ï¼Œå®ƒéƒ½ä¼šå†³å®šæ˜¯é€‰æ‹©ä¸€é¡¹ä»»åŠ¡è¿˜æ˜¯åœ¨å±å¹•ä¸Šå‘ˆç°ä¸€ä¸ª<em>Frame</em>ã€‚</p>
<p>éœ€è¦äº†è§£çš„å…³é”®æ˜¯ï¼Œæµè§ˆå™¨å¯ä»¥è¿è¡Œä»»åŠ¡æˆ–ç”Ÿæˆ<em>Frame</em>ï¼Œä½†ä¸èƒ½åŒæ—¶è¿è¡Œä»»åŠ¡å’Œ<em>Frame</em>ã€‚(è¿™ä¸€ç‚¹æœ‰å°‘æ•°ä¾‹å¤–ï¼Œä½†æˆ‘ä¸ä¼šåœ¨æœ¬æç¤ºä¸­è®¨è®ºï¼‰ã€‚</p>
<p>æ— è®ºå“ªä¸ªä»»åŠ¡æœ€ç»ˆè¿è¡Œï¼Œéƒ½è¦è¿è¡Œåˆ°å®Œæˆä¸ºæ­¢ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œä»»åŠ¡æŒç»­æ—¶é—´åº”è¯¥è¾ƒçŸ­ï¼Œè¿™æ ·æµè§ˆå™¨å°±èƒ½æ›´å¿«åœ°è°ƒç”¨æ¸²æŸ“æ­¥éª¤ï¼Œä¸ºç”¨æˆ·ç”Ÿæˆä¸€ä¸ª<em>Frame</em>ã€‚æˆ‘çš„<a href="https://webperf.tips/tip/long-tasks" target="_blank" rel="nofollow">é¿å…é•¿ä»»åŠ¡</a>æç¤ºä¸­å¯¹æ­¤æœ‰æ›´è¯¦ç»†çš„ä»‹ç»ã€‚</p>
<div class="island-directive tip"><p class="island-directive-title">TIP</p><div class="island-directive-content"><p>æ³¨ï¼š&quot;äº‹ä»¶å¾ªç¯&quot;ï¼ˆEvent Loopï¼‰æ˜¯ä¸€ç§ C++ ç»“æ„ï¼Œå¹¶ä¸æ˜¯ç”¨ JavaScript ç¼–å†™çš„ï¼Œæˆ‘åªæ˜¯ç¢°å·§åœ¨è¿™ä¸ªä¼ªä»£ç ä¸­ä½¿ç”¨äº†å®ƒã€‚</p></div></div>
<h2 id="non-blocking"><a class="header-anchor" aria-hidden="true" href="#non-blocking">#</a>Non-Blocking</h2>
<p>æ ¹æ®è®¾è®¡ï¼Œäº‹ä»¶å¾ªç¯ä»ä¸æš‚åœæˆ–é˜»å¡ä¸»çº¿ç¨‹ï¼›å®ƒå°†ä¸æ–­å¾ªç¯è¿è¡Œä»»åŠ¡å¹¶äº§ç”Ÿå¸§ã€‚</p>
<p>ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬éœ€è¦æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬çš„ç½‘ç»œåº”ç”¨ç¨‹åºè¯·æ±‚ç½‘ç»œæ•°æ®æˆ–ä½¿ç”¨å®šæ—¶å™¨ï¼Œé‚£ä¹ˆåœ¨äº‹ä»¶å¾ªç¯ä¸­ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿ</p>
<p>æµè§ˆå™¨æä¾›çš„æ¯ä¸ªå¼‚æ­¥åŸºå…ƒéƒ½è¡¨ç¤ºä¸ºä¸äº‹ä»¶å¾ªç¯æ‰§è¡Œæ¨¡å‹å…¼å®¹çš„ä»»åŠ¡ã€‚</p>
<div class="island-directive tip"><p class="island-directive-title">åŸæ–‡</p><div class="island-directive-content"><p>Each asynchronous primitive provided by the browser is represented as a Task that is compatible with the Event Loop execution model.</p></div></div>
<p>å¼‚æ­¥æµè§ˆå™¨ API ç¤ºä¾‹åŒ…æ‹¬</p>
<ul>
<li>Loading network data viaÂ <code>XMLHttpRequest</code>Â orÂ <code>fetch</code></li>
<li>Responding to events viaÂ <code>addEventListener(...)</code></li>
<li>Timers likeÂ <code>setTimeout</code>Â orÂ <code>setInterval</code></li>
</ul>
<p>For example, utilizingÂ <code>setTimeout(callback, 500)</code>Â does not block the Main Thread, but tells the browser to queue a Task to runÂ <code>callback</code>Â on the Task Queue after 500ms. (500msåæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—)</p>
<h2 id="example-timer"><a class="header-anchor" aria-hidden="true" href="#example-timer">#</a>Example: Timer</h2>
<p>è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜æˆ‘ä»¬æ‰€å­¦åˆ°çš„ä¸€åˆ‡ã€‚</p>
<p>æˆ‘ä»¬çš„ç¤ºä¾‹å°†æ˜¯ä¸€ä¸ªç®€å•çš„è„šæœ¬ï¼Œæ¯ 500ms åœ¨å®šæ—¶å™¨å›è°ƒä¸­ç¼–è¾‘ä¸€æ¬¡ DOMã€‚</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#81A1C1">let</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">count</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">0</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span></span>
<span class="line"><span style="color:#ECEFF4">    </span><span style="color:#616E88">// Queue a Task on the Task Queue every 500ms</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">setInterval</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">()</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=&gt;</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">        </span><span style="color:#616E88">// This code runs in a Task</span></span>
<span class="line"><span style="color:#D8DEE9FF">        </span><span style="color:#D8DEE9">count</span><span style="color:#81A1C1">++;</span></span>
<span class="line"><span style="color:#D8DEE9FF">        </span><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">node</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">document</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">getElementById</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">output</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">        </span><span style="color:#D8DEE9">node</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">innerText</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">`</span><span style="color:#81A1C1">${</span><span style="color:#D8DEE9">count</span><span style="color:#81A1C1">}</span><span style="color:#A3BE8C"> Timers Fired!</span><span style="color:#ECEFF4">`</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">},</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">500</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span><span class="line-number">6</span><span class="line-number">7</span><span class="line-number">8</span><span class="line-number">9</span></div></div>
<p>Since this edits the DOM in a Task, the browser will need to generate a Frame to represent the changes as pixels.</p>
<p>Initially, after this script is evaluated, our Main Thread will be free, and the Task Queue will be empty. The browser has been directed to queue a Task after 500ms.</p>
<p>Though the thread has no activity happening during this 500ms waiting time, it is free and able to respond to clicking, typing, or other Tasks if there were any queued.</p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110013457.png" alt="20231110013457"/></p>
<p>After 500ms, the browser will queue a Task for running our callback for editing the DOM:</p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110013531.png" alt="20231110013531"/></p>
<p>The Event Loop detects a Task queued to be run, and moves it from the Queue to the Main Thread to run (since the Main Thread is not busy doing anything else).</p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110013624.png" alt="20231110013624"/></p>
<p>This task is run and edits the DOM, which notifies the Event Loop to run the Render Steps:</p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110013737.png" alt="20231110013737"/></p>
<p>è¯¥<em>Frame</em>åˆ¶ä½œå®Œæˆåï¼Œæˆ‘ä»¬æ›´æ–°çš„æ–‡æœ¬å°±ä¼šå‡ºç°åœ¨å±å¹•ä¸Šï¼</p>
<p>æ¯éš” 500 æ¯«ç§’ï¼Œè¿™äº›ç¡®åˆ‡çš„é˜¶æ®µå°†æŒç»­è¿›è¡Œï¼ŒåŒæ—¶é˜Ÿåˆ—ä¸­ä¼šå‡ºç°ä¸€ä¸ªå®šæ—¶å™¨ä»»åŠ¡ã€‚äº‹ä»¶å¾ªç¯å°†ä»é˜Ÿåˆ—ä¸­ç§»é™¤æ¯ä¸ªä»»åŠ¡ï¼Œå¹¶å°†å…¶ç½®äºä¸»çº¿ç¨‹ä¸­è¿è¡Œã€‚è¿™å°†å¯¼è‡´äº‹ä»¶å¾ªç¯è¿è¡Œæ¸²æŸ“æ­¥éª¤ä»»åŠ¡å¹¶ç”Ÿæˆå¸§ã€‚</p>
<p>æ‚¨å¯ä»¥å¯¹è¯¥ç¤ºä¾‹è¿›è¡Œåˆ†æï¼Œå¹¶åœ¨åˆ†æå™¨ä¸­æŸ¥çœ‹ä»»åŠ¡å’Œå¸§çš„ç”Ÿæˆæƒ…å†µï¼</p>
<p>Here&#x27;s a screenshot of it happening in the Profiler:</p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110015231.png" alt="20231110015231"/></p>
<p>å®æµ‹å›¾ï¼š
<img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110015618.png" alt="20231110015618"/></p>
<p>è™½ç„¶è¿™ä¸ªç®€å•çš„ç¤ºä¾‹åªæ˜¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œä½†æ‚¨å¯ä»¥å°†å…¶æ¨å¹¿åˆ°ç½‘ç»œåº”ç”¨ç¨‹åºä¸­çš„ä»»ä½•æ“ä½œï¼Œæ— è®ºæ˜¯ç‚¹å‡»æŒ‰é’®è¿˜æ˜¯æ¥æ”¶ç½‘ç»œæ•°æ®ã€‚</p>
<p>Consider these tips next:</p>
<h2 id="conclusion"><a class="header-anchor" aria-hidden="true" href="#conclusion">#</a>Conclusion</h2>
<ul>
<li><a href="https://webperf.tips/tip/browser-process-model" target="_blank" rel="nofollow">Browser Process Model</a></li>
<li><a href="https://webperf.tips/tip/browser-scheduling-internals" target="_blank" rel="nofollow">Browser Scheduling Logic</a></li>
<li><a href="https://webperf.tips/tip/browser-rendering-pipeline" target="_blank" rel="nofollow">Browser Rendering Pipeline</a></li>
<li><a href="https://webperf.tips/tip/long-tasks" target="_blank" rel="nofollow">Long Tasks and Performance</a></li>
</ul><!--/$--></div><footer mt="8"><div class="xs:flex" p="b-5" justify="between" items-center="~"><div flex="" text="sm text-2" leading-6="~" leading-8="sm:~" font-medium=""><p>Last Updated: </p><span>Invalid Date</span></div></div><div flex="~ col sm:row" justify="sm:around" gap="2" divider-top="" pt="6"><div flex="~ col" class="_prev_1f77m_13"><a href="/chrome/performance/tips/collect-a-trace" class="_pager-link_1f77m_20"><span class="_desc_1f77m_43">Previous Page</span><span class="_title_1f77m_34">å¦‚ä½•æ”¶é›† Web æ€§èƒ½è·Ÿè¸ª</span></a></div><div flex="~ col" class="_next_1f77m_16"><a href="/chrome/performance/tips/flamegraphs-in-depth" class="_pager-link_1f77m_20 _next_1f77m_16"><span class="_desc_1f77m_43">Next page</span><span class="_title_1f77m_34">æ·±åº¦è®²è§£ç«ç„°å›¾ ğŸ”¥ğŸ”¥</span></a></div></div></footer></div></div><div relative="~" display="none lg:block" order="2" flex="1" p="l-8" class="max-w-256px"><div class="_aside-container_5cssi_32"><div flex="~ col" p="b-8" style="min-height:calc(100vh - (var(--island-nav-height-desktop) + 32px))"><div><div flex="~ col 1"><div display="lg:block"><div relative="" divider-left="" p="l-4" text="13px" font-medium="" id="aside-container"><div absolute="" pos="top-33px" opacity="0" w="1px" h="18px" bg="brand" style="left:-1px;transition:top 0.25s cubic-bezier(0, 1, 0.5, 1), background-color 0.5s, opacity 0.25s" id="aside-marker"></div><div block="~" leading-7="" text="13px" font="semibold">ç›®å½•</div><nav><ul relative=""><li><a href="#the-main-thread" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">The Main Thread</a></li><li><a href="#tasks" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">Tasks</a></li><li><a href="#task-queue" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">Task Queue</a></li><li><a href="#the-render-steps-task-and-frames-æ¸²æŸ“æ­¥éª¤ä»»åŠ¡å’Œå¸§" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">The Render Steps Task and Frames (æ¸²æŸ“æ­¥éª¤ä»»åŠ¡å’Œå¸§)</a></li><li><a href="#the-event-loop" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">The Event Loop</a></li><li><a href="#non-blocking" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">Non-Blocking</a></li><li><a href="#example-timer" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">Example: Timer</a></li><li><a href="#conclusion" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">Conclusion</a></li></ul></nav></div></div></div></div></div></div></div></div></div></section></div></div>
      <script>window.ISLAND_PAGE_DATA={"siteData":{"lang":"en-US","title":"bekaçš„åšå®¢","description":"Island","themeConfig":{"lastUpdatedText":"ä¸Šæ¬¡æ›´æ–°","outlineTitle":"ç›®å½•","nav":[{"text":"Article","link":"/article/astro","activeMatch":"/article/"},{"text":"Chrome","link":"/chrome/fast-load-time/user-centric-performance-metrics","activeMatch":"/chrome/"},{"text":"Design-pattern","link":"/design-pattern/indexs","activeMatch":"/design-pattern/"},{"text":"Open-source","link":"/open-source/delay","activeMatch":"/open-source/"},{"text":"Promise","link":"/promise/first-resolved","activeMatch":"/promise/"},{"text":"Webpack","link":"/webpack/build-result","activeMatch":"/webpack/"}],"sidebar":{"article":[{"text":"Article","items":[{"text":"Astro","link":"/article/astro"},{"text":"æ–°ä¸€ä»£å…¨æ ˆæ¡†æ¶ Fresh","link":"/article/fresh"}],"collapsable":true}],"chrome":[{"text":"Chorme lala","items":[{"text":"ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ•ˆæœæŒ‡æ ‡","link":"/chrome/fast-load-time/user-centric-performance-metrics"}],"collapsable":true},{"text":"æµè§ˆå™¨å·¥ä½œåŸç†","items":[{"text":"é«˜çº§ä½“ç³»ç»“æ„ï¼ˆç¬¬ 1 éƒ¨åˆ†ï¼‰","link":"/chrome/how-web-browser-works/part-1_high-level-architecture"},{"text":"å¯¼èˆªé˜¶æ®µï¼ˆç¬¬ 2 éƒ¨åˆ†ï¼‰","link":"/chrome/how-web-browser-works/part-2_navigation-phase"},{"text":"æ¸²æŸ“é˜¶æ®µï¼ˆç¬¬ 3 éƒ¨åˆ†ï¼‰","link":"/chrome/how-web-browser-works/part-3_rendering-phase"},{"text":"åŠ è½½é˜¶æ®µçš„ä¼˜åŒ–ï¼ˆç¬¬ 4 éƒ¨åˆ†ï¼‰","link":"/chrome/how-web-browser-works/part-4_optimization-in-the-loading-stage"},{"text":"äº¤äº’é˜¶æ®µçš„ä¼˜åŒ–ï¼ˆç¬¬ 5 éƒ¨åˆ†ï¼‰","link":"/chrome/how-web-browser-works/part-5_optimization-in-the-interaction-stage"},{"text":"ä»€ä¹ˆå¼ºåˆ¶äº†é‡æ’/å›æµ","link":"/chrome/how-web-browser-works/what-forces-layout-reflow"}],"collapsable":true},{"text":"Html","items":[{"text":"Metadata","link":"/chrome/html/metadata"},{"text":"html","link":"/chrome/html/overview"},{"text":"# æ–‡æ¡£ç»“æ„","link":"/chrome/html/structure"}],"collapsable":true},{"text":"å…³é”®æŒ‡æ ‡","items":[{"text":"First Contentful Paint (FCP)","link":"/chrome/metrics/FCP"},{"text":"Largest Contentful Paint (LCP)","link":"/chrome/metrics/LCP"},{"text":"Time to First Byte (TTFB)","link":"/chrome/metrics/TTFB"}],"collapsable":true},{"text":"æ€§èƒ½","items":[{"text":"ä¸€èˆ¬ HTML æ€§èƒ½æ³¨æ„äº‹é¡¹","link":"/chrome/performance/general-html-performance"},{"text":"optimize-resource-loading ä¼˜åŒ–èµ„æºè´Ÿè½½","link":"/chrome/performance/optimize-resource-loading"},{"text":"asdf","link":"/chrome/performance/welcome-copy"},{"text":"Welcome to Lean performance","link":"/chrome/performance/welcome"},{"text":"é€Ÿåº¦ä¸ºä»€ä¹ˆé‡è¦","link":"/chrome/performance/why-speed-matters"}],"collapsable":true},{"text":"æ€§èƒ½æŠ€å·§","items":[{"text":"Web ä¸Šçš„å¤šè¿›ç¨‹ï¼šæµè§ˆå™¨è¿›ç¨‹æ¨¡å‹","link":"/chrome/performance/tips/browser-process-model"},{"text":"Browser Rendering Pipeline","link":"/chrome/performance/tips/browser-rendering-pipeline"},{"text":"é€šè¿‡ç«ç„°å›¾æ‰¾åˆ°æœ‰é—®é¢˜çš„ä»£ç ","link":"/chrome/performance/tips/codepath-scoping"},{"text":"å¦‚ä½•æ”¶é›† Web æ€§èƒ½è·Ÿè¸ª","link":"/chrome/performance/tips/collect-a-trace"},{"text":"äº‹ä»¶å¾ªç¯åŸºç¡€çŸ¥è¯†","link":"/chrome/performance/tips/event-loop"},{"text":"æ·±åº¦è®²è§£ç«ç„°å›¾ ğŸ”¥ğŸ”¥","link":"/chrome/performance/tips/flamegraphs-in-depth"},{"text":"é•¿ä»»åŠ¡ï¼šå®ƒä»¬æ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆåº”è¯¥é¿å…å®ƒä»¬","link":"/chrome/performance/tips/long-tasks"},{"text":"performance æŸ¥çœ‹ä¸»çº¿ç¨‹ï¼ˆé¢œè‰²å«ä¹‰ï¼‰","link":"/chrome/performance/tips/main-profiler-pane"},{"text":"æ£€æµ‹æµè§ˆå™¨ä½•æ—¶åœ¨ JavaScript ä¸­ç»˜åˆ¶Frame","link":"/chrome/performance/tips/measuring-paint-time"},{"text":"å¦‚ä½•é˜…è¯» Chromium Profiler","link":"/chrome/performance/tips/network-profiler-pane"},{"text":"ä½¿ç”¨ Chromium ç½‘ç»œæ ‡ç­¾é¡µè·å–æ€§èƒ½è¯¦æƒ…","link":"/chrome/performance/tips/network-tab"},{"text":"ä½¿ç”¨æ€§èƒ½æ—¶åºæ ‡è®°è¿›è¡ŒğŸ“æµ‹é‡","link":"/chrome/performance/tips/performance-timing-markers"},{"text":"Chromium F12 æ€§èƒ½åˆ†æå™¨çš„åŸºæœ¬æ¦‚è¿°","link":"/chrome/performance/tips/profiler-basic-ui"},{"text":"ä¼ è¾“å¤§å° vs èµ„æºå¤§å°","link":"/chrome/performance/tips/resource-size-vs-transfer-size"},{"text":"å¦‚ä½•é˜…è¯»ç«ç„°å›¾ ğŸ”¥","link":"/chrome/performance/tips/understanding-flamegraphs"},{"text":"è¯†åˆ« Web åº”ç”¨ä¸­çš„æœªå‹ç¼©èµ„æº","link":"/chrome/performance/tips/validating-compression"}],"collapsable":true}],"design-pattern":[{"text":"Design-pattern","items":[{"text":"èµ„æºåˆ—è¡¨","link":"/design-pattern/indexs"},{"text":"ä»£ç†æ¨¡å¼","link":"/design-pattern/proxy-pattern"},{"text":"Singleton Pattern","link":"/design-pattern/singleton-pattern"},{"text":"çŠ¶æ€æ¨¡å¼","link":"/design-pattern/state-pattern"},{"text":"ç­–ç•¥æ¨¡å¼","link":"/design-pattern/strategy-pattern"}],"collapsable":true}],"open-source":[{"text":"Open-source","items":[{"text":"delay","link":"/open-source/delay"},{"text":"dot-prop","link":"/open-source/dot-prop"},{"text":"glob-to-regexp","link":"/open-source/glob-to-regexp"},{"text":"koa æ´‹è‘±æ¨¡å‹","link":"/open-source/koa-compose"},{"text":"quick-lru","link":"/open-source/lru-cache"},{"text":"p-defer","link":"/open-source/p-defer"},{"text":"p-lazy","link":"/open-source/p-lazy"},{"text":"p-limit","link":"/open-source/p-limit"},{"text":"p-locate","link":"/open-source/p-locate"},{"text":"p-settle","link":"/open-source/p-settle"},{"text":"yocto-queue","link":"/open-source/yocto-queue"}],"collapsable":true}],"promise":[{"text":"Promise","items":[{"text":"é¡ºåºæ‰§è¡Œä»»åŠ¡ç›´åˆ°ç¬¬ä¸€ä¸ªresolved","link":"/promise/first-resolved"},{"text":"reduceå®ç°å¤šä¸ªpromiseé¡ºåºæ‰§è¡Œ","link":"/promise/sequential-execution"}],"collapsable":true}],"webpack":[{"text":"Webpack","items":[{"text":"webpack æ‰“åŒ…ç»“æœè§£æ","link":"/webpack/build-result"},{"text":"mini-webpack","link":"/webpack/mini-webpack"},{"text":"minipack","link":"/webpack/minipack"},{"text":"[todo]tapable","link":"/webpack/tapable"}],"collapsable":true}]},"footer":{"message":"Released under the MIT License.","copyright":"Copyright Â© 2022-present Beka"}},"head":[["script",{"id":"check-dark-light"},"\n        ;(() => {\n          const saved = localStorage.getItem('island-theme-appearance')\n          const prefereDark = window.matchMedia('(prefers-color-scheme: dark)').matches\n          if (!saved || saved === 'auto' ? prefereDark : saved === 'dark') {\n            document.documentElement.classList.add('dark')\n          }\n        })()\n      "]],"base":"","icon":"","root":"/Users/beka/Desktop/code/bekacodechn.github.io/blog","appearance":true},"pagePath":"/Users/beka/Desktop/code/bekacodechn.github.io/blog/chrome/performance/tips/event-loop.md","relativePagePath":"chrome/performance/tips/event-loop.md","toc":[{"id":"the-main-thread","text":"The Main Thread","depth":2},{"id":"tasks","text":"Tasks","depth":2},{"id":"task-queue","text":"Task Queue","depth":2},{"id":"the-render-steps-task-and-frames-æ¸²æŸ“æ­¥éª¤ä»»åŠ¡å’Œå¸§","text":"The Render Steps Task and Frames (æ¸²æŸ“æ­¥éª¤ä»»åŠ¡å’Œå¸§)","depth":2},{"id":"the-event-loop","text":"The Event Loop","depth":2},{"id":"non-blocking","text":"Non-Blocking","depth":2},{"id":"example-timer","text":"Example: Timer","depth":2},{"id":"conclusion","text":"Conclusion","depth":2}],"title":"äº‹ä»¶å¾ªç¯åŸºç¡€çŸ¥è¯†","lastUpdatedTime":"Invalid Date","content":"# äº‹ä»¶å¾ªç¯åŸºç¡€çŸ¥è¯†\n\n\n`metadata:`\n\n**åŸæ ‡é¢˜:** Event Loop Fundamentals\n\n**é“¾æ¥:** https://webperf.tips/tip/event-loop/\n\n---\n\næµè§ˆå™¨äº‹ä»¶å¾ªç¯å¯èƒ½æ˜¯éœ€è¦æŒæ¡çš„æœ€é‡è¦çš„å‰ç«¯æ€§èƒ½æ¦‚å¿µã€‚å®ƒçš„è¡Œä¸ºå†³å®šäº† Web åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶çš„è¡Œä¸ºæ–¹å¼ã€‚\n\n## The Main Thread\n\nåœ¨è®¨è®ºäº‹ä»¶å¾ªç¯ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä»‹ç»ä¸€äº›å…³é”®æ¦‚å¿µã€‚è®©æˆ‘ä»¬ä»ä¸»çº¿ç¨‹å¼€å§‹ã€‚\n\nWeb åº”ç”¨ç¨‹åºéœ€è¦åœ¨æ­¤å•ä¸ªä¸»çº¿ç¨‹ä¸Šæ‰§è¡ŒæŸäº›å…³é”®æ“ä½œã€‚å¯¼èˆªåˆ° Web åº”ç”¨ç¨‹åºæ—¶ï¼Œæµè§ˆå™¨å°†åˆ›å»ºå¹¶å‘åº”ç”¨ç¨‹åºæˆäºˆæ­¤çº¿ç¨‹ï¼Œä»¥ä¾¿ä»£ç åœ¨å…¶ä¸Šæ‰§è¡Œã€‚\n\nç½‘ç»œåº”ç”¨ç¨‹åºçš„å¤§éƒ¨åˆ†è¿è¡Œæ—¶æ´»åŠ¨éƒ½åœ¨è¿™ä¸ªå•çº¿ç¨‹ä¸Šè¿›è¡Œï¼Œçº¿ç¨‹ä¸Šçš„æ¯ä¸ªæ´»åŠ¨éƒ½åœ¨ä»»åŠ¡ä¸­è°ƒç”¨ã€‚\n\n![20231110010507](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110010507.png)\n\n:::tip\næ³¨æ„ï¼šè¿™å¹¶ä¸æ„å‘³ç€æµè§ˆå™¨ï¼ˆå³ Chromeï¼‰æ˜¯å•çº¿ç¨‹çš„ã€‚ç°ä»£æµè§ˆå™¨æ—¢æ˜¯å¤š[è¿›ç¨‹çš„ï¼Œä¹Ÿæ˜¯å¤šçº¿ç¨‹çš„](https://webperf.tips/tip/browser-process-model/)ã€‚\n:::\n\n## Tasks\n\nä»»åŠ¡æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œçš„è¿è¡Œæ—¶æ‰§è¡Œå•å…ƒã€‚\n\nä»»åŠ¡çš„ä¸€äº›å¸¸è§ç¤ºä¾‹åŒ…æ‹¬ï¼š\n\n*   Parsing of HTML or CSS  \n*   User Input Handling, such as clicking or typing  \n*   Compiling and Executing JavaScript  \n*   Receiving Network Data\n*   The Render Steps (Style, Layout, and Paint; discussed later)  \n\n![20231110010725](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110010725.png)\n\næŸäº›ä»»åŠ¡å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œã€‚ä¾‹å¦‚ï¼Œä»»ä½•ç›´æ¥éœ€è¦è®¿é—® DOMï¼ˆå³æ–‡æ¡£ï¼‰çš„ä»»åŠ¡éƒ½å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œï¼ˆå› ä¸º DOM ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼‰ã€‚è¿™åŒ…æ‹¬å¤§å¤šæ•°ä¸ç”¨æˆ·ç•Œé¢ç›¸å…³çš„ä»£ç ã€‚\n\nä¸»çº¿ç¨‹ä¸Šä¸€æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªä»»åŠ¡ã€‚\n\næ­¤å¤–ï¼Œä¸€ä¸ªä»»åŠ¡å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œå®Œæˆåï¼Œæ‰èƒ½è¿è¡Œå¦ä¸€ä¸ªä»»åŠ¡ã€‚æµè§ˆå™¨æ²¡æœ‰ \"éƒ¨åˆ† \"æ‰§è¡Œä»»åŠ¡çš„æœºåˆ¶--æ¯ä¸ªä»»åŠ¡éƒ½æ˜¯å®Œæ•´è¿è¡Œçš„ã€‚\n\nåœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œä¸¤ä¸ªä»»åŠ¡ä¾æ¬¡è¿è¡Œï¼Œæ¯ä¸ªä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šå®Œæˆï¼š\n\n![20231110010916](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110010916.png)\n\n## Task Queue\n\nåœ¨ä¸»çº¿ç¨‹ä¸Šä¸å¯èƒ½åŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡ï¼Œå› æ­¤ä»»ä½•æœªä¸»åŠ¨è¿è¡Œçš„ä»»åŠ¡éƒ½ä¼šé©»ç•™åœ¨ä¸€ä¸ªåä¸ºä»»åŠ¡é˜Ÿåˆ—çš„æ•°æ®ç»“æ„ä¸­ã€‚\n\n![20231110011042](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110011042.png)\n\nå½“æ‚¨çš„Webåº”ç”¨ç¨‹åºåœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œæ—¶ï¼Œæµè§ˆå™¨ä¼šå°†ä»»åŠ¡æ’é˜Ÿåˆ°æ­¤æ•°æ®ç»“æ„ä¸­ã€‚\n\nå½“ä¸»çº¿ç¨‹å‡†å¤‡å¥½æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡æ—¶ï¼Œæµè§ˆå™¨ä¹Ÿä¼šä»è¯¥é˜Ÿåˆ—ä¸­è¯»å–æ•°æ®ã€‚\n\n:::info\næ³¨æ„ï¼šä»»åŠ¡é˜Ÿåˆ—ä¸æ˜¯å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ã€‚å¤§å¤šæ•°æµè§ˆå™¨éƒ½é‡‡ç”¨**å¯å‘å¼è°ƒåº¦é€»è¾‘**ï¼Œå°†æŸäº›ä»»åŠ¡æ’åœ¨å…¶ä»–ä»»åŠ¡ä¹‹å‰ã€‚\n\n**å¯å‘å¼è°ƒåº¦**æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ\n:::\n\n## The Render Steps Task and Frames (æ¸²æŸ“æ­¥éª¤ä»»åŠ¡å’Œå¸§)\n\næ¸²æŸ“æ­¥éª¤ä»»åŠ¡è´Ÿè´£å°†æ´»åŠ¨ DOM å’Œ CSS æ ·å¼è½¬æ¢ä¸ºç”¨æˆ·å±å¹•ä¸Šçš„å¯è§†åƒç´ ã€‚\n\næ¸²æŸ“æ­¥éª¤ä»»åŠ¡å®Œæˆåç”Ÿæˆçš„å†…å®¹ç§°ä¸º *Frame*ã€‚\n\n![20231110011446](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110011446.png)\n\n**å¯¹ç½‘é¡µ DOM æˆ– CSS æ ·å¼çš„ç¼–è¾‘ä¼šé€šçŸ¥æµè§ˆå™¨éœ€è¦ç”Ÿæˆ*Frame*ã€‚å½“æµè§ˆå™¨æ£€æµ‹åˆ°éœ€è¦ç”Ÿæˆ*Frame*æ—¶ï¼Œå®ƒä¼šè¿è¡Œæ¸²æŸ“æ­¥éª¤ä»»åŠ¡ï¼Œè€Œä¸æ˜¯ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è¿è¡Œä»»åŠ¡ï¼š**\n\n![20231110011553](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110011553.png)\n\nThere are generally 3 key steps for the Render Steps to complete:\n\n1.  *Style* - Assign CSS colors, fonts, and other styling properties to visual elements\n2.  *Layout*Â - Position visual elements with precise coordinates(ç²¾ç¡®åæ ‡)\n3.  *Paint*Â - Instruct graphics(å›¾å½¢) libraries on how to draw positioned, styled visual elements\n\nFor more details on each step, check out my detailed tip on [the browser rendering pipeline](https://webperf.tips/tip/browser-rendering-pipeline).\n\n## The Event Loop\n\næœ€åï¼Œåœ¨ä»‹ç»äº†æ‰€æœ‰è¿™äº›åŸºç¡€ä¸»é¢˜åï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥è®¨è®º \"äº‹ä»¶å¾ªç¯ \"äº†ï¼\n\näº‹ä»¶å¾ªç¯æ˜¯è¿™äº›åŸºç¡€éƒ¨åˆ†ä¹‹é—´çš„åè°ƒè€…ã€‚\n\nå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œè´Ÿè´£ä»¥ä¸‹å·¥ä½œï¼š\n\n- ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªå¯ç”¨ä»»åŠ¡ï¼Œå¹¶å°†å…¶ç½®äºä¸»çº¿ç¨‹ä¸­è¿è¡Œå®Œæˆ\n- å¶å°”é€‰æ‹© \"æ¸²æŸ“æ­¥éª¤ \"ä»»åŠ¡ï¼Œè€Œä¸æ˜¯ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è¯»å–æ¥ç”Ÿæˆ*Frame*\n\nè¿™ä¸ªä¼ªä»£ç ç‰‡æ®µæ€»ç»“äº†äº‹ä»¶å¾ªç¯ï¼š\n\n```js\nwhile (true) {\n    var nextTask;\n\n    // The browser notifies the Event Loop\n    // when it's time to render a frame\n    if (shouldRenderFrame()) {\n        nextTask = getRenderStepsTask();\n    } else {\n        // If it's not ready for a frame,\n        // the Event Loop should run the\n        // next Task.\n        nextTask = taskQueue.next();\n    }\n\n    // Run Task to completion\n    runOnMainThread(nextTask);\n}\n```\n\nåœ¨äº‹ä»¶å¾ªç¯çš„æ¯ä¸€è½®ä¸­ï¼Œå®ƒéƒ½ä¼šå†³å®šæ˜¯é€‰æ‹©ä¸€é¡¹ä»»åŠ¡è¿˜æ˜¯åœ¨å±å¹•ä¸Šå‘ˆç°ä¸€ä¸ª*Frame*ã€‚\n\néœ€è¦äº†è§£çš„å…³é”®æ˜¯ï¼Œæµè§ˆå™¨å¯ä»¥è¿è¡Œä»»åŠ¡æˆ–ç”Ÿæˆ*Frame*ï¼Œä½†ä¸èƒ½åŒæ—¶è¿è¡Œä»»åŠ¡å’Œ*Frame*ã€‚(è¿™ä¸€ç‚¹æœ‰å°‘æ•°ä¾‹å¤–ï¼Œä½†æˆ‘ä¸ä¼šåœ¨æœ¬æç¤ºä¸­è®¨è®ºï¼‰ã€‚\n\næ— è®ºå“ªä¸ªä»»åŠ¡æœ€ç»ˆè¿è¡Œï¼Œéƒ½è¦è¿è¡Œåˆ°å®Œæˆä¸ºæ­¢ã€‚\n\nä¸€èˆ¬æ¥è¯´ï¼Œä»»åŠ¡æŒç»­æ—¶é—´åº”è¯¥è¾ƒçŸ­ï¼Œè¿™æ ·æµè§ˆå™¨å°±èƒ½æ›´å¿«åœ°è°ƒç”¨æ¸²æŸ“æ­¥éª¤ï¼Œä¸ºç”¨æˆ·ç”Ÿæˆä¸€ä¸ª*Frame*ã€‚æˆ‘çš„[é¿å…é•¿ä»»åŠ¡](https://webperf.tips/tip/long-tasks)æç¤ºä¸­å¯¹æ­¤æœ‰æ›´è¯¦ç»†çš„ä»‹ç»ã€‚\n\n:::tip\næ³¨ï¼š\"äº‹ä»¶å¾ªç¯\"ï¼ˆEvent Loopï¼‰æ˜¯ä¸€ç§ C++ ç»“æ„ï¼Œå¹¶ä¸æ˜¯ç”¨ JavaScript ç¼–å†™çš„ï¼Œæˆ‘åªæ˜¯ç¢°å·§åœ¨è¿™ä¸ªä¼ªä»£ç ä¸­ä½¿ç”¨äº†å®ƒã€‚\n:::\n\n## Non-Blocking\n\næ ¹æ®è®¾è®¡ï¼Œäº‹ä»¶å¾ªç¯ä»ä¸æš‚åœæˆ–é˜»å¡ä¸»çº¿ç¨‹ï¼›å®ƒå°†ä¸æ–­å¾ªç¯è¿è¡Œä»»åŠ¡å¹¶äº§ç”Ÿå¸§ã€‚\n\nä½†æ˜¯ï¼Œå½“æˆ‘ä»¬éœ€è¦æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬çš„ç½‘ç»œåº”ç”¨ç¨‹åºè¯·æ±‚ç½‘ç»œæ•°æ®æˆ–ä½¿ç”¨å®šæ—¶å™¨ï¼Œé‚£ä¹ˆåœ¨äº‹ä»¶å¾ªç¯ä¸­ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿ\n\næµè§ˆå™¨æä¾›çš„æ¯ä¸ªå¼‚æ­¥åŸºå…ƒéƒ½è¡¨ç¤ºä¸ºä¸äº‹ä»¶å¾ªç¯æ‰§è¡Œæ¨¡å‹å…¼å®¹çš„ä»»åŠ¡ã€‚\n\n:::tip{title=åŸæ–‡}\nEach asynchronous primitive provided by the browser is represented as a Task that is compatible with the Event Loop execution model.\n:::\n\nå¼‚æ­¥æµè§ˆå™¨ API ç¤ºä¾‹åŒ…æ‹¬\n\n*   Loading network data viaÂ `XMLHttpRequest`Â orÂ `fetch`\n*   Responding to events viaÂ `addEventListener(...)`\n*   Timers likeÂ `setTimeout`Â orÂ `setInterval`\n\nFor example, utilizingÂ `setTimeout(callback, 500)`Â does not block the Main Thread, but tells the browser to queue a Task to runÂ `callback`Â on the Task Queue after 500ms. (500msåæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—)\n\n## Example: Timer\n\nè®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜æˆ‘ä»¬æ‰€å­¦åˆ°çš„ä¸€åˆ‡ã€‚\n\næˆ‘ä»¬çš„ç¤ºä¾‹å°†æ˜¯ä¸€ä¸ªç®€å•çš„è„šæœ¬ï¼Œæ¯ 500ms åœ¨å®šæ—¶å™¨å›è°ƒä¸­ç¼–è¾‘ä¸€æ¬¡ DOMã€‚\n\n```js\n    let count = 0;\n    \n    // Queue a Task on the Task Queue every 500ms\n    setInterval(() => {\n        // This code runs in a Task\n        count++;\n        const node = document.getElementById('output');\n        node.innerText = `${count} Timers Fired!`\n    }, 500);\n```\n\nSince this edits the DOM in a Task, the browser will need to generate a Frame to represent the changes as pixels.\n\nInitially, after this script is evaluated, our Main Thread will be free, and the Task Queue will be empty. The browser has been directed to queue a Task after 500ms.\n\nThough the thread has no activity happening during this 500ms waiting time, it is free and able to respond to clicking, typing, or other Tasks if there were any queued.\n\n![20231110013457](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110013457.png)\n\nAfter 500ms, the browser will queue a Task for running our callback for editing the DOM:\n\n![20231110013531](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110013531.png)\n\nThe Event Loop detects a Task queued to be run, and moves it from the Queue to the Main Thread to run (since the Main Thread is not busy doing anything else).\n\n![20231110013624](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110013624.png)\n\nThis task is run and edits the DOM, which notifies the Event Loop to run the Render Steps:\n\n![20231110013737](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110013737.png)\n\nè¯¥*Frame*åˆ¶ä½œå®Œæˆåï¼Œæˆ‘ä»¬æ›´æ–°çš„æ–‡æœ¬å°±ä¼šå‡ºç°åœ¨å±å¹•ä¸Šï¼\n\næ¯éš” 500 æ¯«ç§’ï¼Œè¿™äº›ç¡®åˆ‡çš„é˜¶æ®µå°†æŒç»­è¿›è¡Œï¼ŒåŒæ—¶é˜Ÿåˆ—ä¸­ä¼šå‡ºç°ä¸€ä¸ªå®šæ—¶å™¨ä»»åŠ¡ã€‚äº‹ä»¶å¾ªç¯å°†ä»é˜Ÿåˆ—ä¸­ç§»é™¤æ¯ä¸ªä»»åŠ¡ï¼Œå¹¶å°†å…¶ç½®äºä¸»çº¿ç¨‹ä¸­è¿è¡Œã€‚è¿™å°†å¯¼è‡´äº‹ä»¶å¾ªç¯è¿è¡Œæ¸²æŸ“æ­¥éª¤ä»»åŠ¡å¹¶ç”Ÿæˆå¸§ã€‚\n\næ‚¨å¯ä»¥å¯¹è¯¥ç¤ºä¾‹è¿›è¡Œåˆ†æï¼Œå¹¶åœ¨åˆ†æå™¨ä¸­æŸ¥çœ‹ä»»åŠ¡å’Œå¸§çš„ç”Ÿæˆæƒ…å†µï¼\n\nHere's a screenshot of it happening in the Profiler:\n\n![20231110015231](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110015231.png)\n\nå®æµ‹å›¾ï¼š\n![20231110015618](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231110015618.png)\n\nè™½ç„¶è¿™ä¸ªç®€å•çš„ç¤ºä¾‹åªæ˜¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œä½†æ‚¨å¯ä»¥å°†å…¶æ¨å¹¿åˆ°ç½‘ç»œåº”ç”¨ç¨‹åºä¸­çš„ä»»ä½•æ“ä½œï¼Œæ— è®ºæ˜¯ç‚¹å‡»æŒ‰é’®è¿˜æ˜¯æ¥æ”¶ç½‘ç»œæ•°æ®ã€‚\n\nConsider these tips next:\n\n## Conclusion\n\n*   [Browser Process Model](https://webperf.tips/tip/browser-process-model)\n*   [Browser Scheduling Logic](https://webperf.tips/tip/browser-scheduling-internals)\n*   [Browser Rendering Pipeline](https://webperf.tips/tip/browser-rendering-pipeline)\n*   [Long Tasks and Performance](https://webperf.tips/tip/long-tasks)\n","pageType":"doc","routePath":"/chrome/performance/tips/event-loop"};</script>
      
      <script type="module" src="/client-entry.js"></script>
    </body>
  </html>