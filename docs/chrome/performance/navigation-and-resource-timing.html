<!DOCTYPE html>
  <html>
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <link rel="icon" href="" type="image/svg+xml"></link>
      <script  id="check-dark-light">
        ;(() => {
          const saved = localStorage.getItem('island-theme-appearance')
          const prefereDark = window.matchMedia('(prefers-color-scheme: dark)').matches
          if (!saved || saved === 'auto' ? prefereDark : saved === 'dark') {
            document.documentElement.classList.add('dark')
          }
        })()
      </script>
      <title data-rh="true">ä½¿ç”¨å¯¼èˆªå®šæ—¶å’Œèµ„æºå®šæ—¶è¯„ä¼°ç°åœºçš„è´Ÿè½½æ€§èƒ½</title>
      <meta data-rh="true" name="description" content="Island"/>
      
      
      <script defer src='https://ga.jspm.io/npm:es-module-shims@1.6.0/dist/es-module-shims.js'></script>
      <script type="importmap">
        {
          "imports": {
            "react": "/react.js","react-dom": "/react-dom.js","react-dom/client": "/react-dom_client.js","react/jsx-runtime": "/react_jsx-runtime.js"
          }
        }
      </script>

      <link rel="stylesheet" href="/assets/style.81be0ec3.css">

    </head>
    <body>
      <div id="root"><div style="height:100%"><header relative="" z="4" fixed="md:~" class="top-0 left-0" w="100%"><div relative="" p="l-8 sm:x-8" transition="background-color duration-500" class="divider-bottom md:border-b-transparent lg:border-b-transparent" nav-h="mobile lg:desktop"><div flex="" justify="between" m="0 auto" nav-h="mobile lg:desktop" class="_container_1ic07_52  _has-sidebar_1ic07_16"><div border="border t-0 b-1 border-solid transparent" class="_nav-bar-title_1ic07_16"><a href="/" w="100%" h="100%" text="1rem" font="semibold" transition="opacity duration-300" hover="opacity-60" class="flex items-center"><span>bekaçš„åšå®¢</span></a></div><div class="_content_1ic07_24" flex="~ 1" justify="end" items-center=""><div class="search" flex="sm:1" pl="sm:8"><div flex="" items-center="~" relative="" mr="2" font="semibold"><svg width="32" height="32" viewBox="0 0 32 32" w="5" h="5" fill="currentColor"><path fill="#888888" d="m29 27.586l-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9a9.01 9.01 0 0 1-9-9Z"></path></svg><input disabled="" cursor="text focus:auto" placeholder="Search" height="8" border="none" type="text" text="sm" p="t-0 r-2 b-0 l-2" transition="all duration-200 ease" class="rounded-sm _searchInput_y03a3_1 " aria-label="Search" autoComplete="off"/><div m="r-3" w="10" h="6" p="x-1.5" rounded="md" border="1px solid gray-light-3" text="xs gray-light-3" flex="~" items-center="~" justify="around" class="_searchCommand_y03a3_7"><span>âŒ˜</span><span>K</span></div></div></div><div class="_rightNav_1ic07_42"><div class="menu"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Article</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Article-set</a></div><div text="sm" font="medium" m="x-3" class="text-brand"><a class="_link_r3fql_1 " target="" cursor="pointer">Chrome</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Design-pattern</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Open-source</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Promise</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Typescript</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Webpack</a></div></div><div class="appearance" before="menu-item-before" display="none sm:flex" items-center="center"><button class="_switch_1tqe3_1 undefined" id="" type="button" role="switch"><span class="_check_1tqe3_17"><span class="_icon_1tqe3_34"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="_sun_8e60k_1"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="_moon_8e60k_5"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div></div><button class=" _navHamburger_14nz8_1"><span class="_container_14nz8_14"><span class="_top_14nz8_21"></span><span class="_middle_14nz8_27"></span><span class="_bottom_14nz8_33"></span></span></button><div class="_navScreen_1mkpq_1 " id="navScreen"><div class="_container_1mkpq_21"><div class="_navMenu_1mkpq_27"><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Article</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Article-set</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class="text-brand"><a class="_link_r3fql_1 " target="" cursor="pointer">Chrome</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Design-pattern</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Open-source</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Promise</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Typescript</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Webpack</a></div></div></div><div class="_socialAndAppearance_1mkpq_50" flex="~" justify="center" items-center="center"><div class="items-center appearance pa-2 _navAppearance_1mkpq_46" flex="~" justify="center"><button class="_switch_1tqe3_1 undefined" id="" type="button" role="switch"><span class="_check_1tqe3_17"><span class="_icon_1tqe3_34"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="_sun_8e60k_1"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="_moon_8e60k_5"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div></div></div></div></div></div></div></header><section style="padding-top:var(--island-nav-height)"><div p="t-0 x-6 b-24 sm:6" class="_docLayout_5cssi_8"><div class="_localNav_ncerp_1"><button flex="center" class="_menu_ncerp_16"><div text="md" mr="2" class="i-carbon:menu"></div><span text="md ">Menu</span></button></div><aside class="_sidebar_iav29_1 "><nav><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">Chrome</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:28px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ•ˆæœæŒ‡æ ‡</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">æµè§ˆå™¨å·¥ä½œåŸç†</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:168px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Web æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” é«˜çº§ä½“ç³»ç»“æ„ï¼ˆç¬¬ 1 éƒ¨åˆ†ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Web æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” å¯¼èˆªé˜¶æ®µï¼ˆç¬¬ 2 éƒ¨åˆ†ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” æ¸²æŸ“é˜¶æ®µï¼ˆç¬¬ 3 éƒ¨åˆ†ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” åŠ è½½é˜¶æ®µçš„ä¼˜åŒ–ï¼ˆç¬¬ 4 éƒ¨åˆ†ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">æµè§ˆå™¨å¦‚ä½•ä¸€æ­¥ä¸€æ­¥åœ°å·¥ä½œ â€” äº¤äº’é˜¶æ®µçš„ä¼˜åŒ–ï¼ˆç¬¬ 5 éƒ¨åˆ†ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä»€ä¹ˆå¼ºåˆ¶äº†é‡æ’/å›æµ</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">Html</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:84px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Metadata</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">html</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer"># æ–‡æ¡£ç»“æ„</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">å…³é”®æŒ‡æ ‡</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:84px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">First Contentful Paint (FCP) é¦–æ¬¡å†…å®¹ç»˜åˆ¶</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Largest Contentful Paint (LCP) æœ€å¤§å†…å®¹å¡«å……</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Time to First Byte (TTFB) é¦–æ¬¡å­—èŠ‚åŠ è½½æ—¶é—´</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹•</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:112px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 1</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 2</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 3</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 4</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">æ€§èƒ½</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:224px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">1. Welcome to Lean performance</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">2. ä¸€èˆ¬ HTML æ€§èƒ½æ³¨æ„äº‹é¡¹</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-brand"><a class="_link_r3fql_1 " target="" cursor="pointer">ä½¿ç”¨å¯¼èˆªå®šæ—¶å’Œèµ„æºå®šæ—¶è¯„ä¼°ç°åœºçš„è´Ÿè½½æ€§èƒ½</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä¼˜åŒ–é•¿ä»»åŠ¡</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">optimize-resource-loading ä¼˜åŒ–èµ„æºè´Ÿè½½</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">é€šè¿‡æ‘‡æ ‘å‡å°‘ JavaScript æœ‰æ•ˆè´Ÿè½½</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">asdf</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">é€Ÿåº¦ä¸ºä»€ä¹ˆé‡è¦</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">æ€§èƒ½æŠ€å·§</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:476px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Web ä¸Šçš„å¤šè¿›ç¨‹ï¼šæµè§ˆå™¨è¿›ç¨‹æ¨¡å‹</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Browser Rendering Pipeline</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">é€šè¿‡ç«ç„°å›¾æ‰¾åˆ°æœ‰é—®é¢˜çš„ä»£ç </a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">å¦‚ä½•æ”¶é›† Web æ€§èƒ½è·Ÿè¸ª</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">äº‹ä»¶å¾ªç¯åŸºç¡€çŸ¥è¯†</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">æ·±åº¦è®²è§£ç«ç„°å›¾ ğŸ”¥ğŸ”¥</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">é•¿ä»»åŠ¡ï¼šå®ƒä»¬æ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆåº”è¯¥é¿å…å®ƒä»¬</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">performance æŸ¥çœ‹ä¸»çº¿ç¨‹ï¼ˆé¢œè‰²å«ä¹‰ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">æ£€æµ‹æµè§ˆå™¨ä½•æ—¶åœ¨ JavaScript ä¸­ç»˜åˆ¶Frame</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">å¦‚ä½•é˜…è¯» Chromium Profiler</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä½¿ç”¨ Chromium ç½‘ç»œæ ‡ç­¾é¡µè·å–æ€§èƒ½è¯¦æƒ…</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä½¿ç”¨æ€§èƒ½æ—¶åºæ ‡è®°è¿›è¡ŒğŸ“æµ‹é‡</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Chromium F12 æ€§èƒ½åˆ†æå™¨çš„åŸºæœ¬æ¦‚è¿°</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ã€--ç©ºæ–‡ä»¶--ã€‘: performance/tips/resource-size-vs-transfer-size.md</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">å¦‚ä½•é˜…è¯»ç«ç„°å›¾ ğŸ”¥</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">è¯†åˆ« Web åº”ç”¨ä¸­çš„æœªå‹ç¼©èµ„æº</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">asdfadsasdsdfasdf</a></div></div></div></div></section></nav></aside><div flex="~ 1 shrink-0" m="x-auto" class="_content_5cssi_2"><div m="x-auto" flex="~ col" class="max-w-100%"><div relative="~" m="x-auto" p="l-2" class="w-100% md:max-w-712px lg:min-w-640px "><div class="island-doc "><!--$--><h1 id="ä½¿ç”¨å¯¼èˆªå®šæ—¶å’Œèµ„æºå®šæ—¶è¯„ä¼°ç°åœºçš„è´Ÿè½½æ€§èƒ½"><a class="header-anchor" aria-hidden="true" href="#ä½¿ç”¨å¯¼èˆªå®šæ—¶å’Œèµ„æºå®šæ—¶è¯„ä¼°ç°åœºçš„è´Ÿè½½æ€§èƒ½">#</a>ä½¿ç”¨å¯¼èˆªå®šæ—¶å’Œèµ„æºå®šæ—¶è¯„ä¼°ç°åœºçš„è´Ÿè½½æ€§èƒ½</h1>
<p><code>metadata:</code></p>
<p><strong>åŸæ ‡é¢˜:</strong> Assessing loading performance in the field with Navigation Timing and Resource Timing</p>
<p><strong>é“¾æ¥:</strong> <a href="https://web.dev/articles/navigation-and-resource-timing" target="_blank" rel="nofollow">https://web.dev/articles/navigation-and-resource-timing</a></p>
<hr/>
<p>Learn the basics of using the Navigation and Resource Timing APIs to assess loading performance in the field.</p>
<p>äº†è§£ä½¿ç”¨å¯¼èˆªå’Œèµ„æºè®¡æ—¶ API è¯„ä¼°å¤–ä¸šåŠ è½½æ€§èƒ½çš„åŸºç¡€çŸ¥è¯†ã€‚</p>
<p>If you&#x27;ve used connection throttling in the network panel in a browser&#x27;s developer tools (or Lighthouse in Chrome) to assess loading performance, you know how convenient those tools are for performance tuning. You can quickly measure the impact of performance optimizations with a consistent and stable baseline connection speed. The only problem is that this is synthetic testing, which yields lab data, not field data.</p>
<p>å¦‚æœæ‚¨æ›¾åœ¨æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼ˆæˆ– Chrome ä¸­çš„ Lighthouseï¼‰çš„ç½‘ç»œé¢æ¿ä¸­ä½¿ç”¨è¿‡è¿æ¥é™åˆ¶æ¥è¯„ä¼°åŠ è½½æ€§èƒ½ï¼Œæ‚¨å°±ä¼šçŸ¥é“è¿™äº›å·¥å…·åœ¨æ€§èƒ½è°ƒæ•´æ–¹é¢æ˜¯å¤šä¹ˆæ–¹ä¾¿ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä¸€è‡´ä¸”ç¨³å®šçš„åŸºå‡†è¿æ¥é€Ÿåº¦å¿«é€Ÿè¡¡é‡æ€§èƒ½ä¼˜åŒ–çš„å½±å“ã€‚å”¯ä¸€çš„é—®é¢˜æ˜¯ï¼Œè¿™æ˜¯ç»¼åˆæµ‹è¯•ï¼Œå®ƒäº§ç”Ÿçš„æ˜¯å®éªŒå®¤æ•°æ®ï¼Œè€Œä¸æ˜¯ç°åœºæ•°æ®ã€‚</p>
<p>Synthetic testing isn&#x27;t inherently bad, but it&#x27;s not representative of how fast your website is loading for real users. That requires field data, which you can collect from the Navigation Timing and Resource Timing APIs.</p>
<p>ç»¼åˆæµ‹è¯•æœ¬èº«å¹¶ä¸åï¼Œä½†å®ƒå¹¶ä¸èƒ½ä»£è¡¨æ‚¨çš„ç½‘ç«™ä¸ºçœŸå®ç”¨æˆ·åŠ è½½çš„é€Ÿåº¦ã€‚è¿™éœ€è¦å­—æ®µæ•°æ®ï¼Œæ‚¨å¯ä»¥ä» Navigation Timing å’Œ Resource Timing API æ”¶é›†è¿™äº›æ•°æ®ã€‚</p>
<h2 id="apis-to-help-you-assess-loading-performance-in-the-field--å¸®åŠ©æ‚¨è¯„ä¼°ç°åœºè£…è½½æ€§èƒ½çš„-api"><a class="header-anchor" aria-hidden="true" href="#apis-to-help-you-assess-loading-performance-in-the-field--å¸®åŠ©æ‚¨è¯„ä¼°ç°åœºè£…è½½æ€§èƒ½çš„-api">#</a>APIs to help you assess loading performance in the field  (å¸®åŠ©æ‚¨è¯„ä¼°ç°åœºè£…è½½æ€§èƒ½çš„ API)</h2>
<p>Navigation Timing and Resource Timing are two similar APIs with significant overlap that measure two distinct things:</p>
<p>Navigation Timing å’Œ Resource Timing æ˜¯ä¸¤ä¸ªç›¸ä¼¼çš„ APIï¼Œå®ƒä»¬æœ‰å¾ˆå¤§çš„é‡å ï¼Œç”¨äºæµ‹é‡ä¸¤ä¸ªæˆªç„¶ä¸åŒçš„å†…å®¹ï¼š</p>
<ul>
<li>
<p><a href="https://w3c.github.io/navigation-timing/" target="_blank" rel="nofollow">Navigation Timing</a>Â measures the speed of requests for HTML documents (that is, navigation requests).</p>
<p>å¯¼èˆªè®¡æ—¶æµ‹é‡ HTML æ–‡æ¡£è¯·æ±‚ï¼ˆå³å¯¼èˆªè¯·æ±‚ï¼‰çš„é€Ÿåº¦ã€‚</p>
</li>
<li>
<p><a href="https://w3c.github.io/resource-timing/" target="_blank" rel="nofollow">Resource Timing</a>Â measures the speed of requests for document-dependent resources such as CSS, JavaScript, images, and so on.</p>
<p>èµ„æºè®¡æ—¶æµ‹é‡å¯¹æ–‡æ¡£ç›¸å…³èµ„æºï¼ˆå¦‚ CSSã€JavaScriptã€å›¾åƒç­‰ï¼‰çš„è¯·æ±‚é€Ÿåº¦ã€‚</p>
</li>
</ul>
<p>These APIs expose their data in aÂ <em>performance entry buffer</em>, which can be accessed in the browser with JavaScript. There are multiple ways to query a performance buffer, but a common way is by usingÂ <a href="https://developer.mozilla.org/docs/Web/API/Performance/getEntriesByType" target="_blank" rel="nofollow"><code>performance.getEntriesByType</code></a>:</p>
<p>è¿™äº› API åœ¨æ€§èƒ½æ¡ç›®ç¼“å†²åŒºä¸­å…¬å¼€å…¶æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ JavaScript åœ¨æµè§ˆå™¨ä¸­è®¿é—®è¯¥ç¼“å†²åŒºã€‚æœ‰å¤šç§æ–¹æ³•å¯ä»¥æŸ¥è¯¢æ€§èƒ½ç¼“å†²åŒºï¼Œä½†ä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨Â <code>performance.getEntriesByType</code>Â ï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#616E88">// Get Navigation Timing entries:</span></span>
<span class="line"><span style="color:#D8DEE9">performance</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">getEntriesByType</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">navigation</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// Get Resource Timing entries:</span></span>
<span class="line"><span style="color:#D8DEE9">performance</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">getEntriesByType</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">resource</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span></div></div>
<p><code>performance.getEntriesByType</code>Â accepts a string describing the type of entries you want to retrieve from the performance entry buffer.Â <code>&#x27;navigation&#x27;</code>Â andÂ <code>&#x27;resource&#x27;</code>Â retrieve timings for the Navigation Timing and Resource Timing APIs, respectively.</p>
<p><code>performance.getEntriesByType</code>Â æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²æè¿°è¦ä»æ€§èƒ½æ¡ç›®ç¼“å†²åŒºä¸­æ£€ç´¢çš„æ¡ç›®ç±»å‹ã€‚Â <code>&#x27;navigation&#x27;</code>Â å¹¶Â <code>&#x27;resource&#x27;</code>Â åˆ†åˆ«æ£€ç´¢ Navigation Timing å’Œ Resource Timing API çš„è®¡æ—¶ã€‚</p>
<div class="island-directive info"><p class="island-directive-title">INFO</p><div class="island-directive-content"><p><strong>Note:</strong>Â Try loading a website and then enter either of the commands in the above code snippet in your browser&#x27;s console to see actual timings captured by your browser.</p><p>æ³¨æ„ï¼šå°è¯•åŠ è½½ç½‘ç«™ï¼Œç„¶ååœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­è¾“å…¥ä¸Šè¿°ä»£ç ç‰‡æ®µä¸­çš„ä»»ä½•å‘½ä»¤ï¼Œä»¥æŸ¥çœ‹æµè§ˆå™¨æ•è·çš„å®é™…è®¡æ—¶ã€‚</p></div></div>
<p>The amount of information these APIs provide can be overwhelming, but they&#x27;re your key to measuring loading performance in the field, as you can gather these timings from users as they visit your website.</p>
<p>è¿™äº› API æä¾›çš„ä¿¡æ¯é‡å¯èƒ½ä¼šè®©äººä¸çŸ¥æ‰€æªï¼Œä½†å®ƒä»¬æ˜¯è¡¡é‡ç°åœºåŠ è½½æ€§èƒ½çš„å…³é”®ï¼Œå› ä¸ºæ‚¨å¯ä»¥åœ¨ç”¨æˆ·è®¿é—®æ‚¨çš„ç½‘ç«™æ—¶æ”¶é›†è¿™äº›æ—¶é—´ã€‚</p>
<h2 id="the-life-and-timings-of-a-network-request--ç½‘ç»œè¯·æ±‚çš„ç”Ÿå­˜æœŸå’Œè®¡æ—¶"><a class="header-anchor" aria-hidden="true" href="#the-life-and-timings-of-a-network-request--ç½‘ç»œè¯·æ±‚çš„ç”Ÿå­˜æœŸå’Œè®¡æ—¶">#</a>The life and timings of a network request  (ç½‘ç»œè¯·æ±‚çš„ç”Ÿå­˜æœŸå’Œè®¡æ—¶)</h2>
<p>Gathering and analyzing navigation and resource timings is sort of like archeology in that you&#x27;re reconstructing the fleeting life of a network request after the fact. Sometimes it helps to visualize concepts, and where network requests are concerned, your browser&#x27;s developer tools can help.</p>
<p>æ”¶é›†å’Œåˆ†æå¯¼èˆªå’Œèµ„æºæ—¶åºæœ‰ç‚¹åƒè€ƒå¤å­¦ï¼Œå› ä¸ºä½ æ˜¯åœ¨äº‹åé‡å»ºç½‘ç»œè¯·æ±‚çš„çŸ­æš‚ç”Ÿå‘½ã€‚æœ‰æ—¶ï¼Œå®ƒæœ‰åŠ©äºå¯è§†åŒ–æ¦‚å¿µï¼Œè€Œåœ¨æ¶‰åŠç½‘ç»œè¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨çš„å¼€å‘äººå‘˜å·¥å…·å¯ä»¥æä¾›å¸®åŠ©ã€‚</p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231116001628.png" alt="20231116001628"/></p>
<p>The life of a network request has distinct phases, such as DNS lookup, connection establishment, TLS negotiation, and so on. These timings are represented as aÂ <a href="https://developer.mozilla.org/docs/Web/API/DOMHighResTimeStamp" target="_blank" rel="nofollow"><code>DOMHighResTimestamp</code></a>. Depending on your browser, the granularity of timings may be down to the microsecond, or be rounded up to milliseconds. Let&#x27;s examine these phases in detail, and how they relate to Navigation Timing and Resource Timing.</p>
<p>ç½‘ç»œè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸå…·æœ‰ä¸åŒçš„é˜¶æ®µï¼Œä¾‹å¦‚ DNS æŸ¥æ‰¾ã€è¿æ¥å»ºç«‹ã€TLS åå•†ç­‰ã€‚è¿™äº›è®¡æ—¶è¡¨ç¤ºä¸ºÂ <code>DOMHighResTimestamp</code>Â .æ ¹æ®æ‚¨çš„æµè§ˆå™¨ï¼Œè®¡æ—¶ç²’åº¦å¯èƒ½ä½è‡³å¾®ç§’ï¼Œæˆ–å››èˆäº”å…¥åˆ°æ¯«ç§’ã€‚è®©æˆ‘ä»¬è¯¦ç»†ç ”ç©¶ä¸€ä¸‹è¿™äº›é˜¶æ®µï¼Œä»¥åŠå®ƒä»¬ä¸å¯¼èˆªè®¡æ—¶å’Œèµ„æºè®¡æ—¶çš„å…³ç³»ã€‚</p>
<div class="island-directive info"><p class="island-directive-title">INFO</p><div class="island-directive-content"><p><strong>Note:</strong>Â As you read this guide,Â <a href="https://www.w3.org/TR/navigation-timing-2/#processing-model" target="_blank" rel="nofollow">this diagram</a>Â for both Navigation Timing and Resource Timing may help you to visualize the order of the timings they provide.</p><p>æ³¨æ„ï¼šåœ¨é˜…è¯»æœ¬æŒ‡å—æ—¶ï¼Œæ­¤å¯¼èˆªè®¡æ—¶å’Œèµ„æºè®¡æ—¶å›¾å¯å¸®åŠ©æ‚¨ç›´è§‚åœ°äº†è§£å®ƒä»¬æä¾›çš„è®¡æ—¶é¡ºåºã€‚</p></div></div>
<h3 id="dns-lookupdnsæŸ¥è¯¢"><a class="header-anchor" aria-hidden="true" href="#dns-lookupdnsæŸ¥è¯¢">#</a>DNS lookupÂ DNSæŸ¥è¯¢</h3>
<p>When a user goes to a URL, the Domain Name System (DNS) is queried to translate a domain to an IP address. This process may take significant timeâ€”time you&#x27;ll want to measure in the field, even. Navigation Timing and Resource Timing expose two DNS-related timings:</p>
<p>å½“ç”¨æˆ·è½¬åˆ° URL æ—¶ï¼Œå°†æŸ¥è¯¢åŸŸåç³»ç»Ÿ ï¼ˆDNSï¼‰ ä»¥å°†åŸŸè½¬æ¢ä¸º IP åœ°å€ã€‚æ­¤è¿‡ç¨‹å¯èƒ½éœ€è¦å¤§é‡æ—¶é—´ï¼Œç”šè‡³éœ€è¦åœ¨ç°åœºæµ‹é‡ã€‚â€œå¯¼èˆªè®¡æ—¶â€å’Œâ€œèµ„æºè®¡æ—¶â€å…¬å¼€äº†ä¸¤ä¸ªä¸ DNS ç›¸å…³çš„è®¡æ—¶ï¼š</p>
<ul>
<li>
<p><code>domainLookupStart</code>Â is when DNS lookup begins.</p>
<p><code>domainLookupStart</code>Â æ˜¯ DNS æŸ¥æ‰¾å¼€å§‹çš„æ—¶é—´ã€‚</p>
</li>
<li>
<p><code>domainLookupEnd</code>Â is when DNS lookup ends.</p>
<p><code>domainLookupEnd</code>Â æ˜¯ DNS æŸ¥æ‰¾ç»“æŸçš„æ—¶é—´ã€‚</p>
</li>
</ul>
<p>Calculating total DNS lookup time can be done by subtracting the start metric from the end metric:</p>
<p>å¯ä»¥é€šè¿‡ä»ç»“æŸæŒ‡æ ‡ä¸­å‡å»å¼€å§‹æŒ‡æ ‡æ¥è®¡ç®—æ€» DNS æŸ¥æ‰¾æ—¶é—´ï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#616E88">// Measuring DNS lookup time</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">[</span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">]</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">performance</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">getEntriesByType</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">navigation</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">totalLookupTime</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">domainLookupEnd</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">-</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">domainLookupStart</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span></div></div>
<div class="island-directive warning"><p class="island-directive-title">WARNING</p><div class="island-directive-content"><p><strong>Caution:</strong>Â You can&#x27;tÂ <em>always</em>Â rely on timings to be populated. Timings provided in both APIs will have a value ofÂ <code>0</code>Â in some cases. For example, a DNS lookup may be served by a local cache. Additionally, any timings for cross-origin requests may be unavailable if those origins don&#x27;t set aÂ <a href="https://developer.mozilla.org/docs/Web/HTTP/Headers/Timing-Allow-Origin" target="_blank" rel="nofollow"><code>Timing-Allow-Origin</code>Â response header</a>.</p><p>æ³¨æ„ï¼šæ‚¨ä¸èƒ½æ€»æ˜¯ä¾èµ–è¦å¡«å……çš„æ—¶é—´ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ä¸ª API ä¸­æä¾›çš„è®¡æ—¶å€¼Â <code>0</code>Â ä¸º ã€‚ä¾‹å¦‚ï¼ŒDNS æŸ¥æ‰¾å¯èƒ½ç”±æœ¬åœ°ç¼“å­˜æä¾›ã€‚æ­¤å¤–ï¼Œå¦‚æœè·¨æºè¯·æ±‚æœªè®¾ç½®Â <code>Timing-Allow-Origin</code>Â å“åº”æ ‡å¤´ï¼Œåˆ™è¿™äº›è¯·æ±‚çš„ä»»ä½•è®¡æ—¶éƒ½å¯èƒ½ä¸å¯ç”¨ã€‚</p></div></div>
<h3 id="connection-negotiationè¿æ¥åå•†"><a class="header-anchor" aria-hidden="true" href="#connection-negotiationè¿æ¥åå•†">#</a>Connection negotiationÂ è¿æ¥åå•†</h3>
<p>Another contributing factor to loading performance is connection negotiation, which is latency incurred when connecting to a web server. If HTTPS is involved, this process will also include TLS negotiation time. The connection phase consists of three timings:</p>
<p>å½±å“åŠ è½½æ€§èƒ½çš„å¦ä¸€ä¸ªå› ç´ æ˜¯è¿æ¥åå•†ï¼Œè¿™æ˜¯è¿æ¥åˆ° Web æœåŠ¡å™¨æ—¶äº§ç”Ÿçš„å»¶è¿Ÿã€‚å¦‚æœæ¶‰åŠ HTTPSï¼Œåˆ™æ­¤è¿‡ç¨‹è¿˜å°†åŒ…æ‹¬ TLS åå•†æ—¶é—´ã€‚è¿æ¥é˜¶æ®µåŒ…æ‹¬ä¸‰ä¸ªè®¡æ—¶ï¼š</p>
<ul>
<li>
<p><code>connectStart</code>Â is when the browser starts to open a connection to a web server.</p>
<p><code>connectStart</code>Â æ˜¯æµè§ˆå™¨å¼€å§‹æ‰“å¼€ä¸ Web æœåŠ¡å™¨çš„è¿æ¥æ—¶ã€‚</p>
</li>
<li>
<p><code>secureConnectionStart</code>Â marks when the client begins TLS negotiation.</p>
<p><code>secureConnectionStart</code>Â æ ‡è®°å®¢æˆ·ç«¯ä½•æ—¶å¼€å§‹ TLS åå•†ã€‚</p>
</li>
<li>
<p><code>connectEnd</code>Â is when the connection to the web server has been established.</p>
<p><code>connectEnd</code>Â æ˜¯ä¸ Web æœåŠ¡å™¨å»ºç«‹è¿æ¥çš„æ—¶é—´ã€‚</p>
</li>
</ul>
<p>Measuring total connection time is similar to measuring total DNS lookup time: you subtract the start timing from the end timing. However, there&#x27;s an additionalÂ <code>secureConnectionStart</code>Â property that may beÂ <code>0</code>Â if HTTPS isn&#x27;t used orÂ <a href="https://en.wikipedia.org/wiki/HTTP_persistent_connection" target="_blank" rel="nofollow">if the connection is persistent</a>. If you want to measure TLS negotiation time, you&#x27;ll need to keep that in mind:</p>
<p>æµ‹é‡æ€»è¿æ¥æ—¶é—´ä¸æµ‹é‡æ€» DNS æŸ¥æ‰¾æ—¶é—´ç±»ä¼¼ï¼šä»ç»“æŸæ—¶é—´ä¸­å‡å»å¼€å§‹æ—¶é—´ã€‚ä½†æ˜¯ï¼ŒÂ <code>0</code>Â å¦‚æœä¸ä½¿ç”¨ HTTPS æˆ–è¿æ¥æ˜¯æŒä¹…çš„ï¼Œåˆ™å¯èƒ½è¿˜æœ‰ä¸€ä¸ªé™„åŠ Â <code>secureConnectionStart</code>Â å±æ€§ã€‚å¦‚æœè¦æµ‹é‡ TLS åå•†æ—¶é—´ï¼Œéœ€è¦ç‰¢è®°è¿™ä¸€ç‚¹ï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#616E88">// Quantifying total connection time</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">[</span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">]</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">performance</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">getEntriesByType</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">navigation</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">connectionTime</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">connectEnd</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">-</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">connectStart</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#81A1C1">let</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">tlsTime</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">0</span><span style="color:#81A1C1">;</span><span style="color:#D8DEE9FF"> </span><span style="color:#616E88">// &lt;-- Assume 0 to start with</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// Was there TLS negotiation?</span></span>
<span class="line"><span style="color:#81A1C1">if</span><span style="color:#D8DEE9FF"> (</span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">secureConnectionStart</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">&gt;</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">0</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// Awesome! Calculate it!</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">tlsTime</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">connectEnd</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">-</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">secureConnectionStart</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span><span class="line-number">6</span><span class="line-number">7</span><span class="line-number">8</span><span class="line-number">9</span><span class="line-number">10</span></div></div>
<p>Once DNS lookup and connection negotiation ends, timings related to fetching documents and their dependent resources come into play.</p>
<p>ä¸€æ—¦ DNS æŸ¥æ‰¾å’Œè¿æ¥åå•†ç»“æŸï¼Œä¸è·å–æ–‡æ¡£åŠå…¶ä¾èµ–èµ„æºç›¸å…³çš„æ—¶é—´å°±ä¼šå‘æŒ¥ä½œç”¨ã€‚</p>
<h3 id="requests-and-responsesè¯·æ±‚å’Œå“åº”"><a class="header-anchor" aria-hidden="true" href="#requests-and-responsesè¯·æ±‚å’Œå“åº”">#</a>Requests and responsesÂ è¯·æ±‚å’Œå“åº”</h3>
<p>Loading performance is affected by two types of factors:</p>
<p>åŠ è½½æ€§èƒ½å—ä»¥ä¸‹ä¸¤ç§å› ç´ çš„å½±å“ï¼š</p>
<ul>
<li>
<p><strong>Extrinsic factors:</strong>Â These are things like latency and bandwidth. Beyond choosing a hosting company and a CDN, they&#x27;re (mostly) out of our control, as users can access the web from anywhere.</p>
<p>å¤–éƒ¨å› ç´ ï¼šè¿™äº›å› ç´ åŒ…æ‹¬å»¶è¿Ÿå’Œå¸¦å®½ç­‰å› ç´ ã€‚é™¤äº†é€‰æ‹©æ‰˜ç®¡å…¬å¸å’Œ CDN ä¹‹å¤–ï¼Œå®ƒä»¬ï¼ˆå¤§éƒ¨åˆ†ï¼‰è¶…å‡ºäº†æˆ‘ä»¬çš„æ§åˆ¶èŒƒå›´ï¼Œå› ä¸ºç”¨æˆ·å¯ä»¥ä»ä»»ä½•åœ°æ–¹è®¿é—®ç½‘ç»œã€‚</p>
</li>
<li>
<p><strong>Intrinsic factors:</strong>Â These are things like server and client-side architectures, as well as resource size and our ability to optimize for those things, which are within our control.</p>
<p>å†…åœ¨å› ç´ ï¼šè¿™äº›å› ç´ åŒ…æ‹¬æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ¶æ„ï¼Œä»¥åŠèµ„æºå¤§å°å’Œæˆ‘ä»¬é’ˆå¯¹è¿™äº›å› ç´ è¿›è¡Œä¼˜åŒ–çš„èƒ½åŠ›ï¼Œè¿™äº›å› ç´ éƒ½åœ¨æˆ‘ä»¬çš„æ§åˆ¶èŒƒå›´å†…ã€‚</p>
</li>
</ul>
<p>Both types of factors affect loading performance. Timings related to these factors are vital, as they describe how long resources take to download. Both Navigation Timing and Resource Timing describe loading performance with the following metrics:</p>
<p>è¿™ä¸¤ç§ç±»å‹çš„å› ç´ éƒ½ä¼šå½±å“åŠ è½½æ€§èƒ½ã€‚ä¸è¿™äº›å› ç´ ç›¸å…³çš„æ—¶é—´è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒä»¬æè¿°äº†ä¸‹è½½èµ„æºæ‰€éœ€çš„æ—¶é—´ã€‚â€œå¯¼èˆªè®¡æ—¶â€å’Œâ€œèµ„æºè®¡æ—¶â€éƒ½ä½¿ç”¨ä»¥ä¸‹æŒ‡æ ‡æè¿°åŠ è½½æ€§èƒ½ï¼š</p>
<ul>
<li>
<p><code>fetchStart</code>Â marks when the browser begins to fetch a resource (Resource Timing) or a document for a navigation request (Navigation Timing). This precedes the actual request, and is the point at which the browser is checking caches (for example, HTTP andÂ <a href="https://developer.mozilla.org/docs/Web/API/Cache" target="_blank" rel="nofollow"><code>Cache</code>Â instances</a>).</p>
<p><code>fetchStart</code>Â æ ‡è®°æµè§ˆå™¨ä½•æ—¶å¼€å§‹è·å–èµ„æºï¼ˆèµ„æºè®¡æ—¶ï¼‰æˆ–å¯¼èˆªè¯·æ±‚çš„æ–‡æ¡£ï¼ˆå¯¼èˆªè®¡æ—¶ï¼‰ã€‚è¿™å…ˆäºå®é™…è¯·æ±‚ï¼Œå¹¶ä¸”æ˜¯æµè§ˆå™¨æ£€æŸ¥ç¼“å­˜ï¼ˆä¾‹å¦‚ï¼ŒHTTP å’ŒÂ <code>Cache</code>Â å®ä¾‹ï¼‰çš„ç‚¹ã€‚</p>
</li>
<li>
<p><code>workerStart</code>Â marks when a request starts being handled within a service worker&#x27;sÂ <a href="https://developer.mozilla.org/docs/Web/API/FetchEvent" target="_blank" rel="nofollow"><code>fetch</code>Â event handler</a>. This will beÂ <code>0</code>Â when no service worker is controlling the current page.</p>
<p><code>workerStart</code>Â æ ‡è®°ä½•æ—¶å¼€å§‹åœ¨ Service WorkerÂ <code>fetch</code>Â çš„äº‹ä»¶å¤„ç†ç¨‹åºä¸­å¤„ç†è¯·æ±‚ã€‚è¿™å°†æ˜¯å½“æ²¡æœ‰ Service Worker æ§åˆ¶å½“å‰é¡µé¢Â <code>0</code>Â æ—¶ã€‚</p>
</li>
<li>
<p><code>requestStart</code>Â is when the browser makes the request.</p>
<p><code>requestStart</code>Â æ˜¯æµè§ˆå™¨å‘å‡ºè¯·æ±‚çš„æ—¶é—´ã€‚</p>
</li>
<li>
<p><code>responseStart</code>Â is when the first byte of the response arrives.</p>
<p><code>responseStart</code>Â æ˜¯å“åº”çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åˆ°è¾¾çš„æ—¶é—´ã€‚</p>
</li>
<li>
<p><code>responseEnd</code>Â is when the last byte of the response arrives.</p>
<p><code>responseEnd</code>Â æ˜¯å“åº”çš„æœ€åä¸€ä¸ªå­—èŠ‚åˆ°è¾¾çš„æ—¶é—´ã€‚</p>
</li>
</ul>
<p>These timings allow you to measure multiple aspects of loading performance, such as cache lookup within a service workerÂ <em>and</em>Â download time:</p>
<p>è¿™äº›è®¡æ—¶å…è®¸æ‚¨è¡¡é‡åŠ è½½æ€§èƒ½çš„å¤šä¸ªæ–¹é¢ï¼Œä¾‹å¦‚ Service Worker ä¸­çš„ç¼“å­˜æŸ¥æ‰¾å’Œä¸‹è½½æ—¶é—´ï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#616E88">// Cache seek plus response time of the current document</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">[</span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">]</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">performance</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">getEntriesByType</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">navigation</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">fetchTime</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">responseEnd</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">-</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">fetchStart</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// Service worker time plus response time</span></span>
<span class="line"><span style="color:#81A1C1">let</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">workerTime</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">0</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">if</span><span style="color:#D8DEE9FF"> (</span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">workerStart</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">&gt;</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">0</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">workerTime</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">responseEnd</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">-</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">workerStart</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span><span class="line-number">6</span><span class="line-number">7</span><span class="line-number">8</span><span class="line-number">9</span><span class="line-number">10</span></div></div>
<p>You can also measure other aspects of request/response latency:</p>
<p>æ‚¨è¿˜å¯ä»¥æµ‹é‡è¯·æ±‚/å“åº”å»¶è¿Ÿçš„å…¶ä»–æ–¹é¢ï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">[</span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">]</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">performance</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">getEntriesByType</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">navigation</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// Request time only (excluding redirects, DNS, and connection/TLS time)</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">requestTime</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">responseStart</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">-</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">requestStart</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// Response time only (download)</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">responseTime</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">responseEnd</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">-</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">responseStart</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// Request + response time</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">requestResponseTime</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">responseEnd</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">-</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">pageNav</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">requestStart</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span><span class="line-number">6</span><span class="line-number">7</span><span class="line-number">8</span><span class="line-number">9</span><span class="line-number">10</span></div></div>
<h3 id="other-measurements-you-can-make--æ‚¨å¯ä»¥è¿›è¡Œçš„å…¶ä»–æµ‹é‡"><a class="header-anchor" aria-hidden="true" href="#other-measurements-you-can-make--æ‚¨å¯ä»¥è¿›è¡Œçš„å…¶ä»–æµ‹é‡">#</a>Other measurements you can make  (æ‚¨å¯ä»¥è¿›è¡Œçš„å…¶ä»–æµ‹é‡)</h3>
<p>Navigation Timing and Resource Timing is useful for more than what the examples above outline. Here are some other situations with relevant timings that may be worth exploring:</p>
<p>å¯¼èˆªè®¡æ—¶å’Œèµ„æºè®¡æ—¶çš„ç”¨é€”è¿œä¸æ­¢ä¸Šè¿°ç¤ºä¾‹æ‰€æ¦‚è¿°çš„ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…¶ä»–æƒ…å†µï¼Œè¿™äº›æƒ…å†µå¯èƒ½å€¼å¾—æ¢è®¨ï¼š</p>
<ul>
<li>
<p><strong>Page redirects:</strong>Â Redirects are an overlooked source of added latency, especially redirect chains. Latency gets added in a number of ways, such as HTTP-to-HTTPs hops, as well as 302/uncached 301 redirects. TheÂ <code>redirectStart</code>,Â <code>redirectEnd</code>, andÂ <code>redirectCount</code>Â timings are helpful in assessing redirect latency.</p>
<p>é¡µé¢é‡å®šå‘ï¼šé‡å®šå‘æ˜¯å¯¼è‡´å»¶è¿Ÿå¢åŠ çš„ä¸€ä¸ªè¢«å¿½è§†çš„æ¥æºï¼Œå°¤å…¶æ˜¯é‡å®šå‘é“¾ã€‚å»¶è¿Ÿä»¥å¤šç§æ–¹å¼å¢åŠ ï¼Œä¾‹å¦‚ HTTP åˆ° HTTPs è·ƒç‚¹ï¼Œä»¥åŠ 302/æœªç¼“å­˜çš„ 301 é‡å®šå‘ã€‚Â <code>redirectStart</code>Â ã€Â <code>redirectEnd</code>Â å’ŒÂ <code>redirectCount</code>Â è®¡æ—¶æœ‰åŠ©äºè¯„ä¼°é‡å®šå‘å»¶è¿Ÿã€‚</p>
</li>
<li>
<p><strong>Document unloading:</strong>Â In pages that run code in anÂ <a href="https://developer.mozilla.org/docs/Web/Events/unload" target="_blank" rel="nofollow"><code>unload</code>Â event handler</a>, the browser must execute that code before it can navigate to the next page.Â <code>unloadEventStart</code>Â andÂ <code>unloadEventEnd</code>Â measure document unloading.</p>
<p>æ–‡æ¡£å¸è½½ï¼šåœ¨Â <code>unload</code>Â äº‹ä»¶å¤„ç†ç¨‹åºä¸­è¿è¡Œä»£ç çš„é¡µé¢ä¸­ï¼Œæµè§ˆå™¨å¿…é¡»å…ˆæ‰§è¡Œè¯¥ä»£ç ï¼Œç„¶åæ‰èƒ½å¯¼èˆªåˆ°ä¸‹ä¸€é¡µã€‚Â <code>unloadEventStart</code>Â å¹¶Â <code>unloadEventEnd</code>Â æµ‹é‡æ–‡æ¡£å¸è½½ã€‚</p>
</li>
<li>
<p><strong>Document processing:</strong>Â Document processing time may not be consequential unless your website sends very large HTML payloads. If this describes your situation, theÂ <code>domInteractive</code>,Â <code>domContentLoadedEventStart</code>,Â <code>domContentLoadedEventEnd</code>, andÂ <code>domComplete</code>Â timings may be of interest.</p>
<p>æ–‡æ¡£å¤„ç†ï¼šé™¤éæ‚¨çš„ç½‘ç«™å‘é€éå¸¸å¤§çš„ HTML æœ‰æ•ˆè´Ÿè½½ï¼Œå¦åˆ™æ–‡æ¡£å¤„ç†æ—¶é—´å¯èƒ½æ— å…³ç´§è¦ã€‚å¦‚æœè¿™æè¿°äº†æ‚¨çš„æƒ…å†µï¼Œåˆ™ ã€Â <code>domInteractive</code>Â ã€Â <code>domContentLoadedEventStart</code>Â <code>domContentLoadedEventEnd</code>Â å’ŒÂ <code>domComplete</code>Â æ—¶é—´å¯èƒ½ä¼šå¼•èµ·æ‚¨çš„å…´è¶£ã€‚</p>
</li>
</ul>
<div class="island-directive warning"><p class="island-directive-title">WARNING</p><div class="island-directive-content"><p><strong>Warning:</strong>Â Timings related to document unloading and processing are available only in Navigation Timing, as they only apply to navigation requests.</p><p>è­¦å‘Šï¼šä¸æ–‡æ¡£å¸è½½å’Œå¤„ç†ç›¸å…³çš„è®¡æ—¶ä»…åœ¨å¯¼èˆªè®¡æ—¶ä¸­å¯ç”¨ï¼Œå› ä¸ºå®ƒä»¬ä»…é€‚ç”¨äºå¯¼èˆªè¯·æ±‚ã€‚</p></div></div>
<h2 id="acquiring-timings-in-application-code--åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­è·å–æ—¶åº"><a class="header-anchor" aria-hidden="true" href="#acquiring-timings-in-application-code--åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­è·å–æ—¶åº">#</a>Acquiring timings in application code  (åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­è·å–æ—¶åº)</h2>
<p>All of the examples shown so far useÂ <code>performance.getEntriesByType</code>, but there are other ways to query the performance entry buffer, such asÂ <a href="https://developer.mozilla.org/docs/Web/API/Performance/getEntriesByName" target="_blank" rel="nofollow"><code>performance.getEntriesByName</code></a>Â andÂ <a href="https://developer.mozilla.org/docs/Web/API/Performance/getEntries" target="_blank" rel="nofollow"><code>performance.getEntries</code></a>. These methods are fine when only light analysis is needed. In other situations, though, they can introduce excessive main thread work by iterating over a large number of entries, or even repeatedly polling the performance buffer to find new entries.</p>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ˜¾ç¤ºçš„æ‰€æœ‰ç¤ºä¾‹éƒ½ä½¿ç”¨Â <code>performance.getEntriesByType</code>Â ï¼Œä½†è¿˜æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥æŸ¥è¯¢æ€§èƒ½æ¡ç›®ç¼“å†²åŒºï¼Œä¾‹å¦‚Â <code>performance.getEntriesByName</code>Â å’ŒÂ <code>performance.getEntries</code>Â ã€‚å½“åªéœ€è¦å…‰åˆ†ææ—¶ï¼Œè¿™äº›æ–¹æ³•å¾ˆå¥½ã€‚ä½†æ˜¯ï¼Œåœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œå®ƒä»¬å¯èƒ½ä¼šé€šè¿‡è¿­ä»£å¤§é‡æ¡ç›®ï¼Œç”šè‡³é‡å¤è½®è¯¢æ€§èƒ½ç¼“å†²åŒºä»¥æŸ¥æ‰¾æ–°æ¡ç›®æ¥å¼•å…¥è¿‡å¤šçš„ä¸»çº¿ç¨‹å·¥ä½œã€‚</p>
<p>The recommended approach for collecting entries from the performance entry buffer is to use aÂ <a href="https://developer.mozilla.org/docs/Web/API/PerformanceObserver" target="_blank" rel="nofollow"><code>PerformanceObserver</code></a>.Â <code>PerformanceObserver</code>Â listens for performance entries, and provides them as they&#x27;re added to the buffer:</p>
<p>ä»æ€§èƒ½æ¡ç›®ç¼“å†²åŒºæ”¶é›†æ¡ç›®çš„æ¨èæ–¹æ³•æ˜¯ä½¿ç”¨Â <code>PerformanceObserver</code>Â .Â <code>PerformanceObserver</code>Â ä¾¦å¬æ€§èƒ½æ¡ç›®ï¼Œå¹¶åœ¨å°†å®ƒä»¬æ·»åŠ åˆ°ç¼“å†²åŒºæ—¶æä¾›å®ƒä»¬ï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#616E88">// Create the performance observer:</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">perfObserver</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">new</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">PerformanceObserver</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">observedEntries</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=&gt;</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// Get all resource entries collected so far:</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">entries</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">observedEntries</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">getEntries</span><span style="color:#D8DEE9FF">()</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// Iterate over entries:</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">for</span><span style="color:#D8DEE9FF"> (</span><span style="color:#81A1C1">let</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">i</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">0</span><span style="color:#81A1C1">;</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">i</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">&lt;</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">entries</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9FF">length</span><span style="color:#81A1C1">;</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">i</span><span style="color:#81A1C1">++</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">    </span><span style="color:#616E88">// Do the work!</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">}</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// Run the observer for Navigation Timing entries:</span></span>
<span class="line"><span style="color:#D8DEE9">perfObserver</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">observe</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">type</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">navigation</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">buffered</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">true</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// Run the observer for Resource Timing entries:</span></span>
<span class="line"><span style="color:#D8DEE9">perfObserver</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">observe</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">type</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">resource</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">buffered</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">true</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span><span class="line-number">6</span><span class="line-number">7</span><span class="line-number">8</span><span class="line-number">9</span><span class="line-number">10</span><span class="line-number">11</span><span class="line-number">12</span><span class="line-number">13</span><span class="line-number">14</span><span class="line-number">15</span><span class="line-number">16</span><span class="line-number">17</span><span class="line-number">18</span><span class="line-number">19</span><span class="line-number">20</span><span class="line-number">21</span><span class="line-number">22</span></div></div>
<div class="island-directive info"><p class="island-directive-title">INFO</p><div class="island-directive-content"><p><strong>Note:</strong>Â Adding theÂ <code>buffered</code>Â option to a performance observer&#x27;sÂ <code>observe</code>Â event ensures that performance entries added to the buffer prior to the instantiation of the performance observer are observable.</p><p>æ³¨ï¼š å°†é€‰é¡¹Â <code>buffered</code>Â æ·»åŠ åˆ°æ€§èƒ½è§‚å¯Ÿç¨‹åºÂ <code>observe</code>Â çš„äº‹ä»¶å¯ç¡®ä¿åœ¨æ€§èƒ½è§‚å¯Ÿç¨‹åºå®ä¾‹åŒ–ä¹‹å‰æ·»åŠ åˆ°ç¼“å†²åŒºçš„æ€§èƒ½æ¡ç›®æ˜¯å¯è§‚å¯Ÿçš„ã€‚</p></div></div>
<p>This method of collecting timings may feel awkward when compared to directly accessing the performance entry buffer, but it&#x27;s preferable to tying up the main thread with work that doesn&#x27;t serve a critical and user-facing purpose.</p>
<p>ä¸ç›´æ¥è®¿é—®æ€§èƒ½è¾“å…¥ç¼“å†²åŒºç›¸æ¯”ï¼Œè¿™ç§æ”¶é›†è®¡æ—¶çš„æ–¹æ³•å¯èƒ½ä¼šè®©äººæ„Ÿåˆ°å°´å°¬ï¼Œä½†æœ€å¥½ä¸è¦å°†ä¸»çº¿ç¨‹ä¸ä¸ç”¨äºå…³é”®å’Œé¢å‘ç”¨æˆ·çš„å·¥ä½œæ†ç»‘åœ¨ä¸€èµ·ã€‚</p>
<h2 id="phoning-homeç»™å®¶é‡Œæ‰“ç”µè¯"><a class="header-anchor" aria-hidden="true" href="#phoning-homeç»™å®¶é‡Œæ‰“ç”µè¯">#</a>Phoning homeÂ ç»™å®¶é‡Œæ‰“ç”µè¯</h2>
<p>Once you&#x27;ve collected all the timings you need, you can send them to an endpoint for further analysis. Two ways to do this are with eitherÂ <a href="https://developer.mozilla.org/docs/Web/API/Navigator/sendBeacon" target="_blank" rel="nofollow"><code>navigator.sendBeacon</code></a>Â or aÂ <a href="https://developer.mozilla.org/docs/Web/API/fetch" target="_blank" rel="nofollow"><code>fetch</code>Â with theÂ <code>keepalive</code>Â option</a>Â set. Both methods will send a request to a specified endpoint in a non-blocking way, and the request will be queued in a way that outlives the current page session if need be:</p>
<p>æ”¶é›†æ‰€éœ€çš„æ‰€æœ‰è®¡æ—¶åï¼Œå¯ä»¥å°†å®ƒä»¬å‘é€åˆ°ç»ˆç»“ç‚¹è¿›è¡Œè¿›ä¸€æ­¥åˆ†æã€‚æ‰§è¡Œæ­¤æ“ä½œçš„ä¸¤ç§æ–¹æ³•æ˜¯ä½¿ç”¨Â <code>keepalive</code>Â é€‰é¡¹é›†æˆ–Â <code>navigator.sendBeacon</code>Â é€‰é¡¹Â <code>fetch</code>Â é›†ã€‚è¿™ä¸¤ç§æ–¹æ³•éƒ½å°†ä»¥éé˜»å¡æ–¹å¼å‘æŒ‡å®šçš„ç»ˆç»“ç‚¹å‘é€è¯·æ±‚ï¼Œå¦‚æœéœ€è¦ï¼Œè¯·æ±‚å°†ä»¥æ¯”å½“å‰é¡µé¢ä¼šè¯æ›´é•¿çš„æ–¹å¼æ’é˜Ÿï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#616E88">// Caution: If you have lots of performance entries, don&#x27;t</span></span>
<span class="line"><span style="color:#616E88">// do this. This is an example for illustrative purposes.</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">data</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">JSON</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">stringify</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">performance</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">getEntries</span><span style="color:#D8DEE9FF">()))</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// The endpoint to transmit the encoded data to</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">endpoint</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">/analytics</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// Check for fetch keepalive support</span></span>
<span class="line"><span style="color:#81A1C1">if</span><span style="color:#D8DEE9FF"> (</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">keepalive</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">in</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">Request</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9FF">prototype) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">fetch</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">endpoint</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">method</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">POST</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">body</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">data</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">keepalive</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">true</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">headers</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">Content-Type</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">application/json</span><span style="color:#ECEFF4">&#x27;</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">}</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">else</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">if</span><span style="color:#D8DEE9FF"> (</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">sendBeacon</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">in</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">navigator</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// Use sendBeacon as a fallback</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">navigator</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">sendBeacon</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">endpoint</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">data</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span><span class="line-number">6</span><span class="line-number">7</span><span class="line-number">8</span><span class="line-number">9</span><span class="line-number">10</span><span class="line-number">11</span><span class="line-number">12</span><span class="line-number">13</span><span class="line-number">14</span><span class="line-number">15</span><span class="line-number">16</span><span class="line-number">17</span><span class="line-number">18</span><span class="line-number">19</span><span class="line-number">20</span><span class="line-number">21</span></div></div>
<p>In this example, the JSON string will arrive in aÂ <code>POST</code>Â payload that you can decode and process/store in an application backend as needed.</p>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒJSON å­—ç¬¦ä¸²å°†åˆ°è¾¾æœ‰æ•ˆÂ <code>POST</code>Â è´Ÿè½½ä¸­ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦åœ¨åº”ç”¨ç¨‹åºåç«¯ä¸­è§£ç å’Œå¤„ç†/å­˜å‚¨è¯¥æœ‰æ•ˆè´Ÿè½½ã€‚</p>
<h2 id="wrapping-upç»“æŸè¯­"><a class="header-anchor" aria-hidden="true" href="#wrapping-upç»“æŸè¯­">#</a>Wrapping upÂ ç»“æŸè¯­</h2>
<p>Once you have metrics collected, it&#x27;s up to you to figure out how to analyze that field data. When analyzing field data, there are a few general rules to follow to ensure you&#x27;re drawing meaningful conclusions:</p>
<p>æ”¶é›†æŒ‡æ ‡åï¼Œç”±æ‚¨å†³å®šå¦‚ä½•åˆ†æè¯¥å­—æ®µæ•°æ®ã€‚åœ¨åˆ†æå¤–ä¸šæ•°æ®æ—¶ï¼Œéœ€è¦éµå¾ªä¸€äº›ä¸€èˆ¬è§„åˆ™ï¼Œä»¥ç¡®ä¿å¾—å‡ºæœ‰æ„ä¹‰çš„ç»“è®ºï¼š</p>
<ul>
<li>
<p><a href="https://www.igvita.com/2016/01/12/the-average-page-is-a-myth/" target="_blank" rel="nofollow">Avoid averages</a>, as they&#x27;re not representative of any one user&#x27;s experience, and may be skewed by outliers.</p>
<p>é¿å…ä½¿ç”¨å¹³å‡å€¼ï¼Œå› ä¸ºå®ƒä»¬ä¸èƒ½ä»£è¡¨ä»»ä½•ä¸€ä¸ªç”¨æˆ·çš„ä½“éªŒï¼Œå¹¶ä¸”å¯èƒ½ä¼šå› å¼‚å¸¸å€¼è€Œå‡ºç°åå·®ã€‚</p>
</li>
<li>
<p>Rely on percentiles. In datasets of time-based performance metrics, lower is better. This means that when you prioritize low percentiles, you&#x27;re only paying attention to the fastest experiences.</p>
<p>ä¾é ç™¾åˆ†ä½æ•°ã€‚åœ¨åŸºäºæ—¶é—´çš„æ€§èƒ½æŒ‡æ ‡æ•°æ®é›†ä¸­ï¼Œè¶Šä½è¶Šå¥½ã€‚è¿™æ„å‘³ç€ï¼Œå½“æ‚¨ä¼˜å…ˆè€ƒè™‘ä½ç™¾åˆ†ä½æ•°æ—¶ï¼Œæ‚¨åªä¼šå…³æ³¨æœ€å¿«çš„ä½“éªŒã€‚</p>
</li>
<li>
<p><a href="https://timkadlec.com/remembers/2018-06-07-prioritizing-the-long-tail-of-performance/" target="_blank" rel="nofollow">Prioritize the long tail of values</a>. When you prioritize experiences at the 75th percentile or higher, you&#x27;re putting your focus where it belongs: on the slowest experiences.</p>
<p>ä¼˜å…ˆè€ƒè™‘å€¼çš„é•¿å°¾ã€‚å½“æ‚¨å°†ä½“éªŒçš„ä¼˜å…ˆçº§æ’åœ¨ç¬¬ 75 ä¸ªç™¾åˆ†ä½æˆ–æ›´é«˜æ—¶ï¼Œæ‚¨å°±å°†é‡ç‚¹æ”¾åœ¨äº†å®ƒæ‰€å±çš„åœ°æ–¹ï¼šæœ€æ…¢çš„ä½“éªŒä¸Šã€‚</p>
</li>
</ul>
<p>This guide isn&#x27;t meant to be an exhaustive resource on Navigation or Resource Timing, but a starting point. Below are some additional resources you may find helpful:<br/>
<!-- -->æœ¬æŒ‡å—å¹¶ä¸æ˜¯æœ‰å…³å¯¼èˆªæˆ–èµ„æºè®¡æ—¶çš„è¯¦å°½èµ„æºï¼Œè€Œæ˜¯ä¸€ä¸ªèµ·ç‚¹ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½å¯¹æ‚¨æœ‰å¸®åŠ©çš„å…¶ä»–èµ„æºï¼š</p>
<ul>
<li>
<p><a href="https://www.w3.org/TR/navigation-timing-2/" target="_blank" rel="nofollow">Navigation Timing Spec</a>.Â å¯¼èˆªæ—¶åºè§„èŒƒ</p>
</li>
<li>
<p><a href="https://www.w3.org/TR/resource-timing-2/" target="_blank" rel="nofollow">Resource Timing Spec</a>.Â èµ„æºè®¡æ—¶è§„èŒƒ</p>
</li>
<li>
<p><a href="https://nicj.net/resourcetiming-in-practice/" target="_blank" rel="nofollow">ResourceTiming in Practice</a>.</p>
<p>ResourceTiming åœ¨å®è·µä¸­ã€‚</p>
</li>
<li>
<p>[Navigation Timing API (MDN)</p>
<p>å¯¼èˆªè®¡æ—¶ API ï¼ˆMDNï¼‰](<a href="https://developer.mozilla.org/docs/Web/API/Navigation_timing_API" target="_blank" rel="nofollow">https://developer.mozilla.org/docs/Web/API/Navigation_timing_API</a>)</p>
</li>
<li>
<p>[Resource Timing API (MDN)</p>
<p>èµ„æºè®¡æ—¶ API ï¼ˆMDNï¼‰](<a href="https://developer.mozilla.org/docs/Web/API/Resource_Timing_API" target="_blank" rel="nofollow">https://developer.mozilla.org/docs/Web/API/Resource_Timing_API</a>)</p>
</li>
</ul>
<p>With these APIs and the data they provide, you&#x27;ll be better equipped to understand how loading performance is experienced by real users, which will give you more confidence in diagnosing and addressing loading performance problems in the field.</p>
<p>å€ŸåŠ©è¿™äº› API åŠå…¶æä¾›çš„æ•°æ®ï¼Œæ‚¨å°†èƒ½å¤Ÿæ›´å¥½åœ°äº†è§£çœŸå®ç”¨æˆ·å¯¹åŠ è½½æ€§èƒ½çš„ä½“éªŒï¼Œè¿™å°†ä½¿æ‚¨åœ¨ç°åœºè¯Šæ–­å’Œè§£å†³åŠ è½½æ€§èƒ½é—®é¢˜æ—¶æ›´æœ‰ä¿¡å¿ƒã€‚</p><!--/$--></div><footer mt="8"><div class="xs:flex" p="b-5" justify="between" items-center="~"><div flex="" text="sm text-2" leading-6="~" leading-8="sm:~" font-medium=""><p>Last Updated: </p><span>2023/11/16 20:32:02</span></div></div><div flex="~ col sm:row" justify="sm:around" gap="2" divider-top="" pt="6"><div flex="~ col" class="_prev_1f77m_13"><a href="/chrome/performance/2-general-html-performance" class="_pager-link_1f77m_20"><span class="_desc_1f77m_43">Previous Page</span><span class="_title_1f77m_34">2. ä¸€èˆ¬ HTML æ€§èƒ½æ³¨æ„äº‹é¡¹</span></a></div><div flex="~ col" class="_next_1f77m_16"><a href="/chrome/performance/optimize-long-tasks" class="_pager-link_1f77m_20 _next_1f77m_16"><span class="_desc_1f77m_43">Next page</span><span class="_title_1f77m_34">ä¼˜åŒ–é•¿ä»»åŠ¡</span></a></div></div></footer></div></div><div relative="~" display="none lg:block" order="2" flex="1" p="l-8" class="max-w-256px"><div class="_aside-container_5cssi_32"><div flex="~ col" p="b-8" style="min-height:calc(100vh - (var(--island-nav-height-desktop) + 32px))"><div><div flex="~ col 1"><div display="lg:block"><div relative="" divider-left="" p="l-4" text="13px" font-medium="" id="aside-container"><div absolute="" pos="top-33px" opacity="0" w="1px" h="18px" bg="brand" style="left:-1px;transition:top 0.25s cubic-bezier(0, 1, 0.5, 1), background-color 0.5s, opacity 0.25s" id="aside-marker"></div><div block="~" leading-7="" text="13px" font="semibold">ç›®å½•</div><nav><ul relative=""><li><a href="#apis-to-help-you-assess-loading-performance-in-the-field--å¸®åŠ©æ‚¨è¯„ä¼°ç°åœºè£…è½½æ€§èƒ½çš„-api" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">APIs to help you assess loading performance in the field  (å¸®åŠ©æ‚¨è¯„ä¼°ç°åœºè£…è½½æ€§èƒ½çš„ API)</a></li><li><a href="#the-life-and-timings-of-a-network-request--ç½‘ç»œè¯·æ±‚çš„ç”Ÿå­˜æœŸå’Œè®¡æ—¶" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">The life and timings of a network request  (ç½‘ç»œè¯·æ±‚çš„ç”Ÿå­˜æœŸå’Œè®¡æ—¶)</a></li><li><a href="#dns-lookupdnsæŸ¥è¯¢" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:12px">DNS lookupÂ DNSæŸ¥è¯¢</a></li><li><a href="#connection-negotiationè¿æ¥åå•†" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:12px">Connection negotiationÂ è¿æ¥åå•†</a></li><li><a href="#requests-and-responsesè¯·æ±‚å’Œå“åº”" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:12px">Requests and responsesÂ è¯·æ±‚å’Œå“åº”</a></li><li><a href="#other-measurements-you-can-make--æ‚¨å¯ä»¥è¿›è¡Œçš„å…¶ä»–æµ‹é‡" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:12px">Other measurements you can make  (æ‚¨å¯ä»¥è¿›è¡Œçš„å…¶ä»–æµ‹é‡)</a></li><li><a href="#acquiring-timings-in-application-code--åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­è·å–æ—¶åº" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">Acquiring timings in application code  (åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­è·å–æ—¶åº)</a></li><li><a href="#phoning-homeç»™å®¶é‡Œæ‰“ç”µè¯" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">Phoning homeÂ ç»™å®¶é‡Œæ‰“ç”µè¯</a></li><li><a href="#wrapping-upç»“æŸè¯­" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">Wrapping upÂ ç»“æŸè¯­</a></li></ul></nav></div></div></div></div></div></div></div></div></div></section></div></div>
      <script>window.ISLAND_PAGE_DATA={"siteData":{"lang":"en-US","title":"bekaçš„åšå®¢","description":"Island","themeConfig":{"lastUpdatedText":"ä¸Šæ¬¡æ›´æ–°","outlineTitle":"ç›®å½•","nav":[{"text":"Article","link":"/article/astro","activeMatch":"/article/"},{"text":"Article-set","link":"/article-set/URL-SET","activeMatch":"/article-set/"},{"text":"Chrome","link":"/chrome/fast-load-time/user-centric-performance-metrics","activeMatch":"/chrome/"},{"text":"Design-pattern","link":"/design-pattern/indexs","activeMatch":"/design-pattern/"},{"text":"Open-source","link":"/open-source/delay","activeMatch":"/open-source/"},{"text":"Promise","link":"/promise/first-resolved","activeMatch":"/promise/"},{"text":"Typescript","link":"/typescript/tip","activeMatch":"/typescript/"},{"text":"Webpack","link":"/webpack/build-result","activeMatch":"/webpack/"}],"sidebar":{"article":[{"text":"Article","items":[{"text":"Astro","link":"/article/astro"},{"text":"æ–°ä¸€ä»£å…¨æ ˆæ¡†æ¶ Fresh","link":"/article/fresh"}],"collapsable":true}],"article-set":[{"text":"Article-set","items":[{"text":"å¤–é“¾åˆé›†","link":"/article-set/URL-SET"},{"text":"requestAnimationFrame","link":"/article-set/raf"}],"collapsable":true}],"chrome":[{"text":"Chrome","items":[{"text":"ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ•ˆæœæŒ‡æ ‡","link":"/chrome/fast-load-time/user-centric-performance-metrics"}],"collapsable":true},{"text":"æµè§ˆå™¨å·¥ä½œåŸç†","items":[{"text":"Web æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” é«˜çº§ä½“ç³»ç»“æ„ï¼ˆç¬¬ 1 éƒ¨åˆ†ï¼‰","link":"/chrome/how-web-browser-works/part-1_high-level-architecture"},{"text":"Web æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” å¯¼èˆªé˜¶æ®µï¼ˆç¬¬ 2 éƒ¨åˆ†ï¼‰","link":"/chrome/how-web-browser-works/part-2_navigation-phase"},{"text":"æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” æ¸²æŸ“é˜¶æ®µï¼ˆç¬¬ 3 éƒ¨åˆ†ï¼‰","link":"/chrome/how-web-browser-works/part-3_rendering-phase"},{"text":"æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” åŠ è½½é˜¶æ®µçš„ä¼˜åŒ–ï¼ˆç¬¬ 4 éƒ¨åˆ†ï¼‰","link":"/chrome/how-web-browser-works/part-4_optimization-in-the-loading-stage"},{"text":"æµè§ˆå™¨å¦‚ä½•ä¸€æ­¥ä¸€æ­¥åœ°å·¥ä½œ â€” äº¤äº’é˜¶æ®µçš„ä¼˜åŒ–ï¼ˆç¬¬ 5 éƒ¨åˆ†ï¼‰","link":"/chrome/how-web-browser-works/part-5_optimization-in-the-interaction-stage"},{"text":"ä»€ä¹ˆå¼ºåˆ¶äº†é‡æ’/å›æµ","link":"/chrome/how-web-browser-works/what-forces-layout-reflow"}],"collapsable":true},{"text":"Html","items":[{"text":"Metadata","link":"/chrome/html/metadata"},{"text":"html","link":"/chrome/html/overview"},{"text":"# æ–‡æ¡£ç»“æ„","link":"/chrome/html/structure"}],"collapsable":true},{"text":"å…³é”®æŒ‡æ ‡","items":[{"text":"First Contentful Paint (FCP) é¦–æ¬¡å†…å®¹ç»˜åˆ¶","link":"/chrome/metrics/FCP"},{"text":"Largest Contentful Paint (LCP) æœ€å¤§å†…å®¹å¡«å……","link":"/chrome/metrics/LCP"},{"text":"Time to First Byte (TTFB) é¦–æ¬¡å­—èŠ‚åŠ è½½æ—¶é—´","link":"/chrome/metrics/TTFB"}],"collapsable":true},{"text":"ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹•","items":[{"text":"ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 1","link":"/chrome/modern-web-browser/inside-browser-part-1"},{"text":"ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 2","link":"/chrome/modern-web-browser/inside-browser-part-2"},{"text":"ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 3","link":"/chrome/modern-web-browser/inside-browser-part-3"},{"text":"ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 4","link":"/chrome/modern-web-browser/inside-browser-part-4"}],"collapsable":true},{"text":"æ€§èƒ½","items":[{"text":"1. Welcome to Lean performance","link":"/chrome/performance/1-welcome"},{"text":"2. ä¸€èˆ¬ HTML æ€§èƒ½æ³¨æ„äº‹é¡¹","link":"/chrome/performance/2-general-html-performance"},{"text":"ä½¿ç”¨å¯¼èˆªå®šæ—¶å’Œèµ„æºå®šæ—¶è¯„ä¼°ç°åœºçš„è´Ÿè½½æ€§èƒ½","link":"/chrome/performance/navigation-and-resource-timing"},{"text":"ä¼˜åŒ–é•¿ä»»åŠ¡","link":"/chrome/performance/optimize-long-tasks"},{"text":"optimize-resource-loading ä¼˜åŒ–èµ„æºè´Ÿè½½","link":"/chrome/performance/optimize-resource-loading"},{"text":"é€šè¿‡æ‘‡æ ‘å‡å°‘ JavaScript æœ‰æ•ˆè´Ÿè½½","link":"/chrome/performance/reduce-javascript-payloads-with-tree-shaking"},{"text":"asdf","link":"/chrome/performance/welcome-copy"},{"text":"é€Ÿåº¦ä¸ºä»€ä¹ˆé‡è¦","link":"/chrome/performance/why-speed-matters"}],"collapsable":true},{"text":"æ€§èƒ½æŠ€å·§","items":[{"text":"Web ä¸Šçš„å¤šè¿›ç¨‹ï¼šæµè§ˆå™¨è¿›ç¨‹æ¨¡å‹","link":"/chrome/performance/tips/browser-process-model"},{"text":"Browser Rendering Pipeline","link":"/chrome/performance/tips/browser-rendering-pipeline"},{"text":"é€šè¿‡ç«ç„°å›¾æ‰¾åˆ°æœ‰é—®é¢˜çš„ä»£ç ","link":"/chrome/performance/tips/codepath-scoping"},{"text":"å¦‚ä½•æ”¶é›† Web æ€§èƒ½è·Ÿè¸ª","link":"/chrome/performance/tips/collect-a-trace"},{"text":"äº‹ä»¶å¾ªç¯åŸºç¡€çŸ¥è¯†","link":"/chrome/performance/tips/event-loop"},{"text":"æ·±åº¦è®²è§£ç«ç„°å›¾ ğŸ”¥ğŸ”¥","link":"/chrome/performance/tips/flamegraphs-in-depth"},{"text":"é•¿ä»»åŠ¡ï¼šå®ƒä»¬æ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆåº”è¯¥é¿å…å®ƒä»¬","link":"/chrome/performance/tips/long-tasks"},{"text":"performance æŸ¥çœ‹ä¸»çº¿ç¨‹ï¼ˆé¢œè‰²å«ä¹‰ï¼‰","link":"/chrome/performance/tips/main-profiler-pane"},{"text":"æ£€æµ‹æµè§ˆå™¨ä½•æ—¶åœ¨ JavaScript ä¸­ç»˜åˆ¶Frame","link":"/chrome/performance/tips/measuring-paint-time"},{"text":"å¦‚ä½•é˜…è¯» Chromium Profiler","link":"/chrome/performance/tips/network-profiler-pane"},{"text":"ä½¿ç”¨ Chromium ç½‘ç»œæ ‡ç­¾é¡µè·å–æ€§èƒ½è¯¦æƒ…","link":"/chrome/performance/tips/network-tab"},{"text":"ä½¿ç”¨æ€§èƒ½æ—¶åºæ ‡è®°è¿›è¡ŒğŸ“æµ‹é‡","link":"/chrome/performance/tips/performance-timing-markers"},{"text":"Chromium F12 æ€§èƒ½åˆ†æå™¨çš„åŸºæœ¬æ¦‚è¿°","link":"/chrome/performance/tips/profiler-basic-ui"},{"text":"ã€--ç©ºæ–‡ä»¶--ã€‘: performance/tips/resource-size-vs-transfer-size.md","link":"/chrome/performance/tips/resource-size-vs-transfer-size"},{"text":"å¦‚ä½•é˜…è¯»ç«ç„°å›¾ ğŸ”¥","link":"/chrome/performance/tips/understanding-flamegraphs"},{"text":"è¯†åˆ« Web åº”ç”¨ä¸­çš„æœªå‹ç¼©èµ„æº","link":"/chrome/performance/tips/validating-compression"},{"text":"asdfadsasdsdfasdf","link":"/chrome/performance/tips/aa/a"}],"collapsable":true}],"design-pattern":[{"text":"Design-pattern","items":[{"text":"# èµ„æºåˆ—è¡¨","link":"/design-pattern/indexs"},{"text":"ä»£ç†æ¨¡å¼","link":"/design-pattern/proxy-pattern"},{"text":"Singleton Pattern","link":"/design-pattern/singleton-pattern"},{"text":"çŠ¶æ€æ¨¡å¼","link":"/design-pattern/state-pattern"},{"text":"ç­–ç•¥æ¨¡å¼","link":"/design-pattern/strategy-pattern"}],"collapsable":true}],"open-source":[{"text":"Open-source","items":[{"text":"delay","link":"/open-source/delay"},{"text":"dot-prop","link":"/open-source/dot-prop"},{"text":"glob-to-regexp","link":"/open-source/glob-to-regexp"},{"text":"koa æ´‹è‘±æ¨¡å‹","link":"/open-source/koa-compose"},{"text":"quick-lru","link":"/open-source/lru-cache"},{"text":"p-defer","link":"/open-source/p-defer"},{"text":"p-lazy","link":"/open-source/p-lazy"},{"text":"p-limit","link":"/open-source/p-limit"},{"text":"p-locate","link":"/open-source/p-locate"},{"text":"p-settle","link":"/open-source/p-settle"},{"text":"yocto-queue","link":"/open-source/yocto-queue"}],"collapsable":true}],"promise":[{"text":"Promise","items":[{"text":"é¡ºåºæ‰§è¡Œä»»åŠ¡ç›´åˆ°ç¬¬ä¸€ä¸ªresolvedã€‚","link":"/promise/first-resolved"},{"text":"reduceå®ç°å¤šä¸ªpromiseé¡ºåºæ‰§è¡Œ.","link":"/promise/sequential-execution"}],"collapsable":true}],"typescript":[{"text":"Typescript","items":[{"text":"Typescript æŠ€å·§","link":"/typescript/tip"}],"collapsable":true}],"webpack":[{"text":"Webpack","items":[{"text":"webpack æ‰“åŒ…ä»£ç åˆ†æ","link":"/webpack/build-result"},{"text":"mini-webpack","link":"/webpack/mini-webpack"},{"text":"minipack-explain","link":"/webpack/minipack"},{"text":"tapable","link":"/webpack/tapable"}],"collapsable":true}]},"footer":{"message":"Released under the MIT License.","copyright":"Copyright Â© 2022-present Beka"}},"head":[["script",{"id":"check-dark-light"},"\n        ;(() => {\n          const saved = localStorage.getItem('island-theme-appearance')\n          const prefereDark = window.matchMedia('(prefers-color-scheme: dark)').matches\n          if (!saved || saved === 'auto' ? prefereDark : saved === 'dark') {\n            document.documentElement.classList.add('dark')\n          }\n        })()\n      "]],"base":"","icon":"","root":"/Users/beka/Desktop/code/bekacodechn.github.io/blog","appearance":true},"pagePath":"/Users/beka/Desktop/code/bekacodechn.github.io/blog/chrome/performance/navigation-and-resource-timing.md","relativePagePath":"chrome/performance/navigation-and-resource-timing.md","toc":[{"id":"apis-to-help-you-assess-loading-performance-in-the-field--å¸®åŠ©æ‚¨è¯„ä¼°ç°åœºè£…è½½æ€§èƒ½çš„-api","text":"APIs to help you assess loading performance in the field  (å¸®åŠ©æ‚¨è¯„ä¼°ç°åœºè£…è½½æ€§èƒ½çš„ API)","depth":2},{"id":"the-life-and-timings-of-a-network-request--ç½‘ç»œè¯·æ±‚çš„ç”Ÿå­˜æœŸå’Œè®¡æ—¶","text":"The life and timings of a network request  (ç½‘ç»œè¯·æ±‚çš„ç”Ÿå­˜æœŸå’Œè®¡æ—¶)","depth":2},{"id":"dns-lookupdnsæŸ¥è¯¢","text":"DNS lookupÂ DNSæŸ¥è¯¢","depth":3},{"id":"connection-negotiationè¿æ¥åå•†","text":"Connection negotiationÂ è¿æ¥åå•†","depth":3},{"id":"requests-and-responsesè¯·æ±‚å’Œå“åº”","text":"Requests and responsesÂ è¯·æ±‚å’Œå“åº”","depth":3},{"id":"other-measurements-you-can-make--æ‚¨å¯ä»¥è¿›è¡Œçš„å…¶ä»–æµ‹é‡","text":"Other measurements you can make  (æ‚¨å¯ä»¥è¿›è¡Œçš„å…¶ä»–æµ‹é‡)","depth":3},{"id":"acquiring-timings-in-application-code--åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­è·å–æ—¶åº","text":"Acquiring timings in application code  (åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­è·å–æ—¶åº)","depth":2},{"id":"phoning-homeç»™å®¶é‡Œæ‰“ç”µè¯","text":"Phoning homeÂ ç»™å®¶é‡Œæ‰“ç”µè¯","depth":2},{"id":"wrapping-upç»“æŸè¯­","text":"Wrapping upÂ ç»“æŸè¯­","depth":2}],"title":"ä½¿ç”¨å¯¼èˆªå®šæ—¶å’Œèµ„æºå®šæ—¶è¯„ä¼°ç°åœºçš„è´Ÿè½½æ€§èƒ½","lastUpdatedTime":"2023/11/16 20:32:02","content":"# ä½¿ç”¨å¯¼èˆªå®šæ—¶å’Œèµ„æºå®šæ—¶è¯„ä¼°ç°åœºçš„è´Ÿè½½æ€§èƒ½\n\n`metadata:`\n\n**åŸæ ‡é¢˜:** Assessing loading performance in the field with Navigation Timing and Resource Timing\n\n**é“¾æ¥:** https://web.dev/articles/navigation-and-resource-timing\n\n---\n\nLearn the basics of using the Navigation and Resource Timing APIs to assess loading performance in the field.\n\näº†è§£ä½¿ç”¨å¯¼èˆªå’Œèµ„æºè®¡æ—¶ API è¯„ä¼°å¤–ä¸šåŠ è½½æ€§èƒ½çš„åŸºç¡€çŸ¥è¯†ã€‚\n\nIf you've used connection throttling in the network panel in a browser's developer tools (or Lighthouse in Chrome) to assess loading performance, you know how convenient those tools are for performance tuning. You can quickly measure the impact of performance optimizations with a consistent and stable baseline connection speed. The only problem is that this is synthetic testing, which yields lab data, not field data.\n\nå¦‚æœæ‚¨æ›¾åœ¨æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼ˆæˆ– Chrome ä¸­çš„ Lighthouseï¼‰çš„ç½‘ç»œé¢æ¿ä¸­ä½¿ç”¨è¿‡è¿æ¥é™åˆ¶æ¥è¯„ä¼°åŠ è½½æ€§èƒ½ï¼Œæ‚¨å°±ä¼šçŸ¥é“è¿™äº›å·¥å…·åœ¨æ€§èƒ½è°ƒæ•´æ–¹é¢æ˜¯å¤šä¹ˆæ–¹ä¾¿ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä¸€è‡´ä¸”ç¨³å®šçš„åŸºå‡†è¿æ¥é€Ÿåº¦å¿«é€Ÿè¡¡é‡æ€§èƒ½ä¼˜åŒ–çš„å½±å“ã€‚å”¯ä¸€çš„é—®é¢˜æ˜¯ï¼Œè¿™æ˜¯ç»¼åˆæµ‹è¯•ï¼Œå®ƒäº§ç”Ÿçš„æ˜¯å®éªŒå®¤æ•°æ®ï¼Œè€Œä¸æ˜¯ç°åœºæ•°æ®ã€‚\n\nSynthetic testing isn't inherently bad, but it's not representative of how fast your website is loading for real users. That requires field data, which you can collect from the Navigation Timing and Resource Timing APIs.\n\nç»¼åˆæµ‹è¯•æœ¬èº«å¹¶ä¸åï¼Œä½†å®ƒå¹¶ä¸èƒ½ä»£è¡¨æ‚¨çš„ç½‘ç«™ä¸ºçœŸå®ç”¨æˆ·åŠ è½½çš„é€Ÿåº¦ã€‚è¿™éœ€è¦å­—æ®µæ•°æ®ï¼Œæ‚¨å¯ä»¥ä» Navigation Timing å’Œ Resource Timing API æ”¶é›†è¿™äº›æ•°æ®ã€‚\n\n## APIs to help you assess loading performance in the field  (å¸®åŠ©æ‚¨è¯„ä¼°ç°åœºè£…è½½æ€§èƒ½çš„ API)\n\nNavigation Timing and Resource Timing are two similar APIs with significant overlap that measure two distinct things:  \n\nNavigation Timing å’Œ Resource Timing æ˜¯ä¸¤ä¸ªç›¸ä¼¼çš„ APIï¼Œå®ƒä»¬æœ‰å¾ˆå¤§çš„é‡å ï¼Œç”¨äºæµ‹é‡ä¸¤ä¸ªæˆªç„¶ä¸åŒçš„å†…å®¹ï¼š\n\n*   [Navigation Timing](https://w3c.github.io/navigation-timing/)Â measures the speed of requests for HTML documents (that is, navigation requests).  \n\n    å¯¼èˆªè®¡æ—¶æµ‹é‡ HTML æ–‡æ¡£è¯·æ±‚ï¼ˆå³å¯¼èˆªè¯·æ±‚ï¼‰çš„é€Ÿåº¦ã€‚\n*   [Resource Timing](https://w3c.github.io/resource-timing/)Â measures the speed of requests for document-dependent resources such as CSS, JavaScript, images, and so on.  \n\n    èµ„æºè®¡æ—¶æµ‹é‡å¯¹æ–‡æ¡£ç›¸å…³èµ„æºï¼ˆå¦‚ CSSã€JavaScriptã€å›¾åƒç­‰ï¼‰çš„è¯·æ±‚é€Ÿåº¦ã€‚\n\nThese APIs expose their data in aÂ _performance entry buffer_, which can be accessed in the browser with JavaScript. There are multiple ways to query a performance buffer, but a common way is by usingÂ [`performance.getEntriesByType`](https://developer.mozilla.org/docs/Web/API/Performance/getEntriesByType):  \n\nè¿™äº› API åœ¨æ€§èƒ½æ¡ç›®ç¼“å†²åŒºä¸­å…¬å¼€å…¶æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ JavaScript åœ¨æµè§ˆå™¨ä¸­è®¿é—®è¯¥ç¼“å†²åŒºã€‚æœ‰å¤šç§æ–¹æ³•å¯ä»¥æŸ¥è¯¢æ€§èƒ½ç¼“å†²åŒºï¼Œä½†ä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨Â `performance.getEntriesByType`Â ï¼š\n\n```js\n// Get Navigation Timing entries:\nperformance.getEntriesByType('navigation');\n\n// Get Resource Timing entries:\nperformance.getEntriesByType('resource');\n```\n\n`performance.getEntriesByType`Â accepts a string describing the type of entries you want to retrieve from the performance entry buffer.Â `'navigation'`Â andÂ `'resource'`Â retrieve timings for the Navigation Timing and Resource Timing APIs, respectively.  \n\n`performance.getEntriesByType`Â æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²æè¿°è¦ä»æ€§èƒ½æ¡ç›®ç¼“å†²åŒºä¸­æ£€ç´¢çš„æ¡ç›®ç±»å‹ã€‚Â `'navigation'`Â å¹¶Â `'resource'`Â åˆ†åˆ«æ£€ç´¢ Navigation Timing å’Œ Resource Timing API çš„è®¡æ—¶ã€‚\n\n:::info\n**Note:**Â Try loading a website and then enter either of the commands in the above code snippet in your browser's console to see actual timings captured by your browser.  \n\næ³¨æ„ï¼šå°è¯•åŠ è½½ç½‘ç«™ï¼Œç„¶ååœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­è¾“å…¥ä¸Šè¿°ä»£ç ç‰‡æ®µä¸­çš„ä»»ä½•å‘½ä»¤ï¼Œä»¥æŸ¥çœ‹æµè§ˆå™¨æ•è·çš„å®é™…è®¡æ—¶ã€‚\n:::\n\nThe amount of information these APIs provide can be overwhelming, but they're your key to measuring loading performance in the field, as you can gather these timings from users as they visit your website.  \n\nè¿™äº› API æä¾›çš„ä¿¡æ¯é‡å¯èƒ½ä¼šè®©äººä¸çŸ¥æ‰€æªï¼Œä½†å®ƒä»¬æ˜¯è¡¡é‡ç°åœºåŠ è½½æ€§èƒ½çš„å…³é”®ï¼Œå› ä¸ºæ‚¨å¯ä»¥åœ¨ç”¨æˆ·è®¿é—®æ‚¨çš„ç½‘ç«™æ—¶æ”¶é›†è¿™äº›æ—¶é—´ã€‚\n\n## The life and timings of a network request  (ç½‘ç»œè¯·æ±‚çš„ç”Ÿå­˜æœŸå’Œè®¡æ—¶)\n\nGathering and analyzing navigation and resource timings is sort of like archeology in that you're reconstructing the fleeting life of a network request after the fact. Sometimes it helps to visualize concepts, and where network requests are concerned, your browser's developer tools can help.  \n\næ”¶é›†å’Œåˆ†æå¯¼èˆªå’Œèµ„æºæ—¶åºæœ‰ç‚¹åƒè€ƒå¤å­¦ï¼Œå› ä¸ºä½ æ˜¯åœ¨äº‹åé‡å»ºç½‘ç»œè¯·æ±‚çš„çŸ­æš‚ç”Ÿå‘½ã€‚æœ‰æ—¶ï¼Œå®ƒæœ‰åŠ©äºå¯è§†åŒ–æ¦‚å¿µï¼Œè€Œåœ¨æ¶‰åŠç½‘ç»œè¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨çš„å¼€å‘äººå‘˜å·¥å…·å¯ä»¥æä¾›å¸®åŠ©ã€‚\n\n![20231116001628](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231116001628.png)\n\nThe life of a network request has distinct phases, such as DNS lookup, connection establishment, TLS negotiation, and so on. These timings are represented as aÂ [`DOMHighResTimestamp`](https://developer.mozilla.org/docs/Web/API/DOMHighResTimeStamp). Depending on your browser, the granularity of timings may be down to the microsecond, or be rounded up to milliseconds. Let's examine these phases in detail, and how they relate to Navigation Timing and Resource Timing.  \n\nç½‘ç»œè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸå…·æœ‰ä¸åŒçš„é˜¶æ®µï¼Œä¾‹å¦‚ DNS æŸ¥æ‰¾ã€è¿æ¥å»ºç«‹ã€TLS åå•†ç­‰ã€‚è¿™äº›è®¡æ—¶è¡¨ç¤ºä¸ºÂ `DOMHighResTimestamp`Â .æ ¹æ®æ‚¨çš„æµè§ˆå™¨ï¼Œè®¡æ—¶ç²’åº¦å¯èƒ½ä½è‡³å¾®ç§’ï¼Œæˆ–å››èˆäº”å…¥åˆ°æ¯«ç§’ã€‚è®©æˆ‘ä»¬è¯¦ç»†ç ”ç©¶ä¸€ä¸‹è¿™äº›é˜¶æ®µï¼Œä»¥åŠå®ƒä»¬ä¸å¯¼èˆªè®¡æ—¶å’Œèµ„æºè®¡æ—¶çš„å…³ç³»ã€‚\n\n:::info\n**Note:**Â As you read this guide,Â [this diagram](https://www.w3.org/TR/navigation-timing-2/#processing-model)Â for both Navigation Timing and Resource Timing may help you to visualize the order of the timings they provide.  \n\næ³¨æ„ï¼šåœ¨é˜…è¯»æœ¬æŒ‡å—æ—¶ï¼Œæ­¤å¯¼èˆªè®¡æ—¶å’Œèµ„æºè®¡æ—¶å›¾å¯å¸®åŠ©æ‚¨ç›´è§‚åœ°äº†è§£å®ƒä»¬æä¾›çš„è®¡æ—¶é¡ºåºã€‚\n:::\n\n### DNS lookupÂ DNSæŸ¥è¯¢\n\nWhen a user goes to a URL, the Domain Name System (DNS) is queried to translate a domain to an IP address. This process may take significant timeâ€”time you'll want to measure in the field, even. Navigation Timing and Resource Timing expose two DNS-related timings:  \n\nå½“ç”¨æˆ·è½¬åˆ° URL æ—¶ï¼Œå°†æŸ¥è¯¢åŸŸåç³»ç»Ÿ ï¼ˆDNSï¼‰ ä»¥å°†åŸŸè½¬æ¢ä¸º IP åœ°å€ã€‚æ­¤è¿‡ç¨‹å¯èƒ½éœ€è¦å¤§é‡æ—¶é—´ï¼Œç”šè‡³éœ€è¦åœ¨ç°åœºæµ‹é‡ã€‚â€œå¯¼èˆªè®¡æ—¶â€å’Œâ€œèµ„æºè®¡æ—¶â€å…¬å¼€äº†ä¸¤ä¸ªä¸ DNS ç›¸å…³çš„è®¡æ—¶ï¼š\n\n*   `domainLookupStart`Â is when DNS lookup begins.  \n\n    `domainLookupStart`Â æ˜¯ DNS æŸ¥æ‰¾å¼€å§‹çš„æ—¶é—´ã€‚\n*   `domainLookupEnd`Â is when DNS lookup ends.  \n\n    `domainLookupEnd`Â æ˜¯ DNS æŸ¥æ‰¾ç»“æŸçš„æ—¶é—´ã€‚\n\nCalculating total DNS lookup time can be done by subtracting the start metric from the end metric:  \n\nå¯ä»¥é€šè¿‡ä»ç»“æŸæŒ‡æ ‡ä¸­å‡å»å¼€å§‹æŒ‡æ ‡æ¥è®¡ç®—æ€» DNS æŸ¥æ‰¾æ—¶é—´ï¼š\n\n```js\n// Measuring DNS lookup time\nconst [pageNav] = performance.getEntriesByType('navigation');\nconst totalLookupTime = pageNav.domainLookupEnd - pageNav.domainLookupStart;\n```\n\n:::warning\n**Caution:**Â You can'tÂ _always_Â rely on timings to be populated. Timings provided in both APIs will have a value ofÂ `0`Â in some cases. For example, a DNS lookup may be served by a local cache. Additionally, any timings for cross-origin requests may be unavailable if those origins don't set aÂ [`Timing-Allow-Origin`Â response header](https://developer.mozilla.org/docs/Web/HTTP/Headers/Timing-Allow-Origin).  \n\næ³¨æ„ï¼šæ‚¨ä¸èƒ½æ€»æ˜¯ä¾èµ–è¦å¡«å……çš„æ—¶é—´ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ä¸ª API ä¸­æä¾›çš„è®¡æ—¶å€¼Â `0`Â ä¸º ã€‚ä¾‹å¦‚ï¼ŒDNS æŸ¥æ‰¾å¯èƒ½ç”±æœ¬åœ°ç¼“å­˜æä¾›ã€‚æ­¤å¤–ï¼Œå¦‚æœè·¨æºè¯·æ±‚æœªè®¾ç½®Â `Timing-Allow-Origin`Â å“åº”æ ‡å¤´ï¼Œåˆ™è¿™äº›è¯·æ±‚çš„ä»»ä½•è®¡æ—¶éƒ½å¯èƒ½ä¸å¯ç”¨ã€‚\n:::\n\n### Connection negotiationÂ è¿æ¥åå•†\n\nAnother contributing factor to loading performance is connection negotiation, which is latency incurred when connecting to a web server. If HTTPS is involved, this process will also include TLS negotiation time. The connection phase consists of three timings:  \n\nå½±å“åŠ è½½æ€§èƒ½çš„å¦ä¸€ä¸ªå› ç´ æ˜¯è¿æ¥åå•†ï¼Œè¿™æ˜¯è¿æ¥åˆ° Web æœåŠ¡å™¨æ—¶äº§ç”Ÿçš„å»¶è¿Ÿã€‚å¦‚æœæ¶‰åŠ HTTPSï¼Œåˆ™æ­¤è¿‡ç¨‹è¿˜å°†åŒ…æ‹¬ TLS åå•†æ—¶é—´ã€‚è¿æ¥é˜¶æ®µåŒ…æ‹¬ä¸‰ä¸ªè®¡æ—¶ï¼š\n\n*   `connectStart`Â is when the browser starts to open a connection to a web server.  \n\n    `connectStart`Â æ˜¯æµè§ˆå™¨å¼€å§‹æ‰“å¼€ä¸ Web æœåŠ¡å™¨çš„è¿æ¥æ—¶ã€‚\n*   `secureConnectionStart`Â marks when the client begins TLS negotiation.  \n\n    `secureConnectionStart`Â æ ‡è®°å®¢æˆ·ç«¯ä½•æ—¶å¼€å§‹ TLS åå•†ã€‚\n*   `connectEnd`Â is when the connection to the web server has been established.  \n\n    `connectEnd`Â æ˜¯ä¸ Web æœåŠ¡å™¨å»ºç«‹è¿æ¥çš„æ—¶é—´ã€‚\n\nMeasuring total connection time is similar to measuring total DNS lookup time: you subtract the start timing from the end timing. However, there's an additionalÂ `secureConnectionStart`Â property that may beÂ `0`Â if HTTPS isn't used orÂ [if the connection is persistent](https://en.wikipedia.org/wiki/HTTP_persistent_connection). If you want to measure TLS negotiation time, you'll need to keep that in mind:  \n\næµ‹é‡æ€»è¿æ¥æ—¶é—´ä¸æµ‹é‡æ€» DNS æŸ¥æ‰¾æ—¶é—´ç±»ä¼¼ï¼šä»ç»“æŸæ—¶é—´ä¸­å‡å»å¼€å§‹æ—¶é—´ã€‚ä½†æ˜¯ï¼ŒÂ `0`Â å¦‚æœä¸ä½¿ç”¨ HTTPS æˆ–è¿æ¥æ˜¯æŒä¹…çš„ï¼Œåˆ™å¯èƒ½è¿˜æœ‰ä¸€ä¸ªé™„åŠ Â `secureConnectionStart`Â å±æ€§ã€‚å¦‚æœè¦æµ‹é‡ TLS åå•†æ—¶é—´ï¼Œéœ€è¦ç‰¢è®°è¿™ä¸€ç‚¹ï¼š\n\n```js\n// Quantifying total connection time\nconst [pageNav] = performance.getEntriesByType('navigation');\nconst connectionTime = pageNav.connectEnd - pageNav.connectStart;\nlet tlsTime = 0; // <-- Assume 0 to start with\n\n// Was there TLS negotiation?\nif (pageNav.secureConnectionStart > 0) {\n  // Awesome! Calculate it!\n  tlsTime = pageNav.connectEnd - pageNav.secureConnectionStart;\n}\n```\n\nOnce DNS lookup and connection negotiation ends, timings related to fetching documents and their dependent resources come into play.  \n\nä¸€æ—¦ DNS æŸ¥æ‰¾å’Œè¿æ¥åå•†ç»“æŸï¼Œä¸è·å–æ–‡æ¡£åŠå…¶ä¾èµ–èµ„æºç›¸å…³çš„æ—¶é—´å°±ä¼šå‘æŒ¥ä½œç”¨ã€‚\n\n### Requests and responsesÂ è¯·æ±‚å’Œå“åº”\n\nLoading performance is affected by two types of factors:  \n\nåŠ è½½æ€§èƒ½å—ä»¥ä¸‹ä¸¤ç§å› ç´ çš„å½±å“ï¼š\n\n*   **Extrinsic factors:**Â These are things like latency and bandwidth. Beyond choosing a hosting company and a CDN, they're (mostly) out of our control, as users can access the web from anywhere.  \n\n    å¤–éƒ¨å› ç´ ï¼šè¿™äº›å› ç´ åŒ…æ‹¬å»¶è¿Ÿå’Œå¸¦å®½ç­‰å› ç´ ã€‚é™¤äº†é€‰æ‹©æ‰˜ç®¡å…¬å¸å’Œ CDN ä¹‹å¤–ï¼Œå®ƒä»¬ï¼ˆå¤§éƒ¨åˆ†ï¼‰è¶…å‡ºäº†æˆ‘ä»¬çš„æ§åˆ¶èŒƒå›´ï¼Œå› ä¸ºç”¨æˆ·å¯ä»¥ä»ä»»ä½•åœ°æ–¹è®¿é—®ç½‘ç»œã€‚\n*   **Intrinsic factors:**Â These are things like server and client-side architectures, as well as resource size and our ability to optimize for those things, which are within our control.  \n\n    å†…åœ¨å› ç´ ï¼šè¿™äº›å› ç´ åŒ…æ‹¬æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ¶æ„ï¼Œä»¥åŠèµ„æºå¤§å°å’Œæˆ‘ä»¬é’ˆå¯¹è¿™äº›å› ç´ è¿›è¡Œä¼˜åŒ–çš„èƒ½åŠ›ï¼Œè¿™äº›å› ç´ éƒ½åœ¨æˆ‘ä»¬çš„æ§åˆ¶èŒƒå›´å†…ã€‚\n\nBoth types of factors affect loading performance. Timings related to these factors are vital, as they describe how long resources take to download. Both Navigation Timing and Resource Timing describe loading performance with the following metrics:  \n\nè¿™ä¸¤ç§ç±»å‹çš„å› ç´ éƒ½ä¼šå½±å“åŠ è½½æ€§èƒ½ã€‚ä¸è¿™äº›å› ç´ ç›¸å…³çš„æ—¶é—´è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒä»¬æè¿°äº†ä¸‹è½½èµ„æºæ‰€éœ€çš„æ—¶é—´ã€‚â€œå¯¼èˆªè®¡æ—¶â€å’Œâ€œèµ„æºè®¡æ—¶â€éƒ½ä½¿ç”¨ä»¥ä¸‹æŒ‡æ ‡æè¿°åŠ è½½æ€§èƒ½ï¼š\n\n*   `fetchStart`Â marks when the browser begins to fetch a resource (Resource Timing) or a document for a navigation request (Navigation Timing). This precedes the actual request, and is the point at which the browser is checking caches (for example, HTTP andÂ [`Cache`Â instances](https://developer.mozilla.org/docs/Web/API/Cache)).  \n\n    `fetchStart`Â æ ‡è®°æµè§ˆå™¨ä½•æ—¶å¼€å§‹è·å–èµ„æºï¼ˆèµ„æºè®¡æ—¶ï¼‰æˆ–å¯¼èˆªè¯·æ±‚çš„æ–‡æ¡£ï¼ˆå¯¼èˆªè®¡æ—¶ï¼‰ã€‚è¿™å…ˆäºå®é™…è¯·æ±‚ï¼Œå¹¶ä¸”æ˜¯æµè§ˆå™¨æ£€æŸ¥ç¼“å­˜ï¼ˆä¾‹å¦‚ï¼ŒHTTP å’ŒÂ `Cache`Â å®ä¾‹ï¼‰çš„ç‚¹ã€‚\n*   `workerStart`Â marks when a request starts being handled within a service worker'sÂ [`fetch`Â event handler](https://developer.mozilla.org/docs/Web/API/FetchEvent). This will beÂ `0`Â when no service worker is controlling the current page.  \n\n    `workerStart`Â æ ‡è®°ä½•æ—¶å¼€å§‹åœ¨ Service WorkerÂ `fetch`Â çš„äº‹ä»¶å¤„ç†ç¨‹åºä¸­å¤„ç†è¯·æ±‚ã€‚è¿™å°†æ˜¯å½“æ²¡æœ‰ Service Worker æ§åˆ¶å½“å‰é¡µé¢Â `0`Â æ—¶ã€‚\n*   `requestStart`Â is when the browser makes the request.  \n\n    `requestStart`Â æ˜¯æµè§ˆå™¨å‘å‡ºè¯·æ±‚çš„æ—¶é—´ã€‚\n*   `responseStart`Â is when the first byte of the response arrives.  \n\n    `responseStart`Â æ˜¯å“åº”çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åˆ°è¾¾çš„æ—¶é—´ã€‚\n*   `responseEnd`Â is when the last byte of the response arrives.  \n\n    `responseEnd`Â æ˜¯å“åº”çš„æœ€åä¸€ä¸ªå­—èŠ‚åˆ°è¾¾çš„æ—¶é—´ã€‚\n\nThese timings allow you to measure multiple aspects of loading performance, such as cache lookup within a service workerÂ _and_Â download time:  \n\nè¿™äº›è®¡æ—¶å…è®¸æ‚¨è¡¡é‡åŠ è½½æ€§èƒ½çš„å¤šä¸ªæ–¹é¢ï¼Œä¾‹å¦‚ Service Worker ä¸­çš„ç¼“å­˜æŸ¥æ‰¾å’Œä¸‹è½½æ—¶é—´ï¼š\n\n```js\n// Cache seek plus response time of the current document\nconst [pageNav] = performance.getEntriesByType('navigation');\nconst fetchTime = pageNav.responseEnd - pageNav.fetchStart;\n\n// Service worker time plus response time\nlet workerTime = 0;\n\nif (pageNav.workerStart > 0) {\n  workerTime = pageNav.responseEnd - pageNav.workerStart;\n}\n```\n\nYou can also measure other aspects of request/response latency:  \n\næ‚¨è¿˜å¯ä»¥æµ‹é‡è¯·æ±‚/å“åº”å»¶è¿Ÿçš„å…¶ä»–æ–¹é¢ï¼š\n\n```js\nconst [pageNav] = performance.getEntriesByType('navigation');\n\n// Request time only (excluding redirects, DNS, and connection/TLS time)\nconst requestTime = pageNav.responseStart - pageNav.requestStart;\n\n// Response time only (download)\nconst responseTime = pageNav.responseEnd - pageNav.responseStart;\n\n// Request + response time\nconst requestResponseTime = pageNav.responseEnd - pageNav.requestStart;\n```\n\n### Other measurements you can make  (æ‚¨å¯ä»¥è¿›è¡Œçš„å…¶ä»–æµ‹é‡)\n\nNavigation Timing and Resource Timing is useful for more than what the examples above outline. Here are some other situations with relevant timings that may be worth exploring:  \n\nå¯¼èˆªè®¡æ—¶å’Œèµ„æºè®¡æ—¶çš„ç”¨é€”è¿œä¸æ­¢ä¸Šè¿°ç¤ºä¾‹æ‰€æ¦‚è¿°çš„ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…¶ä»–æƒ…å†µï¼Œè¿™äº›æƒ…å†µå¯èƒ½å€¼å¾—æ¢è®¨ï¼š\n\n*   **Page redirects:**Â Redirects are an overlooked source of added latency, especially redirect chains. Latency gets added in a number of ways, such as HTTP-to-HTTPs hops, as well as 302/uncached 301 redirects. TheÂ `redirectStart`,Â `redirectEnd`, andÂ `redirectCount`Â timings are helpful in assessing redirect latency.  \n\n    é¡µé¢é‡å®šå‘ï¼šé‡å®šå‘æ˜¯å¯¼è‡´å»¶è¿Ÿå¢åŠ çš„ä¸€ä¸ªè¢«å¿½è§†çš„æ¥æºï¼Œå°¤å…¶æ˜¯é‡å®šå‘é“¾ã€‚å»¶è¿Ÿä»¥å¤šç§æ–¹å¼å¢åŠ ï¼Œä¾‹å¦‚ HTTP åˆ° HTTPs è·ƒç‚¹ï¼Œä»¥åŠ 302/æœªç¼“å­˜çš„ 301 é‡å®šå‘ã€‚Â `redirectStart`Â ã€Â `redirectEnd`Â å’ŒÂ `redirectCount`Â è®¡æ—¶æœ‰åŠ©äºè¯„ä¼°é‡å®šå‘å»¶è¿Ÿã€‚\n*   **Document unloading:**Â In pages that run code in anÂ [`unload`Â event handler](https://developer.mozilla.org/docs/Web/Events/unload), the browser must execute that code before it can navigate to the next page.Â `unloadEventStart`Â andÂ `unloadEventEnd`Â measure document unloading.  \n\n    æ–‡æ¡£å¸è½½ï¼šåœ¨Â `unload`Â äº‹ä»¶å¤„ç†ç¨‹åºä¸­è¿è¡Œä»£ç çš„é¡µé¢ä¸­ï¼Œæµè§ˆå™¨å¿…é¡»å…ˆæ‰§è¡Œè¯¥ä»£ç ï¼Œç„¶åæ‰èƒ½å¯¼èˆªåˆ°ä¸‹ä¸€é¡µã€‚Â `unloadEventStart`Â å¹¶Â `unloadEventEnd`Â æµ‹é‡æ–‡æ¡£å¸è½½ã€‚\n*   **Document processing:**Â Document processing time may not be consequential unless your website sends very large HTML payloads. If this describes your situation, theÂ `domInteractive`,Â `domContentLoadedEventStart`,Â `domContentLoadedEventEnd`, andÂ `domComplete`Â timings may be of interest.  \n\n    æ–‡æ¡£å¤„ç†ï¼šé™¤éæ‚¨çš„ç½‘ç«™å‘é€éå¸¸å¤§çš„ HTML æœ‰æ•ˆè´Ÿè½½ï¼Œå¦åˆ™æ–‡æ¡£å¤„ç†æ—¶é—´å¯èƒ½æ— å…³ç´§è¦ã€‚å¦‚æœè¿™æè¿°äº†æ‚¨çš„æƒ…å†µï¼Œåˆ™ ã€Â `domInteractive`Â ã€Â `domContentLoadedEventStart`Â `domContentLoadedEventEnd`Â å’ŒÂ `domComplete`Â æ—¶é—´å¯èƒ½ä¼šå¼•èµ·æ‚¨çš„å…´è¶£ã€‚\n\n:::warning\n**Warning:**Â Timings related to document unloading and processing are available only in Navigation Timing, as they only apply to navigation requests.  \n\nè­¦å‘Šï¼šä¸æ–‡æ¡£å¸è½½å’Œå¤„ç†ç›¸å…³çš„è®¡æ—¶ä»…åœ¨å¯¼èˆªè®¡æ—¶ä¸­å¯ç”¨ï¼Œå› ä¸ºå®ƒä»¬ä»…é€‚ç”¨äºå¯¼èˆªè¯·æ±‚ã€‚\n:::\n\n## Acquiring timings in application code  (åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­è·å–æ—¶åº)\n\nAll of the examples shown so far useÂ `performance.getEntriesByType`, but there are other ways to query the performance entry buffer, such asÂ [`performance.getEntriesByName`](https://developer.mozilla.org/docs/Web/API/Performance/getEntriesByName)Â andÂ [`performance.getEntries`](https://developer.mozilla.org/docs/Web/API/Performance/getEntries). These methods are fine when only light analysis is needed. In other situations, though, they can introduce excessive main thread work by iterating over a large number of entries, or even repeatedly polling the performance buffer to find new entries.  \n\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ˜¾ç¤ºçš„æ‰€æœ‰ç¤ºä¾‹éƒ½ä½¿ç”¨Â `performance.getEntriesByType`Â ï¼Œä½†è¿˜æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥æŸ¥è¯¢æ€§èƒ½æ¡ç›®ç¼“å†²åŒºï¼Œä¾‹å¦‚Â `performance.getEntriesByName`Â å’ŒÂ `performance.getEntries`Â ã€‚å½“åªéœ€è¦å…‰åˆ†ææ—¶ï¼Œè¿™äº›æ–¹æ³•å¾ˆå¥½ã€‚ä½†æ˜¯ï¼Œåœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œå®ƒä»¬å¯èƒ½ä¼šé€šè¿‡è¿­ä»£å¤§é‡æ¡ç›®ï¼Œç”šè‡³é‡å¤è½®è¯¢æ€§èƒ½ç¼“å†²åŒºä»¥æŸ¥æ‰¾æ–°æ¡ç›®æ¥å¼•å…¥è¿‡å¤šçš„ä¸»çº¿ç¨‹å·¥ä½œã€‚\n\nThe recommended approach for collecting entries from the performance entry buffer is to use aÂ [`PerformanceObserver`](https://developer.mozilla.org/docs/Web/API/PerformanceObserver).Â `PerformanceObserver`Â listens for performance entries, and provides them as they're added to the buffer:  \n\nä»æ€§èƒ½æ¡ç›®ç¼“å†²åŒºæ”¶é›†æ¡ç›®çš„æ¨èæ–¹æ³•æ˜¯ä½¿ç”¨Â `PerformanceObserver`Â .Â `PerformanceObserver`Â ä¾¦å¬æ€§èƒ½æ¡ç›®ï¼Œå¹¶åœ¨å°†å®ƒä»¬æ·»åŠ åˆ°ç¼“å†²åŒºæ—¶æä¾›å®ƒä»¬ï¼š\n\n```js\n// Create the performance observer:\nconst perfObserver = new PerformanceObserver((observedEntries) => {\n  // Get all resource entries collected so far:\n  const entries = observedEntries.getEntries();\n\n  // Iterate over entries:\n  for (let i = 0; i < entries.length; i++) {\n    // Do the work!\n  }\n});\n\n// Run the observer for Navigation Timing entries:\nperfObserver.observe({\n  type: 'navigation',\n  buffered: true\n});\n\n// Run the observer for Resource Timing entries:\nperfObserver.observe({\n  type: 'resource',\n  buffered: true\n});\n```\n\n:::info\n**Note:**Â Adding theÂ `buffered`Â option to a performance observer'sÂ `observe`Â event ensures that performance entries added to the buffer prior to the instantiation of the performance observer are observable.  \n\næ³¨ï¼š å°†é€‰é¡¹Â `buffered`Â æ·»åŠ åˆ°æ€§èƒ½è§‚å¯Ÿç¨‹åºÂ `observe`Â çš„äº‹ä»¶å¯ç¡®ä¿åœ¨æ€§èƒ½è§‚å¯Ÿç¨‹åºå®ä¾‹åŒ–ä¹‹å‰æ·»åŠ åˆ°ç¼“å†²åŒºçš„æ€§èƒ½æ¡ç›®æ˜¯å¯è§‚å¯Ÿçš„ã€‚\n:::\n\nThis method of collecting timings may feel awkward when compared to directly accessing the performance entry buffer, but it's preferable to tying up the main thread with work that doesn't serve a critical and user-facing purpose.  \n\nä¸ç›´æ¥è®¿é—®æ€§èƒ½è¾“å…¥ç¼“å†²åŒºç›¸æ¯”ï¼Œè¿™ç§æ”¶é›†è®¡æ—¶çš„æ–¹æ³•å¯èƒ½ä¼šè®©äººæ„Ÿåˆ°å°´å°¬ï¼Œä½†æœ€å¥½ä¸è¦å°†ä¸»çº¿ç¨‹ä¸ä¸ç”¨äºå…³é”®å’Œé¢å‘ç”¨æˆ·çš„å·¥ä½œæ†ç»‘åœ¨ä¸€èµ·ã€‚\n\n## Phoning homeÂ ç»™å®¶é‡Œæ‰“ç”µè¯\n\nOnce you've collected all the timings you need, you can send them to an endpoint for further analysis. Two ways to do this are with eitherÂ [`navigator.sendBeacon`](https://developer.mozilla.org/docs/Web/API/Navigator/sendBeacon)Â or aÂ [`fetch`Â with theÂ `keepalive`Â option](https://developer.mozilla.org/docs/Web/API/fetch)Â set. Both methods will send a request to a specified endpoint in a non-blocking way, and the request will be queued in a way that outlives the current page session if need be:  \n\næ”¶é›†æ‰€éœ€çš„æ‰€æœ‰è®¡æ—¶åï¼Œå¯ä»¥å°†å®ƒä»¬å‘é€åˆ°ç»ˆç»“ç‚¹è¿›è¡Œè¿›ä¸€æ­¥åˆ†æã€‚æ‰§è¡Œæ­¤æ“ä½œçš„ä¸¤ç§æ–¹æ³•æ˜¯ä½¿ç”¨Â `keepalive`Â é€‰é¡¹é›†æˆ–Â `navigator.sendBeacon`Â é€‰é¡¹Â `fetch`Â é›†ã€‚è¿™ä¸¤ç§æ–¹æ³•éƒ½å°†ä»¥éé˜»å¡æ–¹å¼å‘æŒ‡å®šçš„ç»ˆç»“ç‚¹å‘é€è¯·æ±‚ï¼Œå¦‚æœéœ€è¦ï¼Œè¯·æ±‚å°†ä»¥æ¯”å½“å‰é¡µé¢ä¼šè¯æ›´é•¿çš„æ–¹å¼æ’é˜Ÿï¼š\n\n```js\n// Caution: If you have lots of performance entries, don't\n// do this. This is an example for illustrative purposes.\nconst data = JSON.stringify(performance.getEntries()));\n\n// The endpoint to transmit the encoded data to\nconst endpoint = '/analytics';\n\n// Check for fetch keepalive support\nif ('keepalive' in Request.prototype) {\n  fetch(endpoint, {\n    method: 'POST',\n    body: data,\n    keepalive: true,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n} else if ('sendBeacon' in navigator) {\n  // Use sendBeacon as a fallback\n  navigator.sendBeacon(endpoint, data);\n}\n```\n\nIn this example, the JSON string will arrive in aÂ `POST`Â payload that you can decode and process/store in an application backend as needed.  \n\nåœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒJSON å­—ç¬¦ä¸²å°†åˆ°è¾¾æœ‰æ•ˆÂ `POST`Â è´Ÿè½½ä¸­ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦åœ¨åº”ç”¨ç¨‹åºåç«¯ä¸­è§£ç å’Œå¤„ç†/å­˜å‚¨è¯¥æœ‰æ•ˆè´Ÿè½½ã€‚\n\n## Wrapping upÂ ç»“æŸè¯­\n\nOnce you have metrics collected, it's up to you to figure out how to analyze that field data. When analyzing field data, there are a few general rules to follow to ensure you're drawing meaningful conclusions:  \n\næ”¶é›†æŒ‡æ ‡åï¼Œç”±æ‚¨å†³å®šå¦‚ä½•åˆ†æè¯¥å­—æ®µæ•°æ®ã€‚åœ¨åˆ†æå¤–ä¸šæ•°æ®æ—¶ï¼Œéœ€è¦éµå¾ªä¸€äº›ä¸€èˆ¬è§„åˆ™ï¼Œä»¥ç¡®ä¿å¾—å‡ºæœ‰æ„ä¹‰çš„ç»“è®ºï¼š\n\n*   [Avoid averages](https://www.igvita.com/2016/01/12/the-average-page-is-a-myth/), as they're not representative of any one user's experience, and may be skewed by outliers.  \n\n    é¿å…ä½¿ç”¨å¹³å‡å€¼ï¼Œå› ä¸ºå®ƒä»¬ä¸èƒ½ä»£è¡¨ä»»ä½•ä¸€ä¸ªç”¨æˆ·çš„ä½“éªŒï¼Œå¹¶ä¸”å¯èƒ½ä¼šå› å¼‚å¸¸å€¼è€Œå‡ºç°åå·®ã€‚\n*   Rely on percentiles. In datasets of time-based performance metrics, lower is better. This means that when you prioritize low percentiles, you're only paying attention to the fastest experiences.  \n\n    ä¾é ç™¾åˆ†ä½æ•°ã€‚åœ¨åŸºäºæ—¶é—´çš„æ€§èƒ½æŒ‡æ ‡æ•°æ®é›†ä¸­ï¼Œè¶Šä½è¶Šå¥½ã€‚è¿™æ„å‘³ç€ï¼Œå½“æ‚¨ä¼˜å…ˆè€ƒè™‘ä½ç™¾åˆ†ä½æ•°æ—¶ï¼Œæ‚¨åªä¼šå…³æ³¨æœ€å¿«çš„ä½“éªŒã€‚\n*   [Prioritize the long tail of values](https://timkadlec.com/remembers/2018-06-07-prioritizing-the-long-tail-of-performance/). When you prioritize experiences at the 75th percentile or higher, you're putting your focus where it belongs: on the slowest experiences.  \n\n    ä¼˜å…ˆè€ƒè™‘å€¼çš„é•¿å°¾ã€‚å½“æ‚¨å°†ä½“éªŒçš„ä¼˜å…ˆçº§æ’åœ¨ç¬¬ 75 ä¸ªç™¾åˆ†ä½æˆ–æ›´é«˜æ—¶ï¼Œæ‚¨å°±å°†é‡ç‚¹æ”¾åœ¨äº†å®ƒæ‰€å±çš„åœ°æ–¹ï¼šæœ€æ…¢çš„ä½“éªŒä¸Šã€‚\n\nThis guide isn't meant to be an exhaustive resource on Navigation or Resource Timing, but a starting point. Below are some additional resources you may find helpful:  \næœ¬æŒ‡å—å¹¶ä¸æ˜¯æœ‰å…³å¯¼èˆªæˆ–èµ„æºè®¡æ—¶çš„è¯¦å°½èµ„æºï¼Œè€Œæ˜¯ä¸€ä¸ªèµ·ç‚¹ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½å¯¹æ‚¨æœ‰å¸®åŠ©çš„å…¶ä»–èµ„æºï¼š\n\n*   [Navigation Timing Spec](https://www.w3.org/TR/navigation-timing-2/).Â å¯¼èˆªæ—¶åºè§„èŒƒ\n\n*   [Resource Timing Spec](https://www.w3.org/TR/resource-timing-2/).Â èµ„æºè®¡æ—¶è§„èŒƒ\n\n*   [ResourceTiming in Practice](https://nicj.net/resourcetiming-in-practice/).  \n\n    ResourceTiming åœ¨å®è·µä¸­ã€‚\n*   [Navigation Timing API (MDN)  \n\n    å¯¼èˆªè®¡æ—¶ API ï¼ˆMDNï¼‰](https://developer.mozilla.org/docs/Web/API/Navigation_timing_API)\n*   [Resource Timing API (MDN)  \n\n    èµ„æºè®¡æ—¶ API ï¼ˆMDNï¼‰](https://developer.mozilla.org/docs/Web/API/Resource_Timing_API)\n\nWith these APIs and the data they provide, you'll be better equipped to understand how loading performance is experienced by real users, which will give you more confidence in diagnosing and addressing loading performance problems in the field.  \n\nå€ŸåŠ©è¿™äº› API åŠå…¶æä¾›çš„æ•°æ®ï¼Œæ‚¨å°†èƒ½å¤Ÿæ›´å¥½åœ°äº†è§£çœŸå®ç”¨æˆ·å¯¹åŠ è½½æ€§èƒ½çš„ä½“éªŒï¼Œè¿™å°†ä½¿æ‚¨åœ¨ç°åœºè¯Šæ–­å’Œè§£å†³åŠ è½½æ€§èƒ½é—®é¢˜æ—¶æ›´æœ‰ä¿¡å¿ƒã€‚\n","pageType":"doc","routePath":"/chrome/performance/navigation-and-resource-timing"};</script>
      
      <script type="module" src="/client-entry.js"></script>
    </body>
  </html>