<!DOCTYPE html>
  <html>
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <link rel="icon" href="" type="image/svg+xml"></link>
      <script  id="check-dark-light">
        ;(() => {
          const saved = localStorage.getItem('island-theme-appearance')
          const prefereDark = window.matchMedia('(prefers-color-scheme: dark)').matches
          if (!saved || saved === 'auto' ? prefereDark : saved === 'dark') {
            document.documentElement.classList.add('dark')
          }
        })()
      </script>
      <title data-rh="true">é€šè¿‡æ‘‡æ ‘å‡å°‘ JavaScript æœ‰æ•ˆè´Ÿè½½</title>
      <meta data-rh="true" name="description" content="Island"/>
      
      
      <script defer src='https://ga.jspm.io/npm:es-module-shims@1.6.0/dist/es-module-shims.js'></script>
      <script type="importmap">
        {
          "imports": {
            "react": "/react.js","react-dom": "/react-dom.js","react-dom/client": "/react-dom_client.js","react/jsx-runtime": "/react_jsx-runtime.js"
          }
        }
      </script>

      <link rel="stylesheet" href="/assets/style.81be0ec3.css">

    </head>
    <body>
      <div id="root"><div style="height:100%"><header relative="" z="4" fixed="md:~" class="top-0 left-0" w="100%"><div relative="" p="l-8 sm:x-8" transition="background-color duration-500" class="divider-bottom md:border-b-transparent lg:border-b-transparent" nav-h="mobile lg:desktop"><div flex="" justify="between" m="0 auto" nav-h="mobile lg:desktop" class="_container_1ic07_52  _has-sidebar_1ic07_16"><div border="border t-0 b-1 border-solid transparent" class="_nav-bar-title_1ic07_16"><a href="/" w="100%" h="100%" text="1rem" font="semibold" transition="opacity duration-300" hover="opacity-60" class="flex items-center"><span>bekaçš„åšå®¢</span></a></div><div class="_content_1ic07_24" flex="~ 1" justify="end" items-center=""><div class="search" flex="sm:1" pl="sm:8"><div flex="" items-center="~" relative="" mr="2" font="semibold"><svg width="32" height="32" viewBox="0 0 32 32" w="5" h="5" fill="currentColor"><path fill="#888888" d="m29 27.586l-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9a9.01 9.01 0 0 1-9-9Z"></path></svg><input disabled="" cursor="text focus:auto" placeholder="Search" height="8" border="none" type="text" text="sm" p="t-0 r-2 b-0 l-2" transition="all duration-200 ease" class="rounded-sm _searchInput_y03a3_1 " aria-label="Search" autoComplete="off"/><div m="r-3" w="10" h="6" p="x-1.5" rounded="md" border="1px solid gray-light-3" text="xs gray-light-3" flex="~" items-center="~" justify="around" class="_searchCommand_y03a3_7"><span>âŒ˜</span><span>K</span></div></div></div><div class="_rightNav_1ic07_42"><div class="menu"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Article</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Article-set</a></div><div text="sm" font="medium" m="x-3" class="text-brand"><a class="_link_r3fql_1 " target="" cursor="pointer">Chrome</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Design-pattern</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Open-source</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Promise</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Typescript</a></div><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Webpack</a></div></div><div class="appearance" before="menu-item-before" display="none sm:flex" items-center="center"><button class="_switch_1tqe3_1 undefined" id="" type="button" role="switch"><span class="_check_1tqe3_17"><span class="_icon_1tqe3_34"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="_sun_8e60k_1"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="_moon_8e60k_5"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div></div><button class=" _navHamburger_14nz8_1"><span class="_container_14nz8_14"><span class="_top_14nz8_21"></span><span class="_middle_14nz8_27"></span><span class="_bottom_14nz8_33"></span></span></button><div class="_navScreen_1mkpq_1 " id="navScreen"><div class="_container_1mkpq_21"><div class="_navMenu_1mkpq_27"><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Article</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Article-set</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class="text-brand"><a class="_link_r3fql_1 " target="" cursor="pointer">Chrome</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Design-pattern</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Open-source</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Promise</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Typescript</a></div></div><div w="100%" class="_navMenuItem_1mkpq_34"><div text="sm" font="medium" m="x-3" class=""><a class="_link_r3fql_1 " target="" cursor="pointer">Webpack</a></div></div></div><div class="_socialAndAppearance_1mkpq_50" flex="~" justify="center" items-center="center"><div class="items-center appearance pa-2 _navAppearance_1mkpq_46" flex="~" justify="center"><button class="_switch_1tqe3_1 undefined" id="" type="button" role="switch"><span class="_check_1tqe3_17"><span class="_icon_1tqe3_34"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="_sun_8e60k_1"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="_moon_8e60k_5"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div></div></div></div></div></div></div></header><section style="padding-top:var(--island-nav-height)"><div p="t-0 x-6 b-24 sm:6" class="_docLayout_5cssi_8"><div class="_localNav_ncerp_1"><button flex="center" class="_menu_ncerp_16"><div text="md" mr="2" class="i-carbon:menu"></div><span text="md ">Menu</span></button></div><aside class="_sidebar_iav29_1 "><nav><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">Chrome</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:28px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ•ˆæœæŒ‡æ ‡</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">æµè§ˆå™¨å·¥ä½œåŸç†</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:168px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Web æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” é«˜çº§ä½“ç³»ç»“æ„ï¼ˆç¬¬ 1 éƒ¨åˆ†ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Web æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” å¯¼èˆªé˜¶æ®µï¼ˆç¬¬ 2 éƒ¨åˆ†ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” æ¸²æŸ“é˜¶æ®µï¼ˆç¬¬ 3 éƒ¨åˆ†ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” åŠ è½½é˜¶æ®µçš„ä¼˜åŒ–ï¼ˆç¬¬ 4 éƒ¨åˆ†ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">æµè§ˆå™¨å¦‚ä½•ä¸€æ­¥ä¸€æ­¥åœ°å·¥ä½œ â€” äº¤äº’é˜¶æ®µçš„ä¼˜åŒ–ï¼ˆç¬¬ 5 éƒ¨åˆ†ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä»€ä¹ˆå¼ºåˆ¶äº†é‡æ’/å›æµ</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">Html</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:84px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Metadata</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">html</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer"># æ–‡æ¡£ç»“æ„</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">å…³é”®æŒ‡æ ‡</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:84px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">First Contentful Paint (FCP) é¦–æ¬¡å†…å®¹ç»˜åˆ¶</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Largest Contentful Paint (LCP) æœ€å¤§å†…å®¹å¡«å……</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Time to First Byte (TTFB) é¦–æ¬¡å­—èŠ‚åŠ è½½æ—¶é—´</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹•</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:112px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 1</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 2</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 3</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 4</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">æ€§èƒ½</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:224px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">1. Welcome to Lean performance</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">2. ä¸€èˆ¬ HTML æ€§èƒ½æ³¨æ„äº‹é¡¹</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä½¿ç”¨å¯¼èˆªå®šæ—¶å’Œèµ„æºå®šæ—¶è¯„ä¼°ç°åœºçš„è´Ÿè½½æ€§èƒ½</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä¼˜åŒ–é•¿ä»»åŠ¡</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">optimize-resource-loading ä¼˜åŒ–èµ„æºè´Ÿè½½</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-brand"><a class="_link_r3fql_1 " target="" cursor="pointer">é€šè¿‡æ‘‡æ ‘å‡å°‘ JavaScript æœ‰æ•ˆè´Ÿè½½</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">asdf</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">é€Ÿåº¦ä¸ºä»€ä¹ˆé‡è¦</a></div></div></div></div></section><section block="~" not-first="divider-top mt-4"><div flex="~" justify="between" items-start="~" class="items-center"><h2 m="t-3 b-2" text="1rem text-1" font="bold">æ€§èƒ½æŠ€å·§</h2><div class="i-carbon-chevron-right" cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"></div></div><div mb="1.4 sm:1" style="transition:height 0.2s ease-out;height:476px;overflow:hidden"><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Web ä¸Šçš„å¤šè¿›ç¨‹ï¼šæµè§ˆå™¨è¿›ç¨‹æ¨¡å‹</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Browser Rendering Pipeline</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">é€šè¿‡ç«ç„°å›¾æ‰¾åˆ°æœ‰é—®é¢˜çš„ä»£ç </a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">å¦‚ä½•æ”¶é›† Web æ€§èƒ½è·Ÿè¸ª</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">äº‹ä»¶å¾ªç¯åŸºç¡€çŸ¥è¯†</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">æ·±åº¦è®²è§£ç«ç„°å›¾ ğŸ”¥ğŸ”¥</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">é•¿ä»»åŠ¡ï¼šå®ƒä»¬æ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆåº”è¯¥é¿å…å®ƒä»¬</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">performance æŸ¥çœ‹ä¸»çº¿ç¨‹ï¼ˆé¢œè‰²å«ä¹‰ï¼‰</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">æ£€æµ‹æµè§ˆå™¨ä½•æ—¶åœ¨ JavaScript ä¸­ç»˜åˆ¶Frame</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">å¦‚ä½•é˜…è¯» Chromium Profiler</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä½¿ç”¨ Chromium ç½‘ç»œæ ‡ç­¾é¡µè·å–æ€§èƒ½è¯¦æƒ…</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ä½¿ç”¨æ€§èƒ½æ—¶åºæ ‡è®°è¿›è¡ŒğŸ“æµ‹é‡</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">Chromium F12 æ€§èƒ½åˆ†æå™¨çš„åŸºæœ¬æ¦‚è¿°</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">ã€--ç©ºæ–‡ä»¶--ã€‘: performance/tips/resource-size-vs-transfer-size.md</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">å¦‚ä½•é˜…è¯»ç«ç„°å›¾ ğŸ”¥</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">è¯†åˆ« Web åº”ç”¨ä¸­çš„æœªå‹ç¼©èµ„æº</a></div></div></div><div><div style="margin-left:0px"><div p="1" block="~" text="sm" font-medium="~" class="text-text-2"><a class="_link_r3fql_1 " target="" cursor="pointer">asdfadsasdsdfasdf</a></div></div></div></div></section></nav></aside><div flex="~ 1 shrink-0" m="x-auto" class="_content_5cssi_2"><div m="x-auto" flex="~ col" class="max-w-100%"><div relative="~" m="x-auto" p="l-2" class="w-100% md:max-w-712px lg:min-w-640px "><div class="island-doc "><!--$--><h1 id="é€šè¿‡æ‘‡æ ‘å‡å°‘-javascript-æœ‰æ•ˆè´Ÿè½½"><a class="header-anchor" aria-hidden="true" href="#é€šè¿‡æ‘‡æ ‘å‡å°‘-javascript-æœ‰æ•ˆè´Ÿè½½">#</a>é€šè¿‡æ‘‡æ ‘å‡å°‘ JavaScript æœ‰æ•ˆè´Ÿè½½</h1>
<p><code>metadata:</code></p>
<p><strong>åŸæ ‡é¢˜:</strong> Reduce JavaScript payloads with tree shaking</p>
<p><strong>é“¾æ¥:</strong> <a href="https://web.dev/articles/reduce-javascript-payloads-with-tree-shaking" target="_blank" rel="nofollow">https://web.dev/articles/reduce-javascript-payloads-with-tree-shaking</a></p>
<hr/>
<p>Today&#x27;s web applications can get pretty big, especially the JavaScript part of them. As of mid-2018, HTTP Archive puts theÂ <a href="https://httparchive.org/reports/state-of-javascript#bytesJs" target="_blank" rel="nofollow">median transfer size of JavaScript on mobile devices</a>Â at approximately 350 KB. And this is just transfer size! JavaScript is often compressed when sent over the network, meaning that theÂ <em>actual</em>Â amount of JavaScript is quite a bit more after the browser decompresses it. That&#x27;s important to point out, because as far as resourceÂ <em>processing</em>Â is concerned, compression is irrelevant. 900 KB of decompressed JavaScript is still 900 KB to the parser and compiler, even though it may be roughly 300 KB when compressed.</p>
<p>ä»Šå¤©çš„ Web åº”ç”¨ç¨‹åºå¯èƒ½ä¼šå˜å¾—éå¸¸å¤§ï¼Œå°¤å…¶æ˜¯å…¶ä¸­çš„ JavaScript éƒ¨åˆ†ã€‚æˆªè‡³ 2018 å¹´å¹´ä¸­ï¼ŒHTTP Archive å°† JavaScript åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„ä¼ è¾“å¤§å°ä¸­ä½æ•°å®šä¸ºçº¦ 350 KBã€‚è€Œè¿™åªæ˜¯ä¼ è¾“å¤§å°ï¼JavaScript åœ¨é€šè¿‡ç½‘ç»œå‘é€æ—¶é€šå¸¸ä¼šè¢«å‹ç¼©ï¼Œè¿™æ„å‘³ç€åœ¨æµè§ˆå™¨è§£å‹ç¼©åï¼ŒJavaScript çš„å®é™…æ•°é‡ä¼šå¤šå¾—å¤šã€‚éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œå°±èµ„æºå¤„ç†è€Œè¨€ï¼Œå‹ç¼©æ˜¯æ— å…³ç´§è¦çš„ã€‚900 KB çš„è§£å‹ç¼© JavaScript å¯¹äºè§£æå™¨å’Œç¼–è¯‘å™¨æ¥è¯´ä»ç„¶æ˜¯ 900 KBï¼Œå³ä½¿å‹ç¼©åå¯èƒ½å¤§çº¦ 300 KBã€‚</p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231116112020.png" alt="20231116112020"/>
<em>The process of downloading and running JavaScript. Note that even though the transfer size of the script is 300 KB compressed, it is still 900 KB worth of JavaScript that must be parsed, compiled, and executed.</em></p>
<p><em>ä¸‹è½½å’Œè¿è¡Œ JavaScript çš„è¿‡ç¨‹ã€‚è¯·æ³¨æ„ï¼Œå³ä½¿è„šæœ¬çš„ä¼ è¾“å¤§å°å‹ç¼©ä¸º 300 KBï¼Œä½†ä»å¿…é¡»è§£æã€ç¼–è¯‘å’Œæ‰§è¡Œ 900 KB çš„ JavaScriptã€‚</em></p>
<p>JavaScript is an expensive resource to process. Unlike images which only incur relatively trivial decode time once downloaded, JavaScript must be parsed, compiled, and then finally executed. Byte for byte, this makes JavaScript more expensive than other types of resources.</p>
<p>JavaScript æ˜¯ä¸€ç§æ˜‚è´µçš„å¤„ç†èµ„æºã€‚ä¸ä¸‹è½½åä»…äº§ç”Ÿç›¸å¯¹å¾®ä¸è¶³é“çš„è§£ç æ—¶é—´çš„å›¾åƒä¸åŒï¼ŒJavaScript å¿…é¡»ç»è¿‡è§£æã€ç¼–è¯‘ï¼Œç„¶åæœ€ç»ˆæ‰§è¡Œã€‚é€å­—èŠ‚ï¼Œè¿™ä½¿å¾— JavaScript æ¯”å…¶ä»–ç±»å‹çš„èµ„æºæ›´æ˜‚è´µã€‚</p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231116112125.png" alt="20231116112125"/>
<em>The processing cost of parsing/compiling 170 KB of JavaScript vs decode time of an equivalently sized JPEG. (<a href="https://medium.com/dev-channel/the-cost-of-javascript-84009f51e99e" target="_blank" rel="nofollow">source</a>).</em></p>
<p><em>è§£æ/ç¼–è¯‘ 170 KB JavaScript çš„å¤„ç†æˆæœ¬ä¸åŒç­‰å¤§å°çš„ JPEG çš„è§£ç æ—¶é—´ä¹‹æ¯”ã€‚ï¼ˆæ¥æºï¼‰.</em></p>
<p><a href="https://v8.dev/blog/background-compilation" target="_blank" rel="nofollow">While improvements are continually being made</a>Â toÂ <a href="https://blog.mozilla.org/javascript/2017/12/12/javascript-startup-bytecode-cache/" target="_blank" rel="nofollow">improve the efficiency of JavaScript engines</a>, improving JavaScript performance isâ€”as alwaysâ€”a task for developers.</p>
<p>è™½ç„¶ä¸æ–­è¿›è¡Œæ”¹è¿›ä»¥æé«˜ JavaScript å¼•æ“çš„æ•ˆç‡ï¼Œä½†æé«˜ JavaScript æ€§èƒ½ä¸€å¦‚æ—¢å¾€åœ°æ˜¯å¼€å‘äººå‘˜çš„ä»»åŠ¡ã€‚</p>
<p>To that end, there are techniques to improve JavaScript performance.Â <a href="https://web.dev/articles/reduce-javascript-payloads-with-code-splitting" target="_blank" rel="nofollow">Code splitting</a>, is one such technique that improves performance by partitioning application JavaScript into chunks, and serving those chunks to only the routes of an application that need them.</p>
<p>ä¸ºæ­¤ï¼Œæœ‰ä¸€äº›æŠ€æœ¯å¯ä»¥æé«˜ JavaScript æ€§èƒ½ã€‚ä»£ç æ‹†åˆ†å°±æ˜¯è¿™æ ·ä¸€ç§æŠ€æœ¯ï¼Œå®ƒé€šè¿‡å°†åº”ç”¨ç¨‹åº JavaScript åˆ’åˆ†ä¸ºå¤šä¸ªå—ï¼Œå¹¶å°†è¿™äº›å—ä»…æä¾›ç»™éœ€è¦å®ƒä»¬çš„åº”ç”¨ç¨‹åºçš„è·¯ç”±æ¥æé«˜æ€§èƒ½ã€‚</p>
<p>While this technique works, it doesn&#x27;t address a common problem of JavaScript-heavy applications, which is the inclusion of code that&#x27;s never used. Tree shaking attempts to solve this problem.</p>
<p>è™½ç„¶è¿™ç§æŠ€æœ¯æœ‰æ•ˆï¼Œä½†å®ƒå¹¶æ²¡æœ‰è§£å†³ JavaScript å¯†é›†å‹åº”ç”¨ç¨‹åºçš„å¸¸è§é—®é¢˜ï¼Œå³åŒ…å«ä»æœªä½¿ç”¨è¿‡çš„ä»£ç ã€‚æ‘‡æ ‘è¯•å›¾è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h2 id="what-is-tree-shaking--ä»€ä¹ˆæ˜¯æ‘‡æ ‘"><a class="header-anchor" aria-hidden="true" href="#what-is-tree-shaking--ä»€ä¹ˆæ˜¯æ‘‡æ ‘">#</a>What is tree shaking?  ä»€ä¹ˆæ˜¯æ‘‡æ ‘ï¼Ÿ</h2>
<p><a href="https://en.wikipedia.org/wiki/Tree_shaking" target="_blank" rel="nofollow">Tree shaking</a>Â is a form of dead code elimination.Â <a href="https://github.com/rollup/rollup#tree-shaking" target="_blank" rel="nofollow">The term was popularized by Rollup</a>, but the concept of dead code elimination has existed for some time. The concept has also found purchase inÂ <a href="https://webpack.js.org/guides/tree-shaking/" target="_blank" rel="nofollow">webpack</a>, which is demonstrated in this article by way of a sample app.</p>
<p>æ‘‡æ ‘æ˜¯æ¶ˆé™¤æ­»ä»£ç çš„ä¸€ç§å½¢å¼ã€‚è¯¥æœ¯è¯­ç”± Rollup æ¨å¹¿ï¼Œä½†æ­»ä»£ç æ¶ˆé™¤çš„æ¦‚å¿µå·²ç»å­˜åœ¨äº†ä¸€æ®µæ—¶é—´ã€‚è¿™ä¸ªæ¦‚å¿µåœ¨ webpack ä¸­ä¹Ÿå¾—åˆ°äº†è´­ä¹°ï¼Œæœ¬æ–‡é€šè¿‡ä¸€ä¸ªç¤ºä¾‹åº”ç”¨ç¨‹åºè¿›è¡Œäº†æ¼”ç¤ºã€‚</p>
<p>The term &quot;tree shaking&quot; comes from the mental model of your application and its dependencies as a tree-like structure. Each node in the tree represents a dependency that provides distinct functionality for your app. In modern apps, these dependencies are brought in viaÂ <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import" target="_blank" rel="nofollow">staticÂ <code>import</code>Â statements</a>Â like so:</p>
<p>æœ¯è¯­â€œæ‘‡æ ‘â€æ¥è‡ªåº”ç”¨ç¨‹åºçš„å¿ƒæ™ºæ¨¡å‹åŠå…¶ä½œä¸ºæ ‘çŠ¶ç»“æ„çš„ä¾èµ–å…³ç³»ã€‚æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½è¡¨ç¤ºä¸€ä¸ªä¾èµ–é¡¹ï¼Œè¯¥ä¾èµ–é¡¹ä¸ºåº”ç”¨æä¾›ä¸åŒçš„åŠŸèƒ½ã€‚åœ¨ç°ä»£åº”ç”¨ä¸­ï¼Œè¿™äº›ä¾èµ–é¡¹æ˜¯é€šè¿‡é™æ€Â <code>import</code>Â è¯­å¥å¼•å…¥çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#616E88">// Import all the array utilities!</span></span>
<span class="line"><span style="color:#81A1C1">import</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">arrayUtils</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">from</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">array-utils</span><span style="color:#ECEFF4">&quot;</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span></div></div>
<div class="island-directive info"><p class="island-directive-title">INFO</p><div class="island-directive-content"><p><strong>Note:</strong> If you&#x27;re not sure what ES6 modules are,Â <a href="https://ponyfoo.com/articles/es6-modules-in-depth" target="_blank" rel="nofollow">this explainer at Pony Foo</a>Â is worth a look. This guide assumes you have working knowledge of how ES6 modules work, so if you don&#x27;t know anything about them, give that article a read!</p><p>æ³¨æ„ï¼šå¦‚æœæ‚¨ä¸ç¡®å®š ES6 æ¨¡å—æ˜¯ä»€ä¹ˆï¼ŒPony Foo çš„è¿™ä¸ªè§£é‡Šå™¨å€¼å¾—ä¸€çœ‹ã€‚æœ¬æŒ‡å—å‡è®¾æ‚¨å¯¹ ES6 æ¨¡å—çš„å·¥ä½œåŸç†æœ‰ä¸€å®šçš„äº†è§£ï¼Œæ‰€ä»¥å¦‚æœä½ å¯¹å®ƒä»¬ä¸€æ— æ‰€çŸ¥ï¼Œè¯·é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼</p></div></div>
<p>When an app is youngâ€”a sapling, if you willâ€”it may have few dependencies. It&#x27;s also using mostâ€”if not allâ€”the dependencies you add. As your app matures, however, more dependencies can get added. To compound matters, older dependencies fall out of use, but may not get pruned from your codebase. The end result is that an app ends up shipping with a lot ofÂ <a href="https://web.dev/unused-javascript" target="_blank" rel="nofollow">unused JavaScript</a>. Tree shaking addresses this by taking advantage of how staticÂ <code>import</code>Â statements pull in specific parts of ES6 modules:</p>
<p>å½“ä¸€ä¸ªåº”ç”¨ç¨‹åºè¿˜å¾ˆå¹´è½»æ—¶ï¼ˆå¦‚æœä½ æ„¿æ„çš„è¯ï¼Œå®ƒæ˜¯ä¸€æ£µæ ‘è‹—ï¼‰ï¼Œå®ƒå¯èƒ½å‡ ä¹æ²¡æœ‰ä¾èµ–å…³ç³»ã€‚å®ƒè¿˜ä½¿ç”¨æ‚¨æ·»åŠ çš„å¤§å¤šæ•°ï¼ˆå¦‚æœä¸æ˜¯å…¨éƒ¨ï¼‰ä¾èµ–é¡¹ã€‚ä½†æ˜¯ï¼Œéšç€åº”ç”¨çš„æˆç†Ÿï¼Œå¯ä»¥æ·»åŠ æ›´å¤šä¾èµ–é¡¹ã€‚é›ªä¸ŠåŠ éœœçš„æ˜¯ï¼Œè¾ƒæ—§çš„ä¾èµ–é¡¹ä¸å†ä½¿ç”¨ï¼Œä½†å¯èƒ½ä¸ä¼šä»ä»£ç åº“ä¸­åˆ é™¤ã€‚æœ€ç»ˆç»“æœæ˜¯ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºæœ€ç»ˆä¼šé™„å¸¦å¤§é‡æœªä½¿ç”¨çš„ JavaScriptã€‚æ‘‡æ ‘é€šè¿‡åˆ©ç”¨é™æ€Â <code>import</code>Â è¯­å¥å¦‚ä½•æ‹‰å…¥ ES6 æ¨¡å—çš„ç‰¹å®šéƒ¨åˆ†æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#616E88">// Import only some of the utilities!</span></span>
<span class="line"><span style="color:#81A1C1">import</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">unique</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">implode</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">explode</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">from</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">array-utils</span><span style="color:#ECEFF4">&quot;</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span></div></div>
<p>The difference between thisÂ <code>import</code>Â example and the previous one is that rather than importingÂ <em>everything</em>Â from theÂ <code>&quot;array-utils&quot;</code>Â moduleâ€”which could be a lot of code)â€”this example imports only specific parts of it. In dev builds, this doesn&#x27;t change anything, as the entire module gets imported regardless. In production builds, webpack can be configured to &quot;shake&quot; offÂ <a href="https://developer.mozilla.org/docs/web/javascript/reference/statements/export" target="_blank" rel="nofollow">exports</a>Â from ES6 modules that weren&#x27;t explicitly imported, making those production builds smaller. In this guide, you&#x27;ll learn how to do just that!</p>
<p>æ­¤ç¤ºä¾‹ä¸ä¸Šä¸€ä¸ªç¤ºä¾‹çš„åŒºåˆ«åœ¨äºï¼Œæ­¤Â <code>import</code>Â ç¤ºä¾‹ä¸æ˜¯ä»æ¨¡å—ä¸­å¯¼å…¥æ‰€æœ‰å†…å®¹ï¼ˆå¯èƒ½æ˜¯å¤§é‡ä»£ç ï¼‰ï¼Œè€Œæ˜¯ä»…å¯¼å…¥Â <code>&quot;array-utils&quot;</code>Â æ¨¡å—çš„ç‰¹å®šéƒ¨åˆ†ã€‚åœ¨å¼€å‘ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ä¼šæ”¹å˜ä»»ä½•äº‹æƒ…ï¼Œå› ä¸ºæ— è®ºå¦‚ä½•éƒ½ä¼šå¯¼å…¥æ•´ä¸ªæ¨¡å—ã€‚åœ¨ç”Ÿäº§ç‰ˆæœ¬ä¸­ï¼Œwebpack å¯ä»¥é…ç½®ä¸ºâ€œæ‘†è„±â€æœªæ˜¾å¼å¯¼å…¥çš„ ES6 æ¨¡å—çš„å¯¼å‡ºï¼Œä»è€Œä½¿è¿™äº›ç”Ÿäº§ç‰ˆæœ¬æ›´å°ã€‚åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ï¼</p>
<h2 id="finding-opportunities-to-shake-a-tree--å¯»æ‰¾æœºä¼šæ‘‡æ™ƒä¸€æ£µæ ‘"><a class="header-anchor" aria-hidden="true" href="#finding-opportunities-to-shake-a-tree--å¯»æ‰¾æœºä¼šæ‘‡æ™ƒä¸€æ£µæ ‘">#</a>Finding opportunities to shake a tree  å¯»æ‰¾æœºä¼šæ‘‡æ™ƒä¸€æ£µæ ‘</h2>
<p>For illustrative purposes,Â <a href="https://github.com/malchata/webpack-tree-shaking-example" target="_blank" rel="nofollow">a sample one-page app</a>Â is available that demonstrates how tree shaking works. You can clone it and follow along if you like, but we&#x27;ll cover every step of the way together in this guide, so cloning isn&#x27;t necessary (unless hands-on learning is your thing).</p>
<p>ä¸ºäº†ä¾¿äºè¯´æ˜ï¼Œæä¾›äº†ä¸€ä¸ªç¤ºä¾‹å•é¡µåº”ç”¨ç¨‹åºï¼Œç”¨äºæ¼”ç¤ºæ‘‡æ ‘çš„å·¥ä½œåŸç†ã€‚å¦‚æœæ‚¨æ„¿æ„ï¼Œæ‚¨å¯ä»¥å…‹éš†å®ƒå¹¶è·Ÿéšå®ƒï¼Œä½†æˆ‘ä»¬å°†åœ¨æœ¬æŒ‡å—ä¸­ä¸€èµ·ä»‹ç»æ¯ä¸€æ­¥ï¼Œå› æ­¤å…‹éš†ä¸æ˜¯å¿…éœ€çš„ï¼ˆé™¤éæ‚¨å–œæ¬¢åŠ¨æ‰‹å­¦ä¹ ï¼‰ã€‚</p>
<p>The sample app is a searchable database of guitar effect pedals. You enter a query and a list of effect pedals will appear.</p>
<p>ç¤ºä¾‹åº”ç”¨æ˜¯å‰ä»–æ•ˆæœè¸æ¿çš„å¯æœç´¢æ•°æ®åº“ã€‚æ‚¨è¾“å…¥æŸ¥è¯¢ï¼Œå°†å‡ºç°æ•ˆæœè¸æ¿åˆ—è¡¨ã€‚</p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231116112856.png" alt="20231116112856"/></p>
<p>The behavior that drives this app is separated into vendor (i.e.,Â <a href="https://preactjs.com/" target="_blank" rel="nofollow">Preact</a>Â andÂ <a href="https://emotion.sh/" target="_blank" rel="nofollow">Emotion</a>) and app-specific code bundles (or &quot;chunks&quot;, as webpack calls them):</p>
<p>é©±åŠ¨æ­¤åº”ç”¨ç¨‹åºçš„è¡Œä¸ºåˆ†ä¸ºä¾›åº”å•†ï¼ˆå³ Preact å’Œ Emotionï¼‰å’Œç‰¹å®šäºåº”ç”¨ç¨‹åºçš„ä»£ç åŒ…ï¼ˆæˆ– webpack ç§°ä¹‹ä¸ºâ€œå—â€ï¼‰ï¼š</p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231116112919.png" alt="20231116112919"/></p>
<p>The JavaScript bundles shown in the figure above are production builds, meaning they&#x27;re optimized through uglification. 21.1 KB for an app-specific bundle isn&#x27;t bad, but it should be noted that no tree shaking is occurring whatsoever. Let&#x27;s look at the app code and see what can be done to fix that.</p>
<p>ä¸Šå›¾ä¸­æ˜¾ç¤ºçš„ JavaScript åŒ…æ˜¯ç”Ÿäº§ç‰ˆæœ¬ï¼Œè¿™æ„å‘³ç€å®ƒä»¬é€šè¿‡ä¸‘åŒ–è¿›è¡Œäº†ä¼˜åŒ–ã€‚21.1 KB å¯¹äºç‰¹å®šäºåº”ç”¨ç¨‹åºçš„æ†ç»‘åŒ…æ¥è¯´è¿˜ä¸é”™ï¼Œä½†åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œæ²¡æœ‰å‘ç”Ÿä»»ä½•æ‘‡æ ‘ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹åº”ç”¨ä»£ç ï¼Œçœ‹çœ‹å¯ä»¥åšäº›ä»€ä¹ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<div class="island-directive info"><p class="island-directive-title">INFO</p><div class="island-directive-content"><p><strong>Note:</strong>Â If you don&#x27;t care for a long-winded explanation, and want to dive into code, go ahead and check outÂ <a href="https://github.com/malchata/webpack-tree-shaking-example/tree/tree-shake" target="_blank" rel="nofollow">theÂ <code>tree-shake</code>Â branch</a>Â in the app&#x27;s GitHub repo. You can alsoÂ <a href="https://github.com/malchata/webpack-tree-shaking-example/compare/tree-shake" target="_blank" rel="nofollow">diff this branch</a>Â to see exactly what was changed to make tree shaking work!</p><p>æ³¨æ„ï¼šå¦‚æœæ‚¨ä¸å…³å¿ƒå†—é•¿çš„è§£é‡Šï¼Œå¹¶ä¸”æƒ³è¦æ·±å…¥ç ”ç©¶ä»£ç ï¼Œè¯·ç»§ç»­æŸ¥çœ‹åº”ç”¨ç¨‹åºçš„ GitHub å­˜å‚¨åº“ä¸­çš„Â <code>tree-shake</code>Â åˆ†æ”¯ã€‚æ‚¨è¿˜å¯ä»¥æ¯”è¾ƒæ­¤åˆ†æ”¯ï¼Œä»¥ç¡®åˆ‡åœ°æŸ¥çœ‹ä¸ºä½¿æ‘‡æ ‘å·¥ä½œè€Œæ›´æ”¹çš„å†…å®¹ï¼</p></div></div>
<p>In any application, finding tree shaking opportunities are going to involve looking for staticÂ <code>import</code>Â statements.Â <a href="https://github.com/malchata/webpack-tree-shaking-example/blob/master/src/components/FilterablePedalList/FilterablePedalList.js#L4" target="_blank" rel="nofollow">Near the top of the main component file</a>, you&#x27;ll see a line like this:</p>
<p>åœ¨ä»»ä½•åº”ç”¨ç¨‹åºä¸­ï¼Œå¯»æ‰¾æ‘‡æ ‘æœºä¼šéƒ½å°†æ¶‰åŠå¯»æ‰¾é™æ€Â <code>import</code>Â è¯­å¥ã€‚åœ¨ä¸»ç»„ä»¶æ–‡ä»¶çš„é¡¶éƒ¨é™„è¿‘ï¼Œæ‚¨ä¼šçœ‹åˆ°å¦‚ä¸‹è¡Œï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#81A1C1">import</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">*</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">as</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">utils</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">from</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">../../utils/utils</span><span style="color:#ECEFF4">&quot;</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span></div></div>
<p>You canÂ <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import#description" target="_blank" rel="nofollow">import ES6 modules in a variety of ways</a>, but ones like this should get your attention. This specific line says &quot;<code>import</code>Â <em>everything</em>Â from theÂ <code>utils</code>Â module, and put it in a namespace calledÂ <code>utils</code>.&quot; The big question to ask here is, &quot;just how muchÂ <em>stuff</em>Â is in that module?&quot;</p>
<p>æ‚¨å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å¯¼å…¥ ES6 æ¨¡å—ï¼Œä½†åƒè¿™æ ·çš„æ¨¡å—åº”è¯¥å¼•èµ·æ‚¨çš„æ³¨æ„ã€‚è¿™ä¸€è¡Œè¯´â€œÂ <code>import</code>Â <code>utils</code>Â æ¨¡å—ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå¹¶å°†å…¶æ”¾åœ¨åä¸ºÂ <code>utils</code>Â çš„å‘½åç©ºé—´ä¸­ã€‚è¿™é‡Œè¦é—®çš„ä¸€ä¸ªå¤§é—®é¢˜æ˜¯ï¼Œâ€œé‚£ä¸ªæ¨¡å—ä¸­åˆ°åº•æœ‰å¤šå°‘ä¸œè¥¿ï¼Ÿ</p>
<p>If you look atÂ <a href="https://github.com/malchata/webpack-tree-shaking-example/blob/master/src/utils/utils.js" target="_blank" rel="nofollow">theÂ <code>utils</code>Â module source code</a>, you&#x27;ll find there&#x27;s about 1,300 lines of code.</p>
<p>å¦‚æœä½ çœ‹ä¸€ä¸‹Â <code>utils</code>Â æ¨¡å—çš„æºä»£ç ï¼Œä½ ä¼šå‘ç°å¤§çº¦æœ‰ 1,300 è¡Œä»£ç ã€‚</p>
<p>Do youÂ <em>need</em>Â all that stuff? Let&#x27;s double check by searchingÂ <a href="https://github.com/malchata/webpack-tree-shaking-example/blob/master/src/components/FilterablePedalList/FilterablePedalList.js" target="_blank" rel="nofollow">the main component file</a>Â that imports theÂ <code>utils</code>Â module to see how many instances of that namespace come up.</p>
<p>ä½ éœ€è¦æ‰€æœ‰è¿™äº›ä¸œè¥¿å—ï¼Ÿè®©æˆ‘ä»¬é€šè¿‡æœç´¢å¯¼å…¥Â <code>utils</code>Â æ¨¡å—çš„ä¸»ç»„ä»¶æ–‡ä»¶æ¥ä»”ç»†æ£€æŸ¥ï¼Œçœ‹çœ‹è¯¥å‘½åç©ºé—´æœ‰å¤šå°‘ä¸ªå®ä¾‹ã€‚</p>
<p><img src="https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231116113023.png" alt="20231116113023"/>
<em>TheÂ <code>utils</code>Â namespace we&#x27;ve imported tons of modules from is only invoked three times within the main component file.</em></p>
<p><em>æˆ‘ä»¬ä»ä¸­å¯¼å…¥äº†å¤§é‡æ¨¡å—çš„Â <code>utils</code>Â å‘½åç©ºé—´åœ¨ä¸»ç»„ä»¶æ–‡ä»¶ä¸­åªè°ƒç”¨äº†ä¸‰æ¬¡ã€‚</em></p>
<p>As it turns out, theÂ <code>utils</code>Â namespace appears in only three spots in our applicationâ€”but for what functions? If you take a look at the main component file again, it appears to be only one function, which isÂ <code>utils.simpleSort</code>, which is used to sort the search results list by a number of criteria when the sorting dropdowns are changed:</p>
<p>äº‹å®è¯æ˜ï¼ŒÂ <code>utils</code>Â å‘½åç©ºé—´åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­åªå‡ºç°åœ¨ä¸‰ä¸ªä½ç½®ï¼Œä½†ç”¨äºä»€ä¹ˆåŠŸèƒ½ï¼Ÿå¦‚æœå†æ¬¡æŸ¥çœ‹ä¸»ç»„ä»¶æ–‡ä»¶ï¼Œå®ƒä¼¼ä¹åªæœ‰ä¸€ä¸ªå‡½æ•°ï¼Œå³Â <code>utils.simpleSort</code>Â ï¼Œç”¨äºåœ¨æ›´æ”¹æ’åºä¸‹æ‹‰åˆ—è¡¨æ—¶æŒ‰å¤šä¸ªæ¡ä»¶å¯¹æœç´¢ç»“æœåˆ—è¡¨è¿›è¡Œæ’åºï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#81A1C1">if</span><span style="color:#D8DEE9FF"> (</span><span style="color:#81A1C1">this</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">state</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">sortBy</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">===</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">model</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// `simpleSort` gets used here...</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">json</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">utils</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">simpleSort</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">json</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">model</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">this</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">state</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">sortOrder</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">else</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">if</span><span style="color:#D8DEE9FF"> (</span><span style="color:#81A1C1">this</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">state</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">sortBy</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">===</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">type</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// ..and here...</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">json</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">utils</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">simpleSort</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">json</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">type</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">this</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">state</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">sortOrder</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">else</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// ..and here.</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">json</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">utils</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">simpleSort</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">json</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">manufacturer</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">this</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">state</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">sortOrder</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span><span class="line-number">6</span><span class="line-number">7</span><span class="line-number">8</span><span class="line-number">9</span><span class="line-number">10</span></div></div>
<p>Out of a 1,300 line file with a bunch of exports, only one of them is used. This results in shipping a lot of unused JavaScript.</p>
<p>åœ¨åŒ…å«ä¸€å †å¯¼å‡ºçš„ 1,300 è¡Œæ–‡ä»¶ä¸­ï¼Œåªä½¿ç”¨äº†å…¶ä¸­ä¸€ä¸ªã€‚è¿™å¯¼è‡´å¤§é‡æœªä½¿ç”¨çš„ JavaScript å‘å¸ƒã€‚</p>
<div class="island-directive info"><p class="island-directive-title">INFO</p><div class="island-directive-content"><p><strong>Note:</strong> This project is purposefully kept simple, so it&#x27;s a bit easier in this case to find out where the bloat is coming from. In large projects with many modules, however, things get more complicated. Tools such asÂ <a href="https://www.npmjs.com/package/webpack-bundle-analyzer" target="_blank" rel="nofollow">Webpack Bundle Analyzer</a>Â andÂ <a href="https://www.npmjs.com/package/source-map-explorer" target="_blank" rel="nofollow">source-map-explorer</a>Â may provide further insight.</p><p>æ³¨æ„ï¼šè¿™ä¸ªé¡¹ç›®ç‰¹æ„ä¿æŒç®€å•ï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰¾å‡ºè†¨èƒ€çš„æ¥æºä¼šæ›´å®¹æ˜“ä¸€äº›ã€‚ç„¶è€Œï¼Œåœ¨å…·æœ‰è®¸å¤šæ¨¡å—çš„å¤§å‹é¡¹ç›®ä¸­ï¼Œäº‹æƒ…å˜å¾—æ›´åŠ å¤æ‚ã€‚Webpack Bundle Analyzer å’Œ source-map-explorer ç­‰å·¥å…·å¯èƒ½ä¼šæä¾›è¿›ä¸€æ­¥çš„è§è§£ã€‚</p></div></div>
<p>While this example app is admittedly a bit contrived, it doesn&#x27;t change the fact that this synthetic sort of scenario resembles actual optimization opportunities you may encounter in a production web app. Now that you&#x27;ve identified an opportunity for tree shaking to be useful, how is it actually done?</p>
<p>è™½ç„¶æ­¤ç¤ºä¾‹åº”ç”¨ç¡®å®æœ‰ç‚¹åšä½œï¼Œä½†å®ƒå¹¶æ²¡æœ‰æ”¹å˜è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå³è¿™ç§åˆæˆç±»å‹çš„æ–¹æ¡ˆç±»ä¼¼äºæ‚¨åœ¨ç”Ÿäº§ Web åº”ç”¨ä¸­å¯èƒ½é‡åˆ°çš„å®é™…ä¼˜åŒ–æœºä¼šã€‚æ—¢ç„¶æ‚¨å·²ç»ç¡®å®šäº†æ‘‡æ ‘æœ‰ç”¨çš„æœºä¼šï¼Œé‚£ä¹ˆå®ƒå®é™…ä¸Šæ˜¯å¦‚ä½•å®Œæˆçš„ï¼Ÿ</p>
<h2 id="keeping-babel-from-transpiling-es6-modules-to-commonjs-modules--é˜²æ­¢-babel-å°†-es6-æ¨¡å—è½¬è¯‘ä¸º-commonjs-æ¨¡å—"><a class="header-anchor" aria-hidden="true" href="#keeping-babel-from-transpiling-es6-modules-to-commonjs-modules--é˜²æ­¢-babel-å°†-es6-æ¨¡å—è½¬è¯‘ä¸º-commonjs-æ¨¡å—">#</a>Keeping Babel from transpiling ES6 modules to CommonJS modules  é˜²æ­¢ Babel å°† ES6 æ¨¡å—è½¬è¯‘ä¸º CommonJS æ¨¡å—</h2>
<p><a href="https://babeljs.io/" target="_blank" rel="nofollow">Babel</a>Â is an indispensable tool, but it may make the effects of tree shaking a bit more difficult to observe. If you&#x27;re usingÂ <a href="https://babeljs.io/docs/en/babel-preset-env" target="_blank" rel="nofollow"><code>@babel/preset-env</code></a>, BabelÂ <em>may</em>Â transform ES6 modules into more widely compatible CommonJS modulesâ€”that is, modules youÂ <code>require</code>Â instead ofÂ <code>import</code>.</p>
<p>å·´åˆ«å¡”æ˜¯ä¸å¯æˆ–ç¼ºçš„å·¥å…·ï¼Œä½†å®ƒå¯èƒ½ä¼šä½¿æ ‘æœ¨æ‘‡æ™ƒçš„å½±å“æ›´éš¾è§‚å¯Ÿã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„Â <code>@babel/preset-env</code>Â æ˜¯ ï¼ŒBabel å¯èƒ½ä¼šå°† ES6 æ¨¡å—è½¬æ¢ä¸ºæ›´å¹¿æ³›å…¼å®¹çš„ CommonJS æ¨¡å—ï¼Œå³ uÂ <code>require</code>Â æ¨¡å—è€Œä¸æ˜¯Â <code>import</code>Â .</p>
<p>Because tree shaking is more difficult to do for CommonJS modules, webpack won&#x27;t know what to prune from bundles if you decide to use them. The solution is to configureÂ <code>@babel/preset-env</code>Â to explicitly leave ES6 modules alone. Wherever you configure Babelâ€”be it inÂ <code>babel.config.js</code>Â orÂ <code>package.json</code>â€”this involves adding a little something extra:</p>
<p>å› ä¸º CommonJS æ¨¡å—æ›´éš¾åšæ‘‡æ ‘ï¼Œæ‰€ä»¥å¦‚æœä½ å†³å®šä½¿ç”¨å®ƒä»¬ï¼Œwebpack å°†ä¸çŸ¥é“è¦ä»æ†ç»‘åŒ…ä¸­åˆ é™¤ä»€ä¹ˆã€‚è§£å†³æ–¹æ¡ˆæ˜¯é…ç½®ä¸ºÂ <code>@babel/preset-env</code>Â æ˜¾å¼ä¿ç•™ ES6 æ¨¡å—ã€‚æ— è®ºä½ åœ¨ä»€ä¹ˆåœ°æ–¹é…ç½® Babelâ€”â€”æ— è®ºæ˜¯åœ¨ inÂ <code>babel.config.js</code>Â ä¸­è¿˜æ˜¯åœ¨Â <code>package.json</code>Â - è¿™éƒ½æ¶‰åŠæ·»åŠ ä¸€äº›é¢å¤–çš„ä¸œè¥¿ï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#616E88">// babel.config.js</span></span>
<span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">presets</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> [</span></span>
<span class="line"><span style="color:#D8DEE9FF">    [</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">@babel/preset-env</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">        </span><span style="color:#88C0D0">modules</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">false</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">}</span></span>
<span class="line"><span style="color:#D8DEE9FF">    ]</span></span>
<span class="line"><span style="color:#D8DEE9FF">  ]</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span><span class="line-number">6</span><span class="line-number">7</span><span class="line-number">8</span><span class="line-number">9</span><span class="line-number">10</span></div></div>
<p>SpecifyingÂ <code>modules: false</code>Â in yourÂ <code>@babel/preset-env</code>Â config gets Babel to behave as desired, which allows webpack to analyze your dependency tree and shake off unused dependencies.</p>
<p>åœ¨ä½ çš„Â <code>@babel/preset-env</code>Â é…ç½®ä¸­æŒ‡å®šÂ <code>modules: false</code>Â å¯ä»¥è®© Babel æŒ‰ç…§é¢„æœŸè¿è¡Œï¼Œè¿™å…è®¸ webpack åˆ†æä½ çš„ä¾èµ–æ ‘å¹¶æ‘†è„±æœªä½¿ç”¨çš„ä¾èµ–ã€‚</p>
<h2 id="keeping-side-effects-in-mind--ç‰¢è®°å‰¯ä½œç”¨"><a class="header-anchor" aria-hidden="true" href="#keeping-side-effects-in-mind--ç‰¢è®°å‰¯ä½œç”¨">#</a>Keeping side effects in mind  ç‰¢è®°å‰¯ä½œç”¨</h2>
<p>Another aspect to consider when shaking dependencies from your app is whether your project&#x27;s modules have side effects. An example of a side effect is when a function modifies something outside of its own scope, which is aÂ <em>side effect</em>Â of its execution:</p>
<p>ä»åº”ç”¨ä¸­æ‘‡åŠ¨ä¾èµ–é¡¹æ—¶è¦è€ƒè™‘çš„å¦ä¸€ä¸ªæ–¹é¢æ˜¯é¡¹ç›®çš„æ¨¡å—æ˜¯å¦æœ‰å‰¯ä½œç”¨ã€‚å‰¯ä½œç”¨çš„ä¸€ä¸ªä¾‹å­æ˜¯ï¼Œå½“ä¸€ä¸ªå‡½æ•°ä¿®æ”¹äº†å®ƒè‡ªå·±çš„èŒƒå›´ä¹‹å¤–çš„ä¸œè¥¿æ—¶ï¼Œè¿™æ˜¯å…¶æ‰§è¡Œçš„å‰¯ä½œç”¨ï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#81A1C1">let</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">fruits</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> [</span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">apple</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">orange</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">pear</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9FF">]</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9">console</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">log</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">fruits</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span><span style="color:#D8DEE9FF"> </span><span style="color:#616E88">// (3) [&quot;apple&quot;, &quot;orange&quot;, &quot;pear&quot;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">addFruit</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">function</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">fruit</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">fruits</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">push</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">fruit</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0">addFruit</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">kiwi</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9">console</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">log</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">fruits</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span><span style="color:#D8DEE9FF"> </span><span style="color:#616E88">// (4) [&quot;apple&quot;, &quot;orange&quot;, &quot;pear&quot;, &quot;kiwi&quot;]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span><span class="line-number">6</span><span class="line-number">7</span><span class="line-number">8</span><span class="line-number">9</span><span class="line-number">10</span><span class="line-number">11</span></div></div>
<p>In this example,Â <code>addFruit</code>Â produces a side effect when it modifies theÂ <code>fruits</code>Â array, which is outside its scope.</p>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå½“å®ƒä¿®æ”¹Â <code>fruits</code>Â æ•°ç»„æ—¶ä¼šäº§ç”Ÿå‰¯ä½œç”¨ï¼ŒÂ <code>addFruit</code>Â è¿™è¶…å‡ºäº†å…¶èŒƒå›´ã€‚</p>
<p>Side effects also apply to ES6 modules, and that matters in the context of tree shaking. Modules that take predictable inputs and produce equally predictable outputs without modifying anything outside of their own scope are dependencies that can be safely dropped if we&#x27;re not using them. They&#x27;re self-contained,Â <em>modular</em>Â pieces of code. Hence, &quot;modules&quot;.</p>
<p>å‰¯ä½œç”¨ä¹Ÿé€‚ç”¨äº ES6 æ¨¡å—ï¼Œè¿™åœ¨æ‘‡æ ‘çš„èƒŒæ™¯ä¸‹å¾ˆé‡è¦ã€‚é‡‡ç”¨å¯é¢„æµ‹çš„è¾“å…¥å¹¶äº§ç”ŸåŒæ ·å¯é¢„æµ‹çš„è¾“å‡ºè€Œä¸ä¿®æ”¹å…¶è‡ªèº«èŒƒå›´ä¹‹å¤–çš„ä»»ä½•å†…å®¹çš„æ¨¡å—æ˜¯ä¾èµ–é¡¹ï¼Œå¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨å®ƒä»¬ï¼Œåˆ™å¯ä»¥å®‰å…¨åœ°åˆ é™¤å®ƒä»¬ã€‚å®ƒä»¬æ˜¯ç‹¬ç«‹çš„æ¨¡å—åŒ–ä»£ç ç‰‡æ®µã€‚å› æ­¤ï¼Œâ€œæ¨¡å—â€ã€‚</p>
<p>Where webpack is concerned, a hint can be used to specify that a package and its dependencies are free of side effects by specifyingÂ <code>&quot;sideEffects&quot;: false</code>Â in a project&#x27;sÂ <code>package.json</code>Â file:</p>
<p>å°± webpack è€Œè¨€ï¼Œå¯ä»¥é€šè¿‡åœ¨é¡¹ç›®Â <code>package.json</code>Â æ–‡ä»¶ä¸­æŒ‡å®šæ¥æŒ‡å®šÂ <code>&quot;sideEffects&quot;: false</code>Â åŒ…åŠå…¶ä¾èµ–é¡¹æ²¡æœ‰å‰¯ä½œç”¨ï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">name</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9FF">: </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">webpack-tree-shaking-example</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">version</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9FF">: </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">1.0.0</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">sideEffects</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9FF">: </span><span style="color:#81A1C1">false</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span></div></div>
<p>Alternatively, you can tell webpack which specific files are not side effect-free:</p>
<p>æˆ–è€…ï¼Œä½ å¯ä»¥å‘Šè¯‰ webpack å“ªäº›ç‰¹å®šæ–‡ä»¶ä¸æ˜¯æ²¡æœ‰å‰¯ä½œç”¨çš„ï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">name</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9FF">: </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">webpack-tree-shaking-example</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">version</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9FF">: </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">1.0.0</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">sideEffects</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9FF">: [</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">./src/utils/utils.js</span><span style="color:#ECEFF4">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  ]</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span><span class="line-number">6</span><span class="line-number">7</span></div></div>
<p>In the latter example, any file that isn&#x27;t specified will be assumed to be free of side effects. If you don&#x27;t want to add this to yourÂ <code>package.json</code>Â file,Â <a href="https://github.com/webpack/webpack/issues/6065#issuecomment-351060570" target="_blank" rel="nofollow">you can also specify this flag in your webpack config viaÂ <code>module.rules</code></a>.</p>
<p>åœ¨åä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œä»»ä½•æœªæŒ‡å®šçš„æ–‡ä»¶éƒ½å°†è¢«å‡å®šä¸ºæ²¡æœ‰å‰¯ä½œç”¨ã€‚å¦‚æœæ‚¨ä¸æƒ³å°†å…¶æ·»åŠ åˆ°æ–‡ä»¶ä¸­Â <code>package.json</code>Â ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Â <code>module.rules</code>Â åœ¨ webpack é…ç½®ä¸­æŒ‡å®šæ­¤æ ‡å¿—ã€‚</p>
<h2 id="importing-only-whats-needed--ä»…å¯¼å…¥æ‰€éœ€å†…å®¹"><a class="header-anchor" aria-hidden="true" href="#importing-only-whats-needed--ä»…å¯¼å…¥æ‰€éœ€å†…å®¹">#</a>Importing only what&#x27;s needed  ä»…å¯¼å…¥æ‰€éœ€å†…å®¹</h2>
<p>After instructing Babel to leave ES6 modules alone, a slight adjustment to ourÂ <code>import</code>Â syntax is required to bring in only the functions needed from theÂ <code>utils</code>Â module. In this guide&#x27;s example, all that&#x27;s needed is theÂ <code>simpleSort</code>Â function:</p>
<p>åœ¨æŒ‡ç¤º Babel ä¸ç†ä¼š ES6 æ¨¡å—ä¹‹åï¼Œéœ€è¦å¯¹æˆ‘ä»¬çš„Â <code>import</code>Â è¯­æ³•ç¨ä½œè°ƒæ•´ï¼Œä»¥ä»…å¼•å…¥Â <code>utils</code>Â æ¨¡å—æ‰€éœ€çš„å‡½æ•°ã€‚åœ¨æœ¬æŒ‡å—çš„ç¤ºä¾‹ä¸­ï¼Œåªéœ€è¦å‡½æ•°Â <code>simpleSort</code>Â ï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#81A1C1">import</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">simpleSort</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">from</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">../../utils/utils</span><span style="color:#ECEFF4">&quot;</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span></div></div>
<p>Because onlyÂ <code>simpleSort</code>Â is being imported instead of the entireÂ <code>utils</code>Â module, every instance ofÂ <code>utils.simpleSort</code>Â will need to changed toÂ <code>simpleSort</code>:</p>
<p>å› ä¸ºåªÂ <code>simpleSort</code>Â å¯¼å…¥è€Œä¸æ˜¯å¯¼å…¥æ•´ä¸ªÂ <code>utils</code>Â æ¨¡å—ï¼Œæ‰€ä»¥æ¯ä¸ªÂ <code>utils.simpleSort</code>Â å®ä¾‹éƒ½éœ€è¦æ›´æ”¹ä¸ºÂ <code>simpleSort</code>Â ï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#81A1C1">if</span><span style="color:#D8DEE9FF"> (</span><span style="color:#81A1C1">this</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">state</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">sortBy</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">===</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">model</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">json</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">simpleSort</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">json</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">model</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">this</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">state</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">sortOrder</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">else</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">if</span><span style="color:#D8DEE9FF"> (</span><span style="color:#81A1C1">this</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">state</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">sortBy</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">===</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">type</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">json</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">simpleSort</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">json</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">type</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">this</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">state</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">sortOrder</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">else</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">json</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">simpleSort</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">json</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">manufacturer</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">this</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">state</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">sortOrder</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span><span class="line-number">6</span><span class="line-number">7</span></div></div>
<p>This should be all that&#x27;s needed for tree shaking to work in this example. This is the webpack output before shaking the dependency tree:</p>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œè¿™åº”è¯¥æ˜¯æ‘‡æ ‘å·¥ä½œæ‰€éœ€çš„å…¨éƒ¨å†…å®¹ã€‚è¿™æ˜¯åŠ¨æ‘‡ä¾èµ–æ ‘ä¹‹å‰çš„ webpack è¾“å‡ºï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#D8DEE9FF">                 </span><span style="color:#D8DEE9">Asset</span><span style="color:#D8DEE9FF">      </span><span style="color:#D8DEE9">Size</span><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">Chunks</span><span style="color:#D8DEE9FF">             </span><span style="color:#D8DEE9">Chunk</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">Names</span></span>
<span class="line"><span style="color:#D8DEE9">js</span><span style="color:#81A1C1">/</span><span style="color:#D8DEE9">vendors</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9FF">16262743</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">js</span><span style="color:#D8DEE9FF">  </span><span style="color:#B48EAD">37.1</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">KiB</span><span style="color:#D8DEE9FF">       </span><span style="color:#B48EAD">0</span><span style="color:#D8DEE9FF">  [</span><span style="color:#D8DEE9">emitted</span><span style="color:#D8DEE9FF">]  </span><span style="color:#D8DEE9">vendors</span></span>
<span class="line"><span style="color:#D8DEE9FF">   </span><span style="color:#D8DEE9">js</span><span style="color:#81A1C1">/</span><span style="color:#D8DEE9">main</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9FF">797</span><span style="color:#D8DEE9">ebb8b</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">js</span><span style="color:#D8DEE9FF">  </span><span style="color:#B48EAD">20.8</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">KiB</span><span style="color:#D8DEE9FF">       </span><span style="color:#B48EAD">1</span><span style="color:#D8DEE9FF">  [</span><span style="color:#D8DEE9">emitted</span><span style="color:#D8DEE9FF">]  </span><span style="color:#D8DEE9">main</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span></div></div>
<p>This is the outputÂ <em>after</em>Â tree shaking is successful:</p>
<p>è¿™æ˜¯æ‘‡æ ‘æˆåŠŸåçš„è¾“å‡ºï¼š</p>
<div class="language-js line-numbers-mode" style="background-color:#2e3440ff"><button class="copy"></button><span class="lang">js</span><pre><code class=""><span class="line"><span style="color:#D8DEE9FF">                 </span><span style="color:#D8DEE9">Asset</span><span style="color:#D8DEE9FF">      </span><span style="color:#D8DEE9">Size</span><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">Chunks</span><span style="color:#D8DEE9FF">             </span><span style="color:#D8DEE9">Chunk</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">Names</span></span>
<span class="line"><span style="color:#D8DEE9">js</span><span style="color:#81A1C1">/</span><span style="color:#D8DEE9">vendors</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9FF">45</span><span style="color:#D8DEE9">ce9b64</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">js</span><span style="color:#D8DEE9FF">  </span><span style="color:#B48EAD">36.9</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">KiB</span><span style="color:#D8DEE9FF">       </span><span style="color:#B48EAD">0</span><span style="color:#D8DEE9FF">  [</span><span style="color:#D8DEE9">emitted</span><span style="color:#D8DEE9FF">]  </span><span style="color:#D8DEE9">vendors</span></span>
<span class="line"><span style="color:#D8DEE9FF">   </span><span style="color:#D8DEE9">js</span><span style="color:#81A1C1">/</span><span style="color:#D8DEE9">main</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9FF">559652</span><span style="color:#D8DEE9">be</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">js</span><span style="color:#D8DEE9FF">  </span><span style="color:#B48EAD">8.46</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">KiB</span><span style="color:#D8DEE9FF">       </span><span style="color:#B48EAD">1</span><span style="color:#D8DEE9FF">  [</span><span style="color:#D8DEE9">emitted</span><span style="color:#D8DEE9FF">]  </span><span style="color:#D8DEE9">main</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span></div></div>
<p>While both bundles shrank, it&#x27;s really theÂ <code>main</code>Â bundle that benefits most. By shaking off the unused parts of theÂ <code>utils</code>Â module, theÂ <code>main</code>Â bundle shrinks by about 60%. This not only lowers the amount of time the script takes to the download, but processing time as well.</p>
<p>è™½ç„¶ä¸¤ä¸ªæ†ç»‘åŒ…éƒ½ç¼©å°äº†ï¼Œä½†å—ç›Šæœ€å¤§çš„ç¡®å®æ˜¯Â <code>main</code>Â æ†ç»‘åŒ…ã€‚é€šè¿‡ç”©æ‰Â <code>utils</code>Â æ¨¡å—ä¸­æœªä½¿ç”¨çš„éƒ¨åˆ†ï¼ŒÂ <code>main</code>Â æŸæ”¶ç¼©çº¦60%ã€‚è¿™ä¸ä»…å‡å°‘äº†è„šæœ¬ä¸‹è½½æ‰€éœ€çš„æ—¶é—´ï¼Œè¿˜å‡å°‘äº†å¤„ç†æ—¶é—´ã€‚</p>
<h2 id="go-shake-some-treeså»æ‘‡æ™ƒä¸€äº›æ ‘"><a class="header-anchor" aria-hidden="true" href="#go-shake-some-treeså»æ‘‡æ™ƒä¸€äº›æ ‘">#</a>Go shake some trees!Â å»æ‘‡æ™ƒä¸€äº›æ ‘ï¼</h2>
<p>Whatever mileage you get out of tree shaking depends on your app and its dependencies and architecture. Try it! If you know for a fact you haven&#x27;t set up your module bundler to perform this optimization, there&#x27;s no harm trying and seeing how it benefits your application.</p>
<p>æ— è®ºæ‚¨ä»æ‘‡æ ‘ä¸­è·å¾—ä»€ä¹ˆå¥½å¤„ï¼Œéƒ½å–å†³äºæ‚¨çš„åº”ç”¨åŠå…¶ä¾èµ–é¡¹å’Œä½“ç³»ç»“æ„ã€‚è¯•è¯•å§ï¼å¦‚æœæ‚¨çŸ¥é“æ‚¨è¿˜æ²¡æœ‰è®¾ç½®æ¨¡å—æ†ç»‘å™¨æ¥æ‰§è¡Œæ­¤ä¼˜åŒ–ï¼Œé‚£ä¹ˆå°è¯•å¹¶äº†è§£å®ƒå¦‚ä½•ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºå—ç›Šå¹¶æ²¡æœ‰ä»€ä¹ˆåå¤„ã€‚</p>
<p>You may realize a significant performance gain from tree shaking, or not much at all. But by configuring your build system to take advantage of this optimization in production builds and selectively importing only what your application needs, you&#x27;ll be proactively keeping your application bundles as small as possible.</p>
<p>æ‚¨å¯èƒ½ä¼šä»æ‘‡æ ‘ä¸­è·å¾—æ˜¾ç€çš„æ€§èƒ½æå‡ï¼Œæˆ–è€…æ ¹æœ¬æ²¡æœ‰å®ç°ã€‚ä½†æ˜¯ï¼Œé€šè¿‡é…ç½®æ„å»ºç³»ç»Ÿä»¥åœ¨ç”Ÿäº§æ„å»ºä¸­åˆ©ç”¨æ­¤ä¼˜åŒ–ï¼Œå¹¶æœ‰é€‰æ‹©åœ°ä»…å¯¼å…¥åº”ç”¨ç¨‹åºæ‰€éœ€çš„å†…å®¹ï¼Œæ‚¨å°†ä¸»åŠ¨ä¿æŒåº”ç”¨ç¨‹åºæ†ç»‘åŒ…å°½å¯èƒ½å°ã€‚</p>
<p>_Special thanks to Kristofer Baxter,Â <a href="https://web.dev/authors/developit" target="_blank" rel="nofollow">Jason Miller</a>,Â <a href="https://web.dev/authors/addyosmani" target="_blank" rel="nofollow">Addy Osmani</a>,Â <a href="https://web.dev/authors/jeffposnick" target="_blank" rel="nofollow">Jeff Posnick</a>, Sam Saccone, andÂ <a href="https://web.dev/authors/philipwalton" target="_blank" rel="nofollow">Philip Walton</a>Â for their valuable feedback, which significantly improved the quality of this article.</p>
<p>ç‰¹åˆ«æ„Ÿè°¢ Kristofer Baxterã€Jason Millerã€Addy Osmaniã€Jeff Posnickã€Sam Saccone å’Œ Philip Walton çš„å®è´µåé¦ˆï¼Œè¿™å¤§å¤§æé«˜äº†æœ¬æ–‡çš„è´¨é‡ã€‚_</p><!--/$--></div><footer mt="8"><div class="xs:flex" p="b-5" justify="between" items-center="~"><div flex="" text="sm text-2" leading-6="~" leading-8="sm:~" font-medium=""><p>Last Updated: </p><span>2023/11/16 20:32:02</span></div></div><div flex="~ col sm:row" justify="sm:around" gap="2" divider-top="" pt="6"><div flex="~ col" class="_prev_1f77m_13"><a href="/chrome/performance/optimize-resource-loading" class="_pager-link_1f77m_20"><span class="_desc_1f77m_43">Previous Page</span><span class="_title_1f77m_34">optimize-resource-loading ä¼˜åŒ–èµ„æºè´Ÿè½½</span></a></div><div flex="~ col" class="_next_1f77m_16"><a href="/chrome/performance/welcome-copy" class="_pager-link_1f77m_20 _next_1f77m_16"><span class="_desc_1f77m_43">Next page</span><span class="_title_1f77m_34">asdf</span></a></div></div></footer></div></div><div relative="~" display="none lg:block" order="2" flex="1" p="l-8" class="max-w-256px"><div class="_aside-container_5cssi_32"><div flex="~ col" p="b-8" style="min-height:calc(100vh - (var(--island-nav-height-desktop) + 32px))"><div><div flex="~ col 1"><div display="lg:block"><div relative="" divider-left="" p="l-4" text="13px" font-medium="" id="aside-container"><div absolute="" pos="top-33px" opacity="0" w="1px" h="18px" bg="brand" style="left:-1px;transition:top 0.25s cubic-bezier(0, 1, 0.5, 1), background-color 0.5s, opacity 0.25s" id="aside-marker"></div><div block="~" leading-7="" text="13px" font="semibold">ç›®å½•</div><nav><ul relative=""><li><a href="#what-is-tree-shaking--ä»€ä¹ˆæ˜¯æ‘‡æ ‘" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">What is tree shaking?  ä»€ä¹ˆæ˜¯æ‘‡æ ‘ï¼Ÿ</a></li><li><a href="#finding-opportunities-to-shake-a-tree--å¯»æ‰¾æœºä¼šæ‘‡æ™ƒä¸€æ£µæ ‘" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">Finding opportunities to shake a tree  å¯»æ‰¾æœºä¼šæ‘‡æ™ƒä¸€æ£µæ ‘</a></li><li><a href="#keeping-babel-from-transpiling-es6-modules-to-commonjs-modules--é˜²æ­¢-babel-å°†-es6-æ¨¡å—è½¬è¯‘ä¸º-commonjs-æ¨¡å—" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">Keeping Babel from transpiling ES6 modules to CommonJS modules  é˜²æ­¢ Babel å°† ES6 æ¨¡å—è½¬è¯‘ä¸º CommonJS æ¨¡å—</a></li><li><a href="#keeping-side-effects-in-mind--ç‰¢è®°å‰¯ä½œç”¨" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">Keeping side effects in mind  ç‰¢è®°å‰¯ä½œç”¨</a></li><li><a href="#importing-only-whats-needed--ä»…å¯¼å…¥æ‰€éœ€å†…å®¹" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">Importing only what&#x27;s needed  ä»…å¯¼å…¥æ‰€éœ€å†…å®¹</a></li><li><a href="#go-shake-some-treeså»æ‘‡æ™ƒä¸€äº›æ ‘" block="" leading-7="" text="text-2" avoid-text-overflow="" hover="text-text-1" transition="color duration-300" style="padding-left:0">Go shake some trees!Â å»æ‘‡æ™ƒä¸€äº›æ ‘ï¼</a></li></ul></nav></div></div></div></div></div></div></div></div></div></section></div></div>
      <script>window.ISLAND_PAGE_DATA={"siteData":{"lang":"en-US","title":"bekaçš„åšå®¢","description":"Island","themeConfig":{"lastUpdatedText":"ä¸Šæ¬¡æ›´æ–°","outlineTitle":"ç›®å½•","nav":[{"text":"Article","link":"/article/astro","activeMatch":"/article/"},{"text":"Article-set","link":"/article-set/URL-SET","activeMatch":"/article-set/"},{"text":"Chrome","link":"/chrome/fast-load-time/user-centric-performance-metrics","activeMatch":"/chrome/"},{"text":"Design-pattern","link":"/design-pattern/indexs","activeMatch":"/design-pattern/"},{"text":"Open-source","link":"/open-source/delay","activeMatch":"/open-source/"},{"text":"Promise","link":"/promise/first-resolved","activeMatch":"/promise/"},{"text":"Typescript","link":"/typescript/tip","activeMatch":"/typescript/"},{"text":"Webpack","link":"/webpack/build-result","activeMatch":"/webpack/"}],"sidebar":{"article":[{"text":"Article","items":[{"text":"Astro","link":"/article/astro"},{"text":"æ–°ä¸€ä»£å…¨æ ˆæ¡†æ¶ Fresh","link":"/article/fresh"}],"collapsable":true}],"article-set":[{"text":"Article-set","items":[{"text":"å¤–é“¾åˆé›†","link":"/article-set/URL-SET"},{"text":"requestAnimationFrame","link":"/article-set/raf"}],"collapsable":true}],"chrome":[{"text":"Chrome","items":[{"text":"ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ•ˆæœæŒ‡æ ‡","link":"/chrome/fast-load-time/user-centric-performance-metrics"}],"collapsable":true},{"text":"æµè§ˆå™¨å·¥ä½œåŸç†","items":[{"text":"Web æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” é«˜çº§ä½“ç³»ç»“æ„ï¼ˆç¬¬ 1 éƒ¨åˆ†ï¼‰","link":"/chrome/how-web-browser-works/part-1_high-level-architecture"},{"text":"Web æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” å¯¼èˆªé˜¶æ®µï¼ˆç¬¬ 2 éƒ¨åˆ†ï¼‰","link":"/chrome/how-web-browser-works/part-2_navigation-phase"},{"text":"æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” æ¸²æŸ“é˜¶æ®µï¼ˆç¬¬ 3 éƒ¨åˆ†ï¼‰","link":"/chrome/how-web-browser-works/part-3_rendering-phase"},{"text":"æµè§ˆå™¨å¦‚ä½•é€æ­¥å·¥ä½œ â€” åŠ è½½é˜¶æ®µçš„ä¼˜åŒ–ï¼ˆç¬¬ 4 éƒ¨åˆ†ï¼‰","link":"/chrome/how-web-browser-works/part-4_optimization-in-the-loading-stage"},{"text":"æµè§ˆå™¨å¦‚ä½•ä¸€æ­¥ä¸€æ­¥åœ°å·¥ä½œ â€” äº¤äº’é˜¶æ®µçš„ä¼˜åŒ–ï¼ˆç¬¬ 5 éƒ¨åˆ†ï¼‰","link":"/chrome/how-web-browser-works/part-5_optimization-in-the-interaction-stage"},{"text":"ä»€ä¹ˆå¼ºåˆ¶äº†é‡æ’/å›æµ","link":"/chrome/how-web-browser-works/what-forces-layout-reflow"}],"collapsable":true},{"text":"Html","items":[{"text":"Metadata","link":"/chrome/html/metadata"},{"text":"html","link":"/chrome/html/overview"},{"text":"# æ–‡æ¡£ç»“æ„","link":"/chrome/html/structure"}],"collapsable":true},{"text":"å…³é”®æŒ‡æ ‡","items":[{"text":"First Contentful Paint (FCP) é¦–æ¬¡å†…å®¹ç»˜åˆ¶","link":"/chrome/metrics/FCP"},{"text":"Largest Contentful Paint (LCP) æœ€å¤§å†…å®¹å¡«å……","link":"/chrome/metrics/LCP"},{"text":"Time to First Byte (TTFB) é¦–æ¬¡å­—èŠ‚åŠ è½½æ—¶é—´","link":"/chrome/metrics/TTFB"}],"collapsable":true},{"text":"ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹•","items":[{"text":"ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 1","link":"/chrome/modern-web-browser/inside-browser-part-1"},{"text":"ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 2","link":"/chrome/modern-web-browser/inside-browser-part-2"},{"text":"ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 3","link":"/chrome/modern-web-browser/inside-browser-part-3"},{"text":"ç°ä»£ç½‘ç»œæµè§ˆå™¨å†…å¹• â€” 4","link":"/chrome/modern-web-browser/inside-browser-part-4"}],"collapsable":true},{"text":"æ€§èƒ½","items":[{"text":"1. Welcome to Lean performance","link":"/chrome/performance/1-welcome"},{"text":"2. ä¸€èˆ¬ HTML æ€§èƒ½æ³¨æ„äº‹é¡¹","link":"/chrome/performance/2-general-html-performance"},{"text":"ä½¿ç”¨å¯¼èˆªå®šæ—¶å’Œèµ„æºå®šæ—¶è¯„ä¼°ç°åœºçš„è´Ÿè½½æ€§èƒ½","link":"/chrome/performance/navigation-and-resource-timing"},{"text":"ä¼˜åŒ–é•¿ä»»åŠ¡","link":"/chrome/performance/optimize-long-tasks"},{"text":"optimize-resource-loading ä¼˜åŒ–èµ„æºè´Ÿè½½","link":"/chrome/performance/optimize-resource-loading"},{"text":"é€šè¿‡æ‘‡æ ‘å‡å°‘ JavaScript æœ‰æ•ˆè´Ÿè½½","link":"/chrome/performance/reduce-javascript-payloads-with-tree-shaking"},{"text":"asdf","link":"/chrome/performance/welcome-copy"},{"text":"é€Ÿåº¦ä¸ºä»€ä¹ˆé‡è¦","link":"/chrome/performance/why-speed-matters"}],"collapsable":true},{"text":"æ€§èƒ½æŠ€å·§","items":[{"text":"Web ä¸Šçš„å¤šè¿›ç¨‹ï¼šæµè§ˆå™¨è¿›ç¨‹æ¨¡å‹","link":"/chrome/performance/tips/browser-process-model"},{"text":"Browser Rendering Pipeline","link":"/chrome/performance/tips/browser-rendering-pipeline"},{"text":"é€šè¿‡ç«ç„°å›¾æ‰¾åˆ°æœ‰é—®é¢˜çš„ä»£ç ","link":"/chrome/performance/tips/codepath-scoping"},{"text":"å¦‚ä½•æ”¶é›† Web æ€§èƒ½è·Ÿè¸ª","link":"/chrome/performance/tips/collect-a-trace"},{"text":"äº‹ä»¶å¾ªç¯åŸºç¡€çŸ¥è¯†","link":"/chrome/performance/tips/event-loop"},{"text":"æ·±åº¦è®²è§£ç«ç„°å›¾ ğŸ”¥ğŸ”¥","link":"/chrome/performance/tips/flamegraphs-in-depth"},{"text":"é•¿ä»»åŠ¡ï¼šå®ƒä»¬æ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆåº”è¯¥é¿å…å®ƒä»¬","link":"/chrome/performance/tips/long-tasks"},{"text":"performance æŸ¥çœ‹ä¸»çº¿ç¨‹ï¼ˆé¢œè‰²å«ä¹‰ï¼‰","link":"/chrome/performance/tips/main-profiler-pane"},{"text":"æ£€æµ‹æµè§ˆå™¨ä½•æ—¶åœ¨ JavaScript ä¸­ç»˜åˆ¶Frame","link":"/chrome/performance/tips/measuring-paint-time"},{"text":"å¦‚ä½•é˜…è¯» Chromium Profiler","link":"/chrome/performance/tips/network-profiler-pane"},{"text":"ä½¿ç”¨ Chromium ç½‘ç»œæ ‡ç­¾é¡µè·å–æ€§èƒ½è¯¦æƒ…","link":"/chrome/performance/tips/network-tab"},{"text":"ä½¿ç”¨æ€§èƒ½æ—¶åºæ ‡è®°è¿›è¡ŒğŸ“æµ‹é‡","link":"/chrome/performance/tips/performance-timing-markers"},{"text":"Chromium F12 æ€§èƒ½åˆ†æå™¨çš„åŸºæœ¬æ¦‚è¿°","link":"/chrome/performance/tips/profiler-basic-ui"},{"text":"ã€--ç©ºæ–‡ä»¶--ã€‘: performance/tips/resource-size-vs-transfer-size.md","link":"/chrome/performance/tips/resource-size-vs-transfer-size"},{"text":"å¦‚ä½•é˜…è¯»ç«ç„°å›¾ ğŸ”¥","link":"/chrome/performance/tips/understanding-flamegraphs"},{"text":"è¯†åˆ« Web åº”ç”¨ä¸­çš„æœªå‹ç¼©èµ„æº","link":"/chrome/performance/tips/validating-compression"},{"text":"asdfadsasdsdfasdf","link":"/chrome/performance/tips/aa/a"}],"collapsable":true}],"design-pattern":[{"text":"Design-pattern","items":[{"text":"# èµ„æºåˆ—è¡¨","link":"/design-pattern/indexs"},{"text":"ä»£ç†æ¨¡å¼","link":"/design-pattern/proxy-pattern"},{"text":"Singleton Pattern","link":"/design-pattern/singleton-pattern"},{"text":"çŠ¶æ€æ¨¡å¼","link":"/design-pattern/state-pattern"},{"text":"ç­–ç•¥æ¨¡å¼","link":"/design-pattern/strategy-pattern"}],"collapsable":true}],"open-source":[{"text":"Open-source","items":[{"text":"delay","link":"/open-source/delay"},{"text":"dot-prop","link":"/open-source/dot-prop"},{"text":"glob-to-regexp","link":"/open-source/glob-to-regexp"},{"text":"koa æ´‹è‘±æ¨¡å‹","link":"/open-source/koa-compose"},{"text":"quick-lru","link":"/open-source/lru-cache"},{"text":"p-defer","link":"/open-source/p-defer"},{"text":"p-lazy","link":"/open-source/p-lazy"},{"text":"p-limit","link":"/open-source/p-limit"},{"text":"p-locate","link":"/open-source/p-locate"},{"text":"p-settle","link":"/open-source/p-settle"},{"text":"yocto-queue","link":"/open-source/yocto-queue"}],"collapsable":true}],"promise":[{"text":"Promise","items":[{"text":"é¡ºåºæ‰§è¡Œä»»åŠ¡ç›´åˆ°ç¬¬ä¸€ä¸ªresolvedã€‚","link":"/promise/first-resolved"},{"text":"reduceå®ç°å¤šä¸ªpromiseé¡ºåºæ‰§è¡Œ.","link":"/promise/sequential-execution"}],"collapsable":true}],"typescript":[{"text":"Typescript","items":[{"text":"Typescript æŠ€å·§","link":"/typescript/tip"}],"collapsable":true}],"webpack":[{"text":"Webpack","items":[{"text":"webpack æ‰“åŒ…ä»£ç åˆ†æ","link":"/webpack/build-result"},{"text":"mini-webpack","link":"/webpack/mini-webpack"},{"text":"minipack-explain","link":"/webpack/minipack"},{"text":"tapable","link":"/webpack/tapable"}],"collapsable":true}]},"footer":{"message":"Released under the MIT License.","copyright":"Copyright Â© 2022-present Beka"}},"head":[["script",{"id":"check-dark-light"},"\n        ;(() => {\n          const saved = localStorage.getItem('island-theme-appearance')\n          const prefereDark = window.matchMedia('(prefers-color-scheme: dark)').matches\n          if (!saved || saved === 'auto' ? prefereDark : saved === 'dark') {\n            document.documentElement.classList.add('dark')\n          }\n        })()\n      "]],"base":"","icon":"","root":"/Users/beka/Desktop/code/bekacodechn.github.io/blog","appearance":true},"pagePath":"/Users/beka/Desktop/code/bekacodechn.github.io/blog/chrome/performance/reduce-javascript-payloads-with-tree-shaking.md","relativePagePath":"chrome/performance/reduce-javascript-payloads-with-tree-shaking.md","toc":[{"id":"what-is-tree-shaking--ä»€ä¹ˆæ˜¯æ‘‡æ ‘","text":"What is tree shaking?  ä»€ä¹ˆæ˜¯æ‘‡æ ‘ï¼Ÿ","depth":2},{"id":"finding-opportunities-to-shake-a-tree--å¯»æ‰¾æœºä¼šæ‘‡æ™ƒä¸€æ£µæ ‘","text":"Finding opportunities to shake a tree  å¯»æ‰¾æœºä¼šæ‘‡æ™ƒä¸€æ£µæ ‘","depth":2},{"id":"keeping-babel-from-transpiling-es6-modules-to-commonjs-modules--é˜²æ­¢-babel-å°†-es6-æ¨¡å—è½¬è¯‘ä¸º-commonjs-æ¨¡å—","text":"Keeping Babel from transpiling ES6 modules to CommonJS modules  é˜²æ­¢ Babel å°† ES6 æ¨¡å—è½¬è¯‘ä¸º CommonJS æ¨¡å—","depth":2},{"id":"keeping-side-effects-in-mind--ç‰¢è®°å‰¯ä½œç”¨","text":"Keeping side effects in mind  ç‰¢è®°å‰¯ä½œç”¨","depth":2},{"id":"importing-only-whats-needed--ä»…å¯¼å…¥æ‰€éœ€å†…å®¹","text":"Importing only what's needed  ä»…å¯¼å…¥æ‰€éœ€å†…å®¹","depth":2},{"id":"go-shake-some-treeså»æ‘‡æ™ƒä¸€äº›æ ‘","text":"Go shake some trees!Â å»æ‘‡æ™ƒä¸€äº›æ ‘ï¼","depth":2}],"title":"é€šè¿‡æ‘‡æ ‘å‡å°‘ JavaScript æœ‰æ•ˆè´Ÿè½½","lastUpdatedTime":"2023/11/16 20:32:02","content":"# é€šè¿‡æ‘‡æ ‘å‡å°‘ JavaScript æœ‰æ•ˆè´Ÿè½½\n\n\n`metadata:`\n\n**åŸæ ‡é¢˜:** Reduce JavaScript payloads with tree shaking\n\n**é“¾æ¥:** https://web.dev/articles/reduce-javascript-payloads-with-tree-shaking\n\n---\n\nToday's web applications can get pretty big, especially the JavaScript part of them. As of mid-2018, HTTP Archive puts theÂ [median transfer size of JavaScript on mobile devices](https://httparchive.org/reports/state-of-javascript#bytesJs)Â at approximately 350 KB. And this is just transfer size! JavaScript is often compressed when sent over the network, meaning that theÂ _actual_Â amount of JavaScript is quite a bit more after the browser decompresses it. That's important to point out, because as far as resourceÂ _processing_Â is concerned, compression is irrelevant. 900 KB of decompressed JavaScript is still 900 KB to the parser and compiler, even though it may be roughly 300 KB when compressed.  \n\nä»Šå¤©çš„ Web åº”ç”¨ç¨‹åºå¯èƒ½ä¼šå˜å¾—éå¸¸å¤§ï¼Œå°¤å…¶æ˜¯å…¶ä¸­çš„ JavaScript éƒ¨åˆ†ã€‚æˆªè‡³ 2018 å¹´å¹´ä¸­ï¼ŒHTTP Archive å°† JavaScript åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„ä¼ è¾“å¤§å°ä¸­ä½æ•°å®šä¸ºçº¦ 350 KBã€‚è€Œè¿™åªæ˜¯ä¼ è¾“å¤§å°ï¼JavaScript åœ¨é€šè¿‡ç½‘ç»œå‘é€æ—¶é€šå¸¸ä¼šè¢«å‹ç¼©ï¼Œè¿™æ„å‘³ç€åœ¨æµè§ˆå™¨è§£å‹ç¼©åï¼ŒJavaScript çš„å®é™…æ•°é‡ä¼šå¤šå¾—å¤šã€‚éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œå°±èµ„æºå¤„ç†è€Œè¨€ï¼Œå‹ç¼©æ˜¯æ— å…³ç´§è¦çš„ã€‚900 KB çš„è§£å‹ç¼© JavaScript å¯¹äºè§£æå™¨å’Œç¼–è¯‘å™¨æ¥è¯´ä»ç„¶æ˜¯ 900 KBï¼Œå³ä½¿å‹ç¼©åå¯èƒ½å¤§çº¦ 300 KBã€‚\n\n![20231116112020](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231116112020.png)\n*The process of downloading and running JavaScript. Note that even though the transfer size of the script is 300 KB compressed, it is still 900 KB worth of JavaScript that must be parsed, compiled, and executed.*\n\n*ä¸‹è½½å’Œè¿è¡Œ JavaScript çš„è¿‡ç¨‹ã€‚è¯·æ³¨æ„ï¼Œå³ä½¿è„šæœ¬çš„ä¼ è¾“å¤§å°å‹ç¼©ä¸º 300 KBï¼Œä½†ä»å¿…é¡»è§£æã€ç¼–è¯‘å’Œæ‰§è¡Œ 900 KB çš„ JavaScriptã€‚*\n\nJavaScript is an expensive resource to process. Unlike images which only incur relatively trivial decode time once downloaded, JavaScript must be parsed, compiled, and then finally executed. Byte for byte, this makes JavaScript more expensive than other types of resources.  \n\nJavaScript æ˜¯ä¸€ç§æ˜‚è´µçš„å¤„ç†èµ„æºã€‚ä¸ä¸‹è½½åä»…äº§ç”Ÿç›¸å¯¹å¾®ä¸è¶³é“çš„è§£ç æ—¶é—´çš„å›¾åƒä¸åŒï¼ŒJavaScript å¿…é¡»ç»è¿‡è§£æã€ç¼–è¯‘ï¼Œç„¶åæœ€ç»ˆæ‰§è¡Œã€‚é€å­—èŠ‚ï¼Œè¿™ä½¿å¾— JavaScript æ¯”å…¶ä»–ç±»å‹çš„èµ„æºæ›´æ˜‚è´µã€‚\n\n![20231116112125](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231116112125.png)\n*The processing cost of parsing/compiling 170 KB of JavaScript vs decode time of an equivalently sized JPEG. ([source](https://medium.com/dev-channel/the-cost-of-javascript-84009f51e99e)).*\n\n*è§£æ/ç¼–è¯‘ 170 KB JavaScript çš„å¤„ç†æˆæœ¬ä¸åŒç­‰å¤§å°çš„ JPEG çš„è§£ç æ—¶é—´ä¹‹æ¯”ã€‚ï¼ˆæ¥æºï¼‰.*\n\n[While improvements are continually being made](https://v8.dev/blog/background-compilation)Â toÂ [improve the efficiency of JavaScript engines](https://blog.mozilla.org/javascript/2017/12/12/javascript-startup-bytecode-cache/), improving JavaScript performance isâ€”as alwaysâ€”a task for developers.  \n\nè™½ç„¶ä¸æ–­è¿›è¡Œæ”¹è¿›ä»¥æé«˜ JavaScript å¼•æ“çš„æ•ˆç‡ï¼Œä½†æé«˜ JavaScript æ€§èƒ½ä¸€å¦‚æ—¢å¾€åœ°æ˜¯å¼€å‘äººå‘˜çš„ä»»åŠ¡ã€‚\n\nTo that end, there are techniques to improve JavaScript performance.Â [Code splitting](https://web.dev/articles/reduce-javascript-payloads-with-code-splitting), is one such technique that improves performance by partitioning application JavaScript into chunks, and serving those chunks to only the routes of an application that need them.  \n\nä¸ºæ­¤ï¼Œæœ‰ä¸€äº›æŠ€æœ¯å¯ä»¥æé«˜ JavaScript æ€§èƒ½ã€‚ä»£ç æ‹†åˆ†å°±æ˜¯è¿™æ ·ä¸€ç§æŠ€æœ¯ï¼Œå®ƒé€šè¿‡å°†åº”ç”¨ç¨‹åº JavaScript åˆ’åˆ†ä¸ºå¤šä¸ªå—ï¼Œå¹¶å°†è¿™äº›å—ä»…æä¾›ç»™éœ€è¦å®ƒä»¬çš„åº”ç”¨ç¨‹åºçš„è·¯ç”±æ¥æé«˜æ€§èƒ½ã€‚\n\nWhile this technique works, it doesn't address a common problem of JavaScript-heavy applications, which is the inclusion of code that's never used. Tree shaking attempts to solve this problem.  \n\nè™½ç„¶è¿™ç§æŠ€æœ¯æœ‰æ•ˆï¼Œä½†å®ƒå¹¶æ²¡æœ‰è§£å†³ JavaScript å¯†é›†å‹åº”ç”¨ç¨‹åºçš„å¸¸è§é—®é¢˜ï¼Œå³åŒ…å«ä»æœªä½¿ç”¨è¿‡çš„ä»£ç ã€‚æ‘‡æ ‘è¯•å›¾è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n## What is tree shaking?  ä»€ä¹ˆæ˜¯æ‘‡æ ‘ï¼Ÿ\n\n[Tree shaking](https://en.wikipedia.org/wiki/Tree_shaking)Â is a form of dead code elimination.Â [The term was popularized by Rollup](https://github.com/rollup/rollup#tree-shaking), but the concept of dead code elimination has existed for some time. The concept has also found purchase inÂ [webpack](https://webpack.js.org/guides/tree-shaking/), which is demonstrated in this article by way of a sample app.  \n\næ‘‡æ ‘æ˜¯æ¶ˆé™¤æ­»ä»£ç çš„ä¸€ç§å½¢å¼ã€‚è¯¥æœ¯è¯­ç”± Rollup æ¨å¹¿ï¼Œä½†æ­»ä»£ç æ¶ˆé™¤çš„æ¦‚å¿µå·²ç»å­˜åœ¨äº†ä¸€æ®µæ—¶é—´ã€‚è¿™ä¸ªæ¦‚å¿µåœ¨ webpack ä¸­ä¹Ÿå¾—åˆ°äº†è´­ä¹°ï¼Œæœ¬æ–‡é€šè¿‡ä¸€ä¸ªç¤ºä¾‹åº”ç”¨ç¨‹åºè¿›è¡Œäº†æ¼”ç¤ºã€‚\n\nThe term \"tree shaking\" comes from the mental model of your application and its dependencies as a tree-like structure. Each node in the tree represents a dependency that provides distinct functionality for your app. In modern apps, these dependencies are brought in viaÂ [staticÂ `import`Â statements](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import)Â like so:  \n\næœ¯è¯­â€œæ‘‡æ ‘â€æ¥è‡ªåº”ç”¨ç¨‹åºçš„å¿ƒæ™ºæ¨¡å‹åŠå…¶ä½œä¸ºæ ‘çŠ¶ç»“æ„çš„ä¾èµ–å…³ç³»ã€‚æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½è¡¨ç¤ºä¸€ä¸ªä¾èµ–é¡¹ï¼Œè¯¥ä¾èµ–é¡¹ä¸ºåº”ç”¨æä¾›ä¸åŒçš„åŠŸèƒ½ã€‚åœ¨ç°ä»£åº”ç”¨ä¸­ï¼Œè¿™äº›ä¾èµ–é¡¹æ˜¯é€šè¿‡é™æ€Â `import`Â è¯­å¥å¼•å…¥çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```js\n// Import all the array utilities!\nimport arrayUtils from \"array-utils\";\n```\n\n:::info\n**Note:** If you're not sure what ES6 modules are,Â [this explainer at Pony Foo](https://ponyfoo.com/articles/es6-modules-in-depth)Â is worth a look. This guide assumes you have working knowledge of how ES6 modules work, so if you don't know anything about them, give that article a read!  \n\næ³¨æ„ï¼šå¦‚æœæ‚¨ä¸ç¡®å®š ES6 æ¨¡å—æ˜¯ä»€ä¹ˆï¼ŒPony Foo çš„è¿™ä¸ªè§£é‡Šå™¨å€¼å¾—ä¸€çœ‹ã€‚æœ¬æŒ‡å—å‡è®¾æ‚¨å¯¹ ES6 æ¨¡å—çš„å·¥ä½œåŸç†æœ‰ä¸€å®šçš„äº†è§£ï¼Œæ‰€ä»¥å¦‚æœä½ å¯¹å®ƒä»¬ä¸€æ— æ‰€çŸ¥ï¼Œè¯·é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼\n:::\n\nWhen an app is youngâ€”a sapling, if you willâ€”it may have few dependencies. It's also using mostâ€”if not allâ€”the dependencies you add. As your app matures, however, more dependencies can get added. To compound matters, older dependencies fall out of use, but may not get pruned from your codebase. The end result is that an app ends up shipping with a lot ofÂ [unused JavaScript](https://web.dev/unused-javascript). Tree shaking addresses this by taking advantage of how staticÂ `import`Â statements pull in specific parts of ES6 modules:  \n\nå½“ä¸€ä¸ªåº”ç”¨ç¨‹åºè¿˜å¾ˆå¹´è½»æ—¶ï¼ˆå¦‚æœä½ æ„¿æ„çš„è¯ï¼Œå®ƒæ˜¯ä¸€æ£µæ ‘è‹—ï¼‰ï¼Œå®ƒå¯èƒ½å‡ ä¹æ²¡æœ‰ä¾èµ–å…³ç³»ã€‚å®ƒè¿˜ä½¿ç”¨æ‚¨æ·»åŠ çš„å¤§å¤šæ•°ï¼ˆå¦‚æœä¸æ˜¯å…¨éƒ¨ï¼‰ä¾èµ–é¡¹ã€‚ä½†æ˜¯ï¼Œéšç€åº”ç”¨çš„æˆç†Ÿï¼Œå¯ä»¥æ·»åŠ æ›´å¤šä¾èµ–é¡¹ã€‚é›ªä¸ŠåŠ éœœçš„æ˜¯ï¼Œè¾ƒæ—§çš„ä¾èµ–é¡¹ä¸å†ä½¿ç”¨ï¼Œä½†å¯èƒ½ä¸ä¼šä»ä»£ç åº“ä¸­åˆ é™¤ã€‚æœ€ç»ˆç»“æœæ˜¯ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºæœ€ç»ˆä¼šé™„å¸¦å¤§é‡æœªä½¿ç”¨çš„ JavaScriptã€‚æ‘‡æ ‘é€šè¿‡åˆ©ç”¨é™æ€Â `import`Â è¯­å¥å¦‚ä½•æ‹‰å…¥ ES6 æ¨¡å—çš„ç‰¹å®šéƒ¨åˆ†æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\n\n```js\n// Import only some of the utilities!\nimport { unique, implode, explode } from \"array-utils\";\n```\n\nThe difference between thisÂ `import`Â example and the previous one is that rather than importingÂ _everything_Â from theÂ `\"array-utils\"`Â moduleâ€”which could be a lot of code)â€”this example imports only specific parts of it. In dev builds, this doesn't change anything, as the entire module gets imported regardless. In production builds, webpack can be configured to \"shake\" offÂ [exports](https://developer.mozilla.org/docs/web/javascript/reference/statements/export)Â from ES6 modules that weren't explicitly imported, making those production builds smaller. In this guide, you'll learn how to do just that!  \n\næ­¤ç¤ºä¾‹ä¸ä¸Šä¸€ä¸ªç¤ºä¾‹çš„åŒºåˆ«åœ¨äºï¼Œæ­¤Â `import`Â ç¤ºä¾‹ä¸æ˜¯ä»æ¨¡å—ä¸­å¯¼å…¥æ‰€æœ‰å†…å®¹ï¼ˆå¯èƒ½æ˜¯å¤§é‡ä»£ç ï¼‰ï¼Œè€Œæ˜¯ä»…å¯¼å…¥Â `\"array-utils\"`Â æ¨¡å—çš„ç‰¹å®šéƒ¨åˆ†ã€‚åœ¨å¼€å‘ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ä¼šæ”¹å˜ä»»ä½•äº‹æƒ…ï¼Œå› ä¸ºæ— è®ºå¦‚ä½•éƒ½ä¼šå¯¼å…¥æ•´ä¸ªæ¨¡å—ã€‚åœ¨ç”Ÿäº§ç‰ˆæœ¬ä¸­ï¼Œwebpack å¯ä»¥é…ç½®ä¸ºâ€œæ‘†è„±â€æœªæ˜¾å¼å¯¼å…¥çš„ ES6 æ¨¡å—çš„å¯¼å‡ºï¼Œä»è€Œä½¿è¿™äº›ç”Ÿäº§ç‰ˆæœ¬æ›´å°ã€‚åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ï¼\n\n## Finding opportunities to shake a tree  å¯»æ‰¾æœºä¼šæ‘‡æ™ƒä¸€æ£µæ ‘\n\nFor illustrative purposes,Â [a sample one-page app](https://github.com/malchata/webpack-tree-shaking-example)Â is available that demonstrates how tree shaking works. You can clone it and follow along if you like, but we'll cover every step of the way together in this guide, so cloning isn't necessary (unless hands-on learning is your thing).  \n\nä¸ºäº†ä¾¿äºè¯´æ˜ï¼Œæä¾›äº†ä¸€ä¸ªç¤ºä¾‹å•é¡µåº”ç”¨ç¨‹åºï¼Œç”¨äºæ¼”ç¤ºæ‘‡æ ‘çš„å·¥ä½œåŸç†ã€‚å¦‚æœæ‚¨æ„¿æ„ï¼Œæ‚¨å¯ä»¥å…‹éš†å®ƒå¹¶è·Ÿéšå®ƒï¼Œä½†æˆ‘ä»¬å°†åœ¨æœ¬æŒ‡å—ä¸­ä¸€èµ·ä»‹ç»æ¯ä¸€æ­¥ï¼Œå› æ­¤å…‹éš†ä¸æ˜¯å¿…éœ€çš„ï¼ˆé™¤éæ‚¨å–œæ¬¢åŠ¨æ‰‹å­¦ä¹ ï¼‰ã€‚\n\nThe sample app is a searchable database of guitar effect pedals. You enter a query and a list of effect pedals will appear.  \n\nç¤ºä¾‹åº”ç”¨æ˜¯å‰ä»–æ•ˆæœè¸æ¿çš„å¯æœç´¢æ•°æ®åº“ã€‚æ‚¨è¾“å…¥æŸ¥è¯¢ï¼Œå°†å‡ºç°æ•ˆæœè¸æ¿åˆ—è¡¨ã€‚\n\n![20231116112856](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231116112856.png)\n\nThe behavior that drives this app is separated into vendor (i.e.,Â [Preact](https://preactjs.com/)Â andÂ [Emotion](https://emotion.sh/)) and app-specific code bundles (or \"chunks\", as webpack calls them):  \n\né©±åŠ¨æ­¤åº”ç”¨ç¨‹åºçš„è¡Œä¸ºåˆ†ä¸ºä¾›åº”å•†ï¼ˆå³ Preact å’Œ Emotionï¼‰å’Œç‰¹å®šäºåº”ç”¨ç¨‹åºçš„ä»£ç åŒ…ï¼ˆæˆ– webpack ç§°ä¹‹ä¸ºâ€œå—â€ï¼‰ï¼š\n\n![20231116112919](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231116112919.png)\n\nThe JavaScript bundles shown in the figure above are production builds, meaning they're optimized through uglification. 21.1 KB for an app-specific bundle isn't bad, but it should be noted that no tree shaking is occurring whatsoever. Let's look at the app code and see what can be done to fix that.  \n\nä¸Šå›¾ä¸­æ˜¾ç¤ºçš„ JavaScript åŒ…æ˜¯ç”Ÿäº§ç‰ˆæœ¬ï¼Œè¿™æ„å‘³ç€å®ƒä»¬é€šè¿‡ä¸‘åŒ–è¿›è¡Œäº†ä¼˜åŒ–ã€‚21.1 KB å¯¹äºç‰¹å®šäºåº”ç”¨ç¨‹åºçš„æ†ç»‘åŒ…æ¥è¯´è¿˜ä¸é”™ï¼Œä½†åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œæ²¡æœ‰å‘ç”Ÿä»»ä½•æ‘‡æ ‘ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹åº”ç”¨ä»£ç ï¼Œçœ‹çœ‹å¯ä»¥åšäº›ä»€ä¹ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n:::info\n**Note:**Â If you don't care for a long-winded explanation, and want to dive into code, go ahead and check outÂ [theÂ `tree-shake`Â branch](https://github.com/malchata/webpack-tree-shaking-example/tree/tree-shake)Â in the app's GitHub repo. You can alsoÂ [diff this branch](https://github.com/malchata/webpack-tree-shaking-example/compare/tree-shake)Â to see exactly what was changed to make tree shaking work!  \n\næ³¨æ„ï¼šå¦‚æœæ‚¨ä¸å…³å¿ƒå†—é•¿çš„è§£é‡Šï¼Œå¹¶ä¸”æƒ³è¦æ·±å…¥ç ”ç©¶ä»£ç ï¼Œè¯·ç»§ç»­æŸ¥çœ‹åº”ç”¨ç¨‹åºçš„ GitHub å­˜å‚¨åº“ä¸­çš„Â `tree-shake`Â åˆ†æ”¯ã€‚æ‚¨è¿˜å¯ä»¥æ¯”è¾ƒæ­¤åˆ†æ”¯ï¼Œä»¥ç¡®åˆ‡åœ°æŸ¥çœ‹ä¸ºä½¿æ‘‡æ ‘å·¥ä½œè€Œæ›´æ”¹çš„å†…å®¹ï¼\n:::\n\nIn any application, finding tree shaking opportunities are going to involve looking for staticÂ `import`Â statements.Â [Near the top of the main component file](https://github.com/malchata/webpack-tree-shaking-example/blob/master/src/components/FilterablePedalList/FilterablePedalList.js#L4), you'll see a line like this:  \n\nåœ¨ä»»ä½•åº”ç”¨ç¨‹åºä¸­ï¼Œå¯»æ‰¾æ‘‡æ ‘æœºä¼šéƒ½å°†æ¶‰åŠå¯»æ‰¾é™æ€Â `import`Â è¯­å¥ã€‚åœ¨ä¸»ç»„ä»¶æ–‡ä»¶çš„é¡¶éƒ¨é™„è¿‘ï¼Œæ‚¨ä¼šçœ‹åˆ°å¦‚ä¸‹è¡Œï¼š\n\n```js\nimport * as utils from \"../../utils/utils\";\n```\nYou canÂ [import ES6 modules in a variety of ways](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import#description), but ones like this should get your attention. This specific line says \"`import`Â _everything_Â from theÂ `utils`Â module, and put it in a namespace calledÂ `utils`.\" The big question to ask here is, \"just how muchÂ _stuff_Â is in that module?\"  \n\næ‚¨å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å¯¼å…¥ ES6 æ¨¡å—ï¼Œä½†åƒè¿™æ ·çš„æ¨¡å—åº”è¯¥å¼•èµ·æ‚¨çš„æ³¨æ„ã€‚è¿™ä¸€è¡Œè¯´â€œÂ `import`Â `utils`Â æ¨¡å—ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå¹¶å°†å…¶æ”¾åœ¨åä¸ºÂ `utils`Â çš„å‘½åç©ºé—´ä¸­ã€‚è¿™é‡Œè¦é—®çš„ä¸€ä¸ªå¤§é—®é¢˜æ˜¯ï¼Œâ€œé‚£ä¸ªæ¨¡å—ä¸­åˆ°åº•æœ‰å¤šå°‘ä¸œè¥¿ï¼Ÿ\n\nIf you look atÂ [theÂ `utils`Â module source code](https://github.com/malchata/webpack-tree-shaking-example/blob/master/src/utils/utils.js), you'll find there's about 1,300 lines of code.  \n\nå¦‚æœä½ çœ‹ä¸€ä¸‹Â `utils`Â æ¨¡å—çš„æºä»£ç ï¼Œä½ ä¼šå‘ç°å¤§çº¦æœ‰ 1,300 è¡Œä»£ç ã€‚\n\nDo youÂ _need_Â all that stuff? Let's double check by searchingÂ [the main component file](https://github.com/malchata/webpack-tree-shaking-example/blob/master/src/components/FilterablePedalList/FilterablePedalList.js)Â that imports theÂ `utils`Â module to see how many instances of that namespace come up.  \n\nä½ éœ€è¦æ‰€æœ‰è¿™äº›ä¸œè¥¿å—ï¼Ÿè®©æˆ‘ä»¬é€šè¿‡æœç´¢å¯¼å…¥Â `utils`Â æ¨¡å—çš„ä¸»ç»„ä»¶æ–‡ä»¶æ¥ä»”ç»†æ£€æŸ¥ï¼Œçœ‹çœ‹è¯¥å‘½åç©ºé—´æœ‰å¤šå°‘ä¸ªå®ä¾‹ã€‚\n\n![20231116113023](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231116113023.png)\n*TheÂ `utils`Â namespace we've imported tons of modules from is only invoked three times within the main component file.*\n\n*æˆ‘ä»¬ä»ä¸­å¯¼å…¥äº†å¤§é‡æ¨¡å—çš„Â `utils`Â å‘½åç©ºé—´åœ¨ä¸»ç»„ä»¶æ–‡ä»¶ä¸­åªè°ƒç”¨äº†ä¸‰æ¬¡ã€‚*\n\nAs it turns out, theÂ `utils`Â namespace appears in only three spots in our applicationâ€”but for what functions? If you take a look at the main component file again, it appears to be only one function, which isÂ `utils.simpleSort`, which is used to sort the search results list by a number of criteria when the sorting dropdowns are changed:  \n\näº‹å®è¯æ˜ï¼ŒÂ `utils`Â å‘½åç©ºé—´åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­åªå‡ºç°åœ¨ä¸‰ä¸ªä½ç½®ï¼Œä½†ç”¨äºä»€ä¹ˆåŠŸèƒ½ï¼Ÿå¦‚æœå†æ¬¡æŸ¥çœ‹ä¸»ç»„ä»¶æ–‡ä»¶ï¼Œå®ƒä¼¼ä¹åªæœ‰ä¸€ä¸ªå‡½æ•°ï¼Œå³Â `utils.simpleSort`Â ï¼Œç”¨äºåœ¨æ›´æ”¹æ’åºä¸‹æ‹‰åˆ—è¡¨æ—¶æŒ‰å¤šä¸ªæ¡ä»¶å¯¹æœç´¢ç»“æœåˆ—è¡¨è¿›è¡Œæ’åºï¼š\n\n```js\nif (this.state.sortBy === \"model\") {\n  // `simpleSort` gets used here...\n  json = utils.simpleSort(json, \"model\", this.state.sortOrder);\n} else if (this.state.sortBy === \"type\") {\n  // ..and here...\n  json = utils.simpleSort(json, \"type\", this.state.sortOrder);\n} else {\n  // ..and here.\n  json = utils.simpleSort(json, \"manufacturer\", this.state.sortOrder);\n}\n```\n\nOut of a 1,300 line file with a bunch of exports, only one of them is used. This results in shipping a lot of unused JavaScript.  \n\nåœ¨åŒ…å«ä¸€å †å¯¼å‡ºçš„ 1,300 è¡Œæ–‡ä»¶ä¸­ï¼Œåªä½¿ç”¨äº†å…¶ä¸­ä¸€ä¸ªã€‚è¿™å¯¼è‡´å¤§é‡æœªä½¿ç”¨çš„ JavaScript å‘å¸ƒã€‚\n\n:::info\n**Note:** This project is purposefully kept simple, so it's a bit easier in this case to find out where the bloat is coming from. In large projects with many modules, however, things get more complicated. Tools such asÂ [Webpack Bundle Analyzer](https://www.npmjs.com/package/webpack-bundle-analyzer)Â andÂ [source-map-explorer](https://www.npmjs.com/package/source-map-explorer)Â may provide further insight.  \n\næ³¨æ„ï¼šè¿™ä¸ªé¡¹ç›®ç‰¹æ„ä¿æŒç®€å•ï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰¾å‡ºè†¨èƒ€çš„æ¥æºä¼šæ›´å®¹æ˜“ä¸€äº›ã€‚ç„¶è€Œï¼Œåœ¨å…·æœ‰è®¸å¤šæ¨¡å—çš„å¤§å‹é¡¹ç›®ä¸­ï¼Œäº‹æƒ…å˜å¾—æ›´åŠ å¤æ‚ã€‚Webpack Bundle Analyzer å’Œ source-map-explorer ç­‰å·¥å…·å¯èƒ½ä¼šæä¾›è¿›ä¸€æ­¥çš„è§è§£ã€‚\n:::\n\nWhile this example app is admittedly a bit contrived, it doesn't change the fact that this synthetic sort of scenario resembles actual optimization opportunities you may encounter in a production web app. Now that you've identified an opportunity for tree shaking to be useful, how is it actually done?  \n\nè™½ç„¶æ­¤ç¤ºä¾‹åº”ç”¨ç¡®å®æœ‰ç‚¹åšä½œï¼Œä½†å®ƒå¹¶æ²¡æœ‰æ”¹å˜è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå³è¿™ç§åˆæˆç±»å‹çš„æ–¹æ¡ˆç±»ä¼¼äºæ‚¨åœ¨ç”Ÿäº§ Web åº”ç”¨ä¸­å¯èƒ½é‡åˆ°çš„å®é™…ä¼˜åŒ–æœºä¼šã€‚æ—¢ç„¶æ‚¨å·²ç»ç¡®å®šäº†æ‘‡æ ‘æœ‰ç”¨çš„æœºä¼šï¼Œé‚£ä¹ˆå®ƒå®é™…ä¸Šæ˜¯å¦‚ä½•å®Œæˆçš„ï¼Ÿ\n\n## Keeping Babel from transpiling ES6 modules to CommonJS modules  é˜²æ­¢ Babel å°† ES6 æ¨¡å—è½¬è¯‘ä¸º CommonJS æ¨¡å—\n\n[Babel](https://babeljs.io/)Â is an indispensable tool, but it may make the effects of tree shaking a bit more difficult to observe. If you're usingÂ [`@babel/preset-env`](https://babeljs.io/docs/en/babel-preset-env), BabelÂ _may_Â transform ES6 modules into more widely compatible CommonJS modulesâ€”that is, modules youÂ `require`Â instead ofÂ `import`.  \n\nå·´åˆ«å¡”æ˜¯ä¸å¯æˆ–ç¼ºçš„å·¥å…·ï¼Œä½†å®ƒå¯èƒ½ä¼šä½¿æ ‘æœ¨æ‘‡æ™ƒçš„å½±å“æ›´éš¾è§‚å¯Ÿã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„Â `@babel/preset-env`Â æ˜¯ ï¼ŒBabel å¯èƒ½ä¼šå°† ES6 æ¨¡å—è½¬æ¢ä¸ºæ›´å¹¿æ³›å…¼å®¹çš„ CommonJS æ¨¡å—ï¼Œå³ uÂ `require`Â æ¨¡å—è€Œä¸æ˜¯Â `import`Â .\n\nBecause tree shaking is more difficult to do for CommonJS modules, webpack won't know what to prune from bundles if you decide to use them. The solution is to configureÂ `@babel/preset-env`Â to explicitly leave ES6 modules alone. Wherever you configure Babelâ€”be it inÂ `babel.config.js`Â orÂ `package.json`â€”this involves adding a little something extra:  \n\nå› ä¸º CommonJS æ¨¡å—æ›´éš¾åšæ‘‡æ ‘ï¼Œæ‰€ä»¥å¦‚æœä½ å†³å®šä½¿ç”¨å®ƒä»¬ï¼Œwebpack å°†ä¸çŸ¥é“è¦ä»æ†ç»‘åŒ…ä¸­åˆ é™¤ä»€ä¹ˆã€‚è§£å†³æ–¹æ¡ˆæ˜¯é…ç½®ä¸ºÂ `@babel/preset-env`Â æ˜¾å¼ä¿ç•™ ES6 æ¨¡å—ã€‚æ— è®ºä½ åœ¨ä»€ä¹ˆåœ°æ–¹é…ç½® Babelâ€”â€”æ— è®ºæ˜¯åœ¨ inÂ `babel.config.js`Â ä¸­è¿˜æ˜¯åœ¨Â `package.json`Â - è¿™éƒ½æ¶‰åŠæ·»åŠ ä¸€äº›é¢å¤–çš„ä¸œè¥¿ï¼š\n\n```js\n// babel.config.js\nexport default {\n  presets: [\n    [\n      \"@babel/preset-env\", {\n        modules: false\n      }\n    ]\n  ]\n}\n```\n\nSpecifyingÂ `modules: false`Â in yourÂ `@babel/preset-env`Â config gets Babel to behave as desired, which allows webpack to analyze your dependency tree and shake off unused dependencies.  \n\nåœ¨ä½ çš„Â `@babel/preset-env`Â é…ç½®ä¸­æŒ‡å®šÂ `modules: false`Â å¯ä»¥è®© Babel æŒ‰ç…§é¢„æœŸè¿è¡Œï¼Œè¿™å…è®¸ webpack åˆ†æä½ çš„ä¾èµ–æ ‘å¹¶æ‘†è„±æœªä½¿ç”¨çš„ä¾èµ–ã€‚\n\n## Keeping side effects in mind  ç‰¢è®°å‰¯ä½œç”¨\n\nAnother aspect to consider when shaking dependencies from your app is whether your project's modules have side effects. An example of a side effect is when a function modifies something outside of its own scope, which is aÂ _side effect_Â of its execution:  \n\nä»åº”ç”¨ä¸­æ‘‡åŠ¨ä¾èµ–é¡¹æ—¶è¦è€ƒè™‘çš„å¦ä¸€ä¸ªæ–¹é¢æ˜¯é¡¹ç›®çš„æ¨¡å—æ˜¯å¦æœ‰å‰¯ä½œç”¨ã€‚å‰¯ä½œç”¨çš„ä¸€ä¸ªä¾‹å­æ˜¯ï¼Œå½“ä¸€ä¸ªå‡½æ•°ä¿®æ”¹äº†å®ƒè‡ªå·±çš„èŒƒå›´ä¹‹å¤–çš„ä¸œè¥¿æ—¶ï¼Œè¿™æ˜¯å…¶æ‰§è¡Œçš„å‰¯ä½œç”¨ï¼š\n\n```js\nlet fruits = [\"apple\", \"orange\", \"pear\"];\n\nconsole.log(fruits); // (3) [\"apple\", \"orange\", \"pear\"]\n\nconst addFruit = function(fruit) {\n  fruits.push(fruit);\n};\n\naddFruit(\"kiwi\");\n\nconsole.log(fruits); // (4) [\"apple\", \"orange\", \"pear\", \"kiwi\"]\n```\n\nIn this example,Â `addFruit`Â produces a side effect when it modifies theÂ `fruits`Â array, which is outside its scope.  \n\nåœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå½“å®ƒä¿®æ”¹Â `fruits`Â æ•°ç»„æ—¶ä¼šäº§ç”Ÿå‰¯ä½œç”¨ï¼ŒÂ `addFruit`Â è¿™è¶…å‡ºäº†å…¶èŒƒå›´ã€‚\n\nSide effects also apply to ES6 modules, and that matters in the context of tree shaking. Modules that take predictable inputs and produce equally predictable outputs without modifying anything outside of their own scope are dependencies that can be safely dropped if we're not using them. They're self-contained,Â _modular_Â pieces of code. Hence, \"modules\".  \n\nå‰¯ä½œç”¨ä¹Ÿé€‚ç”¨äº ES6 æ¨¡å—ï¼Œè¿™åœ¨æ‘‡æ ‘çš„èƒŒæ™¯ä¸‹å¾ˆé‡è¦ã€‚é‡‡ç”¨å¯é¢„æµ‹çš„è¾“å…¥å¹¶äº§ç”ŸåŒæ ·å¯é¢„æµ‹çš„è¾“å‡ºè€Œä¸ä¿®æ”¹å…¶è‡ªèº«èŒƒå›´ä¹‹å¤–çš„ä»»ä½•å†…å®¹çš„æ¨¡å—æ˜¯ä¾èµ–é¡¹ï¼Œå¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨å®ƒä»¬ï¼Œåˆ™å¯ä»¥å®‰å…¨åœ°åˆ é™¤å®ƒä»¬ã€‚å®ƒä»¬æ˜¯ç‹¬ç«‹çš„æ¨¡å—åŒ–ä»£ç ç‰‡æ®µã€‚å› æ­¤ï¼Œâ€œæ¨¡å—â€ã€‚\n\nWhere webpack is concerned, a hint can be used to specify that a package and its dependencies are free of side effects by specifyingÂ `\"sideEffects\": false`Â in a project'sÂ `package.json`Â file:  \n\nå°± webpack è€Œè¨€ï¼Œå¯ä»¥é€šè¿‡åœ¨é¡¹ç›®Â `package.json`Â æ–‡ä»¶ä¸­æŒ‡å®šæ¥æŒ‡å®šÂ `\"sideEffects\": false`Â åŒ…åŠå…¶ä¾èµ–é¡¹æ²¡æœ‰å‰¯ä½œç”¨ï¼š\n\n```js\n{\n  \"name\": \"webpack-tree-shaking-example\",\n  \"version\": \"1.0.0\",\n  \"sideEffects\": false\n}\n```\n\nAlternatively, you can tell webpack which specific files are not side effect-free:  \n\næˆ–è€…ï¼Œä½ å¯ä»¥å‘Šè¯‰ webpack å“ªäº›ç‰¹å®šæ–‡ä»¶ä¸æ˜¯æ²¡æœ‰å‰¯ä½œç”¨çš„ï¼š\n\n```js\n{\n  \"name\": \"webpack-tree-shaking-example\",\n  \"version\": \"1.0.0\",\n  \"sideEffects\": [\n    \"./src/utils/utils.js\"\n  ]\n}\n```\n\nIn the latter example, any file that isn't specified will be assumed to be free of side effects. If you don't want to add this to yourÂ `package.json`Â file,Â [you can also specify this flag in your webpack config viaÂ `module.rules`](https://github.com/webpack/webpack/issues/6065#issuecomment-351060570).  \n\nåœ¨åä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œä»»ä½•æœªæŒ‡å®šçš„æ–‡ä»¶éƒ½å°†è¢«å‡å®šä¸ºæ²¡æœ‰å‰¯ä½œç”¨ã€‚å¦‚æœæ‚¨ä¸æƒ³å°†å…¶æ·»åŠ åˆ°æ–‡ä»¶ä¸­Â `package.json`Â ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Â `module.rules`Â åœ¨ webpack é…ç½®ä¸­æŒ‡å®šæ­¤æ ‡å¿—ã€‚\n\n## Importing only what's needed  ä»…å¯¼å…¥æ‰€éœ€å†…å®¹\n\nAfter instructing Babel to leave ES6 modules alone, a slight adjustment to ourÂ `import`Â syntax is required to bring in only the functions needed from theÂ `utils`Â module. In this guide's example, all that's needed is theÂ `simpleSort`Â function:  \n\nåœ¨æŒ‡ç¤º Babel ä¸ç†ä¼š ES6 æ¨¡å—ä¹‹åï¼Œéœ€è¦å¯¹æˆ‘ä»¬çš„Â `import`Â è¯­æ³•ç¨ä½œè°ƒæ•´ï¼Œä»¥ä»…å¼•å…¥Â `utils`Â æ¨¡å—æ‰€éœ€çš„å‡½æ•°ã€‚åœ¨æœ¬æŒ‡å—çš„ç¤ºä¾‹ä¸­ï¼Œåªéœ€è¦å‡½æ•°Â `simpleSort`Â ï¼š\n\n```js\nimport { simpleSort } from \"../../utils/utils\";\n```\n\nBecause onlyÂ `simpleSort`Â is being imported instead of the entireÂ `utils`Â module, every instance ofÂ `utils.simpleSort`Â will need to changed toÂ `simpleSort`:  \n\nå› ä¸ºåªÂ `simpleSort`Â å¯¼å…¥è€Œä¸æ˜¯å¯¼å…¥æ•´ä¸ªÂ `utils`Â æ¨¡å—ï¼Œæ‰€ä»¥æ¯ä¸ªÂ `utils.simpleSort`Â å®ä¾‹éƒ½éœ€è¦æ›´æ”¹ä¸ºÂ `simpleSort`Â ï¼š\n\n```js\nif (this.state.sortBy === \"model\") {\n  json = simpleSort(json, \"model\", this.state.sortOrder);\n} else if (this.state.sortBy === \"type\") {\n  json = simpleSort(json, \"type\", this.state.sortOrder);\n} else {\n  json = simpleSort(json, \"manufacturer\", this.state.sortOrder);\n}\n```\n\nThis should be all that's needed for tree shaking to work in this example. This is the webpack output before shaking the dependency tree:  \n\nåœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œè¿™åº”è¯¥æ˜¯æ‘‡æ ‘å·¥ä½œæ‰€éœ€çš„å…¨éƒ¨å†…å®¹ã€‚è¿™æ˜¯åŠ¨æ‘‡ä¾èµ–æ ‘ä¹‹å‰çš„ webpack è¾“å‡ºï¼š\n\n```js\n                 Asset      Size  Chunks             Chunk Names\njs/vendors.16262743.js  37.1 KiB       0  [emitted]  vendors\n   js/main.797ebb8b.js  20.8 KiB       1  [emitted]  main\n```\n\nThis is the outputÂ _after_Â tree shaking is successful:  \n\nè¿™æ˜¯æ‘‡æ ‘æˆåŠŸåçš„è¾“å‡ºï¼š\n\n```js\n                 Asset      Size  Chunks             Chunk Names\njs/vendors.45ce9b64.js  36.9 KiB       0  [emitted]  vendors\n   js/main.559652be.js  8.46 KiB       1  [emitted]  main\n```\n\nWhile both bundles shrank, it's really theÂ `main`Â bundle that benefits most. By shaking off the unused parts of theÂ `utils`Â module, theÂ `main`Â bundle shrinks by about 60%. This not only lowers the amount of time the script takes to the download, but processing time as well.  \n\nè™½ç„¶ä¸¤ä¸ªæ†ç»‘åŒ…éƒ½ç¼©å°äº†ï¼Œä½†å—ç›Šæœ€å¤§çš„ç¡®å®æ˜¯Â `main`Â æ†ç»‘åŒ…ã€‚é€šè¿‡ç”©æ‰Â `utils`Â æ¨¡å—ä¸­æœªä½¿ç”¨çš„éƒ¨åˆ†ï¼ŒÂ `main`Â æŸæ”¶ç¼©çº¦60%ã€‚è¿™ä¸ä»…å‡å°‘äº†è„šæœ¬ä¸‹è½½æ‰€éœ€çš„æ—¶é—´ï¼Œè¿˜å‡å°‘äº†å¤„ç†æ—¶é—´ã€‚\n\n## Go shake some trees!Â å»æ‘‡æ™ƒä¸€äº›æ ‘ï¼\n\nWhatever mileage you get out of tree shaking depends on your app and its dependencies and architecture. Try it! If you know for a fact you haven't set up your module bundler to perform this optimization, there's no harm trying and seeing how it benefits your application.  \n\næ— è®ºæ‚¨ä»æ‘‡æ ‘ä¸­è·å¾—ä»€ä¹ˆå¥½å¤„ï¼Œéƒ½å–å†³äºæ‚¨çš„åº”ç”¨åŠå…¶ä¾èµ–é¡¹å’Œä½“ç³»ç»“æ„ã€‚è¯•è¯•å§ï¼å¦‚æœæ‚¨çŸ¥é“æ‚¨è¿˜æ²¡æœ‰è®¾ç½®æ¨¡å—æ†ç»‘å™¨æ¥æ‰§è¡Œæ­¤ä¼˜åŒ–ï¼Œé‚£ä¹ˆå°è¯•å¹¶äº†è§£å®ƒå¦‚ä½•ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºå—ç›Šå¹¶æ²¡æœ‰ä»€ä¹ˆåå¤„ã€‚\n\nYou may realize a significant performance gain from tree shaking, or not much at all. But by configuring your build system to take advantage of this optimization in production builds and selectively importing only what your application needs, you'll be proactively keeping your application bundles as small as possible.  \n\næ‚¨å¯èƒ½ä¼šä»æ‘‡æ ‘ä¸­è·å¾—æ˜¾ç€çš„æ€§èƒ½æå‡ï¼Œæˆ–è€…æ ¹æœ¬æ²¡æœ‰å®ç°ã€‚ä½†æ˜¯ï¼Œé€šè¿‡é…ç½®æ„å»ºç³»ç»Ÿä»¥åœ¨ç”Ÿäº§æ„å»ºä¸­åˆ©ç”¨æ­¤ä¼˜åŒ–ï¼Œå¹¶æœ‰é€‰æ‹©åœ°ä»…å¯¼å…¥åº”ç”¨ç¨‹åºæ‰€éœ€çš„å†…å®¹ï¼Œæ‚¨å°†ä¸»åŠ¨ä¿æŒåº”ç”¨ç¨‹åºæ†ç»‘åŒ…å°½å¯èƒ½å°ã€‚\n\n_Special thanks to Kristofer Baxter,Â [Jason Miller](https://web.dev/authors/developit),Â [Addy Osmani](https://web.dev/authors/addyosmani),Â [Jeff Posnick](https://web.dev/authors/jeffposnick), Sam Saccone, andÂ [Philip Walton](https://web.dev/authors/philipwalton)Â for their valuable feedback, which significantly improved the quality of this article.  \n\nç‰¹åˆ«æ„Ÿè°¢ Kristofer Baxterã€Jason Millerã€Addy Osmaniã€Jeff Posnickã€Sam Saccone å’Œ Philip Walton çš„å®è´µåé¦ˆï¼Œè¿™å¤§å¤§æé«˜äº†æœ¬æ–‡çš„è´¨é‡ã€‚_\n","pageType":"doc","routePath":"/chrome/performance/reduce-javascript-payloads-with-tree-shaking"};</script>
      
      <script type="module" src="/client-entry.js"></script>
    </body>
  </html>