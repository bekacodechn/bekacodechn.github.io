import{jsx as n,jsxs as l,Fragment as c}from"react/jsx-runtime";const o=void 0,i=[{id:"\u5B9A\u4E49",text:"\u5B9A\u4E49",depth:2},{id:"\u4EC0\u4E48\u662F-ttfb",text:"\u4EC0\u4E48\u662F TTFB\uFF1F",depth:2},{id:"\u4EC0\u4E48\u662F\u826F\u597D\u7684-ttfb-\u5206\u6570",text:"\u4EC0\u4E48\u662F\u826F\u597D\u7684 TTFB \u5206\u6570\uFF1F",depth:3},{id:"\u5982\u4F55\u6D4B\u91CF-ttfb",text:"\u5982\u4F55\u6D4B\u91CF TTFB",depth:2},{id:"\u5982\u4F55\u5224\u65AD\u5FEB\u901F\u5E73\u5747\u6162\u901F",text:"\u5982\u4F55\u5224\u65AD\uFF1F\u5FEB\u901F\u3001\u5E73\u5747\u3001\u6162\u901F\uFF1F",depth:3},{id:"\u5728-javascript-\u4E2D\u6D4B\u91CF-ttfb",text:"\u5728 JavaScript \u4E2D\u6D4B\u91CF TTFB",depth:3},{id:"\u8861\u91CF\u8D44\u6E90\u8BF7\u6C42",text:"\u8861\u91CF\u8D44\u6E90\u8BF7\u6C42",depth:3},{id:"\u5982\u4F55\u63D0\u9AD8-ttfb",text:"\u5982\u4F55\u63D0\u9AD8 TTFB",depth:2}],t="Time to First Byte (TTFB) \u9996\u6B21\u5B57\u8282\u52A0\u8F7D\u65F6\u95F4";function s(r){const e=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",div:"div",img:"img",em:"em",ul:"ul",li:"li",h3:"h3",button:"button",span:"span",pre:"pre",code:"code"},r.components);return l(c,{children:[l(e.h1,{id:"time-to-first-byte-ttfb-\u9996\u6B21\u5B57\u8282\u52A0\u8F7D\u65F6\u95F4",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#time-to-first-byte-ttfb-\u9996\u6B21\u5B57\u8282\u52A0\u8F7D\u65F6\u95F4",children:"#"}),"Time to First Byte (TTFB) \u9996\u6B21\u5B57\u8282\u52A0\u8F7D\u65F6\u95F4"]}),`
`,l(e.p,{children:["\u94FE\u63A5\uFF1A",n(e.a,{href:"https://web.dev/articles/ttfb?hl=zh-cn",target:"_blank",rel:"nofollow",children:"https://web.dev/articles/ttfb?hl=zh-cn"})]}),`
`,l(e.h2,{id:"\u5B9A\u4E49",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5B9A\u4E49",children:"#"}),"\u5B9A\u4E49"]}),`
`,l(e.div,{className:"island-directive info",children:[n(e.p,{className:"island-directive-title",children:"INFO"}),n(e.div,{className:"island-directive-content",children:n(e.p,{children:"\u6CE8\uFF1A\u9996\u5B57\u8282\u65F6\u95F4 (TTFB) \u662F\u5B9E\u9A8C\u5BA4\u548C\u73B0\u573A\u6D4B\u91CF\u8FDE\u63A5\u5EFA\u7ACB\u65F6\u95F4\u548C\u7F51\u7EDC\u670D\u52A1\u5668\u54CD\u5E94\u901F\u5EA6\u7684\u57FA\u672C\u6307\u6807\u3002\u5B83\u6709\u52A9\u4E8E\u8BC6\u522B\u7F51\u7EDC\u670D\u52A1\u5668\u5BF9\u8BF7\u6C42\u7684\u54CD\u5E94\u901F\u5EA6\u662F\u5426\u8FC7\u6162\u3002\u5728\u5BFC\u822A\u8BF7\u6C42\uFF08\u5373 HTML \u6587\u6863\u8BF7\u6C42\uFF09\u7684\u60C5\u51B5\u4E0B\uFF0C\u5B83\u5148\u4E8E\u5176\u4ED6\u6240\u6709\u6709\u610F\u4E49\u7684\u52A0\u8F7D\u6027\u80FD\u6307\u6807\u3002"})})]}),`
`,l(e.h2,{id:"\u4EC0\u4E48\u662F-ttfb",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4EC0\u4E48\u662F-ttfb",children:"#"}),"\u4EC0\u4E48\u662F TTFB\uFF1F"]}),`
`,n(e.p,{children:"TTFB \u662F\u6307\u4ECE\u5BFC\u822A\u8BF7\u6C42\u5F00\u59CB\u5230\u5BA2\u6237\u7AEF\u6536\u5230\u670D\u52A1\u5668\u54CD\u5E94\u7684\u7B2C\u4E00\u4E2A\u5B57\u8282\u7684\u65F6\u95F4\u3002\u5B83\u5305\u62EC\u7F51\u7EDC\u8BBE\u7F6E\u65F6\u95F4\uFF08SSL\u3001DNS\u3001TCP\uFF09\u548C\u670D\u52A1\u5668\u7AEF\u5904\u7406\u65F6\u95F4\u3002"}),`
`,l(e.p,{children:[n(e.img,{src:"https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231106150301.png",alt:"20231106150301"}),`
`,n(e.em,{children:"\u7F51\u7EDC\u8BF7\u6C42\u9636\u6BB5\u53CA\u5176\u76F8\u5173\u65F6\u5E8F\u56FE\u3002TTFB \u6D4B\u91CF startTime \u4E0E responseStart \u4E4B\u95F4\u7684\u8017\u65F6\u3002\u8BE5\u6307\u6807\u7B49\u540C\u4E8E performance.getEntriesByType('navigation')[0].responseStart"})]}),`
`,n(e.p,{children:"TTFB \u662F\u4EE5\u4E0B\u8BF7\u6C42\u9636\u6BB5\u7684\u603B\u548C\uFF1A"}),`
`,l(e.ul,{children:[`
`,n(e.li,{children:"\u91CD\u5B9A\u5411\u65F6\u95F4"}),`
`,n(e.li,{children:"\u670D\u52A1\u5DE5\u4F5C\u8005\u542F\u52A8\u65F6\u95F4\uFF08\u5982\u9002\u7528\uFF09"}),`
`,n(e.li,{children:"DNS \u67E5\u627E"}),`
`,n(e.li,{children:"\u8FDE\u63A5\u548C TLS \u534F\u5546"}),`
`,n(e.li,{children:"\u8BF7\u6C42\uFF0C\u76F4\u5230\u54CD\u5E94\u7684\u7B2C\u4E00\u4E2A\u5B57\u8282\u5230\u8FBE\u4E3A\u6B62"}),`
`,n(e.li,{children:"\u51CF\u5C11\u8FDE\u63A5\u5EFA\u7ACB\u65F6\u95F4\u548C\u540E\u7AEF\u7684\u5EF6\u8FDF\u5C06\u6709\u52A9\u4E8E\u964D\u4F4E TTFB\u3002"}),`
`]}),`
`,l(e.h3,{id:"\u4EC0\u4E48\u662F\u826F\u597D\u7684-ttfb-\u5206\u6570",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4EC0\u4E48\u662F\u826F\u597D\u7684-ttfb-\u5206\u6570",children:"#"}),"\u4EC0\u4E48\u662F\u826F\u597D\u7684 TTFB \u5206\u6570\uFF1F"]}),`
`,l(e.p,{children:["\u7531\u4E8E TTFB \u4F18\u5148\u4E8E",n(e.a,{href:"https://web.dev/articles/user-centric-performance-metrics",target:"_blank",rel:"nofollow",children:"\u4EE5\u7528\u6237\u4E3A\u4E2D\u5FC3\u7684\u6307\u6807"}),'\uFF0C\u5982 "',n(e.a,{href:"https://web.dev/articles/fcp",target:"_blank",rel:"nofollow",children:'\u9996\u6B21\u5185\u5BB9\u586B\u5145"\uFF08FCP\uFF09'}),'\u548C "',n(e.a,{href:"https://web.dev/articles/lcp",target:"_blank",rel:"nofollow",children:'\u6700\u5927\u5185\u5BB9\u586B\u5145"\uFF08LCP\uFF09'}),'\uFF0C\u56E0\u6B64\u5EFA\u8BAE\u60A8\u7684\u670D\u52A1\u5668\u8DB3\u591F\u5FEB\u5730\u54CD\u5E94\u5BFC\u822A\u8BF7\u6C42\uFF0C\u4EE5\u4FBF\u7B2C 75 \u767E\u5206\u4F4D\u6570\u7684\u7528\u6237\u4F53\u9A8C\u5230 "\u826F\u597D "\u9608\u503C\u5185\u7684 FCP\u3002\u4F5C\u4E3A\u7C97\u7565\u7684\u6307\u5BFC\uFF0C\u5927\u591A\u6570\u7F51\u7AD9\u5E94\u52AA\u529B\u5C06\u7B2C\u4E00\u4E2A\u5B57\u8282\u7684\u65F6\u95F4\u63A7\u5236\u5728 0.8 \u79D2\u6216\u66F4\u77ED\u3002']}),`
`,n(e.p,{children:n(e.img,{src:"https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231106151052.png",alt:"20231106151052"})}),`
`,l(e.div,{className:"island-directive info",children:[n(e.p,{className:"island-directive-title",children:"INFO"}),l(e.div,{className:"island-directive-content",children:[l(e.p,{children:["TTFB \u5E76\u975E",n(e.a,{href:"https://web.dev/articles/vitals",target:"_blank",rel:"nofollow",children:"\u6838\u5FC3\u7F51\u7AD9\u751F\u547D\u503C\u6307\u6807"}),'\uFF0C\u56E0\u6B64\u7F51\u7AD9\u5E76\u4E0D\u7EDD\u5BF9\u9700\u8981\u8FBE\u5230 "\u826F\u597D "\u7684 TTFB \u95E8\u69DB\uFF0C\u53EA\u8981\u4E0D\u59A8\u788D\u5176\u5728\u91CD\u8981\u6307\u6807\u4E0A\u53D6\u5F97\u597D\u6210\u7EE9\u5373\u53EF\u3002']}),n(e.p,{children:"\u7F51\u7AD9\u63D0\u4F9B\u5185\u5BB9\u7684\u65B9\u5F0F\u5404\u4E0D\u76F8\u540C\u3002\u4F4E TTFB \u5BF9\u4E8E\u5C3D\u5FEB\u5411\u5BA2\u6237\u63D0\u4F9B\u6807\u8BB0\u81F3\u5173\u91CD\u8981\u3002\u4F46\u662F\uFF0C\u5982\u679C\u7F51\u7AD9\u5FEB\u901F\u4EA4\u4ED8\u4E86\u521D\u59CB\u6807\u8BB0\uFF0C\u4F46\u8BE5\u6807\u8BB0\u9700\u8981 JavaScript \u6765\u586B\u5145\u6709\u610F\u4E49\u7684\u5185\u5BB9\uFF08\u5982\u5355\u9875\u9762\u5E94\u7528\u7A0B\u5E8F (SPA)\uFF09\uFF0C\u90A3\u4E48\u5B9E\u73B0\u5C3D\u53EF\u80FD\u4F4E\u7684 TTFB \u5C31\u663E\u5F97\u5C24\u4E3A\u91CD\u8981\uFF0C\u8FD9\u6837\u5BA2\u6237\u7AEF\u5C31\u53EF\u4EE5\u66F4\u5FEB\u5730\u6E32\u67D3\u6807\u8BB0\u3002"}),n(e.p,{children:'\u76F8\u53CD\uFF0C\u670D\u52A1\u5668\u6E32\u67D3\u7684\u7F51\u7AD9\u4E0D\u9700\u8981\u90A3\u4E48\u591A\u5BA2\u6237\u7AEF\u5DE5\u4F5C\uFF0C\u5176 TTFB \u53EF\u80FD\u66F4\u9AD8\uFF0C\u4F46 FCP \u548C LCP \u503C\u5374\u6BD4\u5B8C\u5168\u5BA2\u6237\u7AEF\u6E32\u67D3\u7684\u4F53\u9A8C\u66F4\u597D\u3002\u8FD9\u5C31\u662F\u4E3A\u4EC0\u4E48 TTFB \u4E34\u754C\u503C\u53EA\u662F\u4E00\u4E2A "\u7C97\u7565\u7684\u6307\u5357"\uFF0C\u9700\u8981\u6839\u636E\u7F51\u7AD9\u63D0\u4F9B\u6838\u5FC3\u5185\u5BB9\u7684\u65B9\u5F0F\u8FDB\u884C\u6743\u8861\u3002'})]})]}),`
`,l(e.h2,{id:"\u5982\u4F55\u6D4B\u91CF-ttfb",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5982\u4F55\u6D4B\u91CF-ttfb",children:"#"}),"\u5982\u4F55\u6D4B\u91CF TTFB"]}),`
`,l(e.p,{children:["TTFB \u53EF\u901A\u8FC7\u4EE5\u4E0B\u65B9\u6CD5\u5728",n(e.a,{href:"https://web.dev/articles/user-centric-performance-metrics#in_the_lab",target:"_blank",rel:"nofollow",children:"\u5B9E\u9A8C\u5BA4"}),"\u6216",n(e.a,{href:"https://web.dev/articles/user-centric-performance-metrics#in_the_field",target:"_blank",rel:"nofollow",children:"\u5B9E\u5730"}),"\u8FDB\u884C\u6D4B\u91CF\u3002"]}),`
`,n(e.p,{children:"\u73B0\u573A\u5DE5\u5177"}),`
`,l(e.ul,{children:[`
`,n(e.li,{children:n(e.a,{href:"https://developer.chrome.com/docs/crux/",target:"_blank",rel:"nofollow",children:"Chrome \u6D4F\u89C8\u5668\u7528\u6237\u4F53\u9A8C\u62A5\u544A"})}),`
`,n(e.li,{children:n(e.a,{href:"https://github.com/GoogleChrome/web-vitals",target:"_blank",rel:"nofollow",children:"web-vitals JavaScript \u5E93"})}),`
`]}),`
`,n(e.p,{children:"\u5B9E\u9A8C\u5BA4\u5DE5\u5177"}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:["\u5728 Chrome \u6D4F\u89C8\u5668 DevTools \u7684",n(e.a,{href:"https://developer.chrome.com/docs/devtools/network/",target:"_blank",rel:"nofollow",children:"\u7F51\u7EDC\u9762\u677F"}),"\u4E2D"]}),`
`,n(e.li,{children:n(e.a,{href:"https://www.webpagetest.org/",target:"_blank",rel:"nofollow",children:"\u7F51\u9875\u6D4B\u8BD5"})}),`
`]}),`
`,l(e.h3,{id:"\u5982\u4F55\u5224\u65AD\u5FEB\u901F\u5E73\u5747\u6162\u901F",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5982\u4F55\u5224\u65AD\u5FEB\u901F\u5E73\u5747\u6162\u901F",children:"#"}),"\u5982\u4F55\u5224\u65AD\uFF1F\u5FEB\u901F\u3001\u5E73\u5747\u3001\u6162\u901F\uFF1F"]}),`
`,n(e.p,{children:"\u5FEB\u901F/\u5E73\u5747/\u6162\u901F TTFB \u7684\u9608\u503C\u662F\uFF1A\u5FEB\u901F TTFB \u7684\u4E0A\u9650\u4E3A 800 \u6BEB\u79D2\uFF0C\u6162\u901F TTFB \u7684\u4E0B\u9650\u4E3A 1800 \u6BEB\u79D2\u3002"}),`
`,n(e.p,{children:"\u5BF9\u6BCF\u4E2A\u7F51\u7AD9\u7684\u7B2C 75 \u767E\u5206\u4F4D\u6570 (p75) TTFB \u8FDB\u884C\u5206\u6790\uFF0C\u6839\u636E\u5176\u5728\u8FD9\u4E9B\u9608\u503C\u4E4B\u95F4\u7684\u4F4D\u7F6E\u6765\u786E\u5B9A\u662F\u5FEB\u8FD8\u662F\u6162\u3002"}),`
`,n(e.p,{children:"\u6BCF\u53F0\u4E3B\u673A\u7684\u767E\u5206\u6BD4\u8BA1\u7B97\u65B9\u6CD5\u662F\uFF1A\u5C06 p75 TTFB \u4E3A\u5FEB\u901F\u3001\u5E73\u5747\u548C\u6162\u901F\u7684\u7F51\u7AD9\u6570\u91CF\u5206\u522B\u9664\u4EE5\u7F51\u7AD9\u603B\u6570\u3002"}),`
`,l(e.h3,{id:"\u5728-javascript-\u4E2D\u6D4B\u91CF-ttfb",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5728-javascript-\u4E2D\u6D4B\u91CF-ttfb",children:"#"}),"\u5728 JavaScript \u4E2D\u6D4B\u91CF TTFB"]}),`
`,l(e.p,{children:["\u60A8\u53EF\u4EE5\u4F7F\u7528",n(e.a,{href:"https://developer.mozilla.org/docs/Web/API/Navigation_timing_API",target:"_blank",rel:"nofollow",children:"\u5BFC\u822A\u5B9A\u65F6 API"})," \u6D4B\u91CF\u6D4F\u89C8\u5668\u4E2D",n(e.a,{href:"https://developer.mozilla.org/docs/Web/API/Request/mode",target:"_blank",rel:"nofollow",children:"\u5BFC\u822A\u8BF7\u6C42"}),"\u7684 TTFB\u3002\u4E0B\u9762\u7684\u793A\u4F8B\u5C55\u793A\u4E86\u5982\u4F55\u521B\u5EFA\u4E00\u4E2A PerformanceObserver\uFF0C\u7528\u4E8E\u76D1\u542C\u5BFC\u822A\u6761\u76EE\u5E76\u5C06\u5176\u8BB0\u5F55\u5230\u63A7\u5236\u53F0\uFF1A"]}),`
`,l(e.div,{className:"language-js line-numbers-mode",style:{backgroundColor:"#2e3440ff"},children:[n(e.button,{className:"copy"}),n(e.span,{className:"lang",children:"js"}),n(e.pre,{children:l(e.code,{className:"",children:[l(e.span,{className:"line",children:[n(e.span,{style:{color:"#81A1C1"},children:"new"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#88C0D0"},children:"PerformanceObserver"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"("}),n(e.span,{style:{color:"#ECEFF4"},children:"("}),n(e.span,{style:{color:"#D8DEE9"},children:"entryList"}),n(e.span,{style:{color:"#ECEFF4"},children:")"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"=>"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"  "}),n(e.span,{style:{color:"#81A1C1"},children:"const"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#ECEFF4"},children:"["}),n(e.span,{style:{color:"#D8DEE9"},children:"pageNav"}),n(e.span,{style:{color:"#ECEFF4"},children:"]"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"="}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"entryList"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#88C0D0"},children:"getEntriesByType"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"("}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#A3BE8C"},children:"navigation"}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#D8DEE9FF"},children:")"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,n(e.span,{className:"line"}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"  "}),n(e.span,{style:{color:"#D8DEE9"},children:"console"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#88C0D0"},children:"log"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"("}),n(e.span,{style:{color:"#ECEFF4"},children:"`"}),n(e.span,{style:{color:"#A3BE8C"},children:"TTFB: "}),n(e.span,{style:{color:"#81A1C1"},children:"${"}),n(e.span,{style:{color:"#D8DEE9"},children:"pageNav"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#D8DEE9"},children:"responseStart"}),n(e.span,{style:{color:"#81A1C1"},children:"}"}),n(e.span,{style:{color:"#ECEFF4"},children:"`"}),n(e.span,{style:{color:"#D8DEE9FF"},children:")"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#ECEFF4"},children:"}"}),n(e.span,{style:{color:"#D8DEE9FF"},children:")"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#88C0D0"},children:"observe"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"("}),n(e.span,{style:{color:"#ECEFF4"},children:"{"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"  "}),n(e.span,{style:{color:"#88C0D0"},children:"type"}),n(e.span,{style:{color:"#ECEFF4"},children:":"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#A3BE8C"},children:"navigation"}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#ECEFF4"},children:","})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"  "}),n(e.span,{style:{color:"#88C0D0"},children:"buffered"}),n(e.span,{style:{color:"#ECEFF4"},children:":"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"true"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#ECEFF4"},children:"}"}),n(e.span,{style:{color:"#D8DEE9FF"},children:")"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,n(e.span,{className:"line"})]})}),l(e.div,{className:"line-numbers-wrapper",children:[n(e.span,{className:"line-number",children:"1"}),n(e.span,{className:"line-number",children:"2"}),n(e.span,{className:"line-number",children:"3"}),n(e.span,{className:"line-number",children:"4"}),n(e.span,{className:"line-number",children:"5"}),n(e.span,{className:"line-number",children:"6"}),n(e.span,{className:"line-number",children:"7"}),n(e.span,{className:"line-number",children:"8"})]})]}),`
`,n(e.div,{}),`
`,n(e.p,{children:`\u6CE8\u610F\u5E76\u975E\u6240\u6709\u6D4F\u89C8\u5668\u90FD\u652F\u6301 PerformanceObserver \u6216\u5176\u7F13\u51B2\u6807\u5FD7\u3002\u8981\u83B7\u5F97\u5C3D\u53EF\u80FD\u591A\u7684\u6D4F\u89C8\u5668\u652F\u6301\uFF0C\u8BF7\u8003\u8651\u91C7\u7528 web-vitals \u8F6F\u4EF6\u5305\uFF0C\u4E0B\u6587\u5C06\u5BF9\u6B64\u8FDB\u884C\u8BA8\u8BBA\u3002
:::`}),`
`,l(e.p,{children:[n(e.a,{href:"https://github.com/GoogleChrome/web-vitals",target:"_blank",rel:"nofollow",children:"web-vitals JavaScript \u5E93"}),"\u4E5F\u53EF\u4EE5\u5728\u6D4F\u89C8\u5668\u4E2D\u6D4B\u91CF TTFB\uFF0C\u4F46\u590D\u6742\u7A0B\u5EA6\u8F83\u4F4E\uFF1A"]}),`
`,l(e.div,{className:"language-js line-numbers-mode",style:{backgroundColor:"#2e3440ff"},children:[n(e.button,{className:"copy"}),n(e.span,{className:"lang",children:"js"}),n(e.pre,{children:l(e.code,{className:"",children:[l(e.span,{className:"line",children:[n(e.span,{style:{color:"#81A1C1"},children:"import"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"}),n(e.span,{style:{color:"#8FBCBB"},children:"onTTFB"}),n(e.span,{style:{color:"#ECEFF4"},children:"}"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"from"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#A3BE8C"},children:"web-vitals"}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,n(e.span,{className:"line"}),`
`,n(e.span,{className:"line",children:n(e.span,{style:{color:"#616E88"},children:"// Measure and log TTFB as soon as it's available."})}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#88C0D0"},children:"onTTFB"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"("}),n(e.span,{style:{color:"#D8DEE9"},children:"console"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#D8DEE9"},children:"log"}),n(e.span,{style:{color:"#D8DEE9FF"},children:")"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,n(e.span,{className:"line"})]})}),l(e.div,{className:"line-numbers-wrapper",children:[n(e.span,{className:"line-number",children:"1"}),n(e.span,{className:"line-number",children:"2"}),n(e.span,{className:"line-number",children:"3"}),n(e.span,{className:"line-number",children:"4"})]})]}),`
`,l(e.h3,{id:"\u8861\u91CF\u8D44\u6E90\u8BF7\u6C42",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u8861\u91CF\u8D44\u6E90\u8BF7\u6C42",children:"#"}),"\u8861\u91CF\u8D44\u6E90\u8BF7\u6C42"]}),`
`,l(e.p,{children:["TTFB \u9002\u7528\u4E8E\u6240\u6709\u8BF7\u6C42\uFF0C\u800C\u4E0D\u4EC5\u4EC5\u662F\u5BFC\u822A\u8BF7\u6C42\u3002\u5C24\u5176\u662F\u6258\u7BA1\u5728\u8DE8\u6E90\u670D\u52A1\u5668\u4E0A\u7684\u8D44\u6E90\uFF0C\u7531\u4E8E\u9700\u8981\u5EFA\u7ACB\u4E0E\u8FD9\u4E9B\u670D\u52A1\u5668\u7684\u8FDE\u63A5\uFF0C\u56E0\u6B64\u4F1A\u4EA7\u751F\u5EF6\u8FDF\u3002\u8981\u6D4B\u91CF\u73B0\u573A\u8D44\u6E90\u7684 TTFB\uFF0C\u8BF7\u4F7F\u7528 PerformanceObserver \u4E2D\u7684",n(e.a,{href:"https://developer.mozilla.org/docs/Web/API/Resource_Timing_API/Using_the_Resource_Timing_API",target:"_blank",rel:"nofollow",children:"\u8D44\u6E90\u5B9A\u65F6 API"}),"\uFF1A"]}),`
`,l(e.div,{className:"language-js line-numbers-mode",style:{backgroundColor:"#2e3440ff"},children:[n(e.button,{className:"copy"}),n(e.span,{className:"lang",children:"js"}),n(e.pre,{children:l(e.code,{className:"",children:[l(e.span,{className:"line",children:[n(e.span,{style:{color:"#81A1C1"},children:"new"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#88C0D0"},children:"PerformanceObserver"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"("}),n(e.span,{style:{color:"#ECEFF4"},children:"("}),n(e.span,{style:{color:"#D8DEE9"},children:"entryList"}),n(e.span,{style:{color:"#ECEFF4"},children:")"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"=>"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"  "}),n(e.span,{style:{color:"#81A1C1"},children:"const"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"entries"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"="}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"entryList"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#88C0D0"},children:"getEntries"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"()"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,n(e.span,{className:"line"}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"  "}),n(e.span,{style:{color:"#81A1C1"},children:"for"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" ("}),n(e.span,{style:{color:"#81A1C1"},children:"const"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"entry"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"of"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"entries"}),n(e.span,{style:{color:"#D8DEE9FF"},children:") "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#ECEFF4"},children:"    "}),n(e.span,{style:{color:"#616E88"},children:"// Some resources may have a responseStart value of 0, due"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#ECEFF4"},children:"    "}),n(e.span,{style:{color:"#616E88"},children:"// to the resource being cached, or a cross-origin resource"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#ECEFF4"},children:"    "}),n(e.span,{style:{color:"#616E88"},children:"// being served without a Timing-Allow-Origin header set."})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"    "}),n(e.span,{style:{color:"#81A1C1"},children:"if"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" ("}),n(e.span,{style:{color:"#D8DEE9"},children:"entry"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#D8DEE9"},children:"responseStart"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:">"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#B48EAD"},children:"0"}),n(e.span,{style:{color:"#D8DEE9FF"},children:") "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"      "}),n(e.span,{style:{color:"#D8DEE9"},children:"console"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#88C0D0"},children:"log"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"("}),n(e.span,{style:{color:"#ECEFF4"},children:"`"}),n(e.span,{style:{color:"#A3BE8C"},children:"TTFB: "}),n(e.span,{style:{color:"#81A1C1"},children:"${"}),n(e.span,{style:{color:"#D8DEE9"},children:"entry"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#D8DEE9"},children:"responseStart"}),n(e.span,{style:{color:"#81A1C1"},children:"}"}),n(e.span,{style:{color:"#ECEFF4"},children:"`"}),n(e.span,{style:{color:"#ECEFF4"},children:","}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"entry"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#D8DEE9"},children:"name"}),n(e.span,{style:{color:"#D8DEE9FF"},children:")"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"    "}),n(e.span,{style:{color:"#ECEFF4"},children:"}"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"  "}),n(e.span,{style:{color:"#ECEFF4"},children:"}"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#ECEFF4"},children:"}"}),n(e.span,{style:{color:"#D8DEE9FF"},children:")"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#88C0D0"},children:"observe"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"("}),n(e.span,{style:{color:"#ECEFF4"},children:"{"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"  "}),n(e.span,{style:{color:"#88C0D0"},children:"type"}),n(e.span,{style:{color:"#ECEFF4"},children:":"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#A3BE8C"},children:"resource"}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#ECEFF4"},children:","})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"  "}),n(e.span,{style:{color:"#88C0D0"},children:"buffered"}),n(e.span,{style:{color:"#ECEFF4"},children:":"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"true"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#ECEFF4"},children:"}"}),n(e.span,{style:{color:"#D8DEE9FF"},children:")"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,n(e.span,{className:"line"})]})}),l(e.div,{className:"line-numbers-wrapper",children:[n(e.span,{className:"line-number",children:"1"}),n(e.span,{className:"line-number",children:"2"}),n(e.span,{className:"line-number",children:"3"}),n(e.span,{className:"line-number",children:"4"}),n(e.span,{className:"line-number",children:"5"}),n(e.span,{className:"line-number",children:"6"}),n(e.span,{className:"line-number",children:"7"}),n(e.span,{className:"line-number",children:"8"}),n(e.span,{className:"line-number",children:"9"}),n(e.span,{className:"line-number",children:"10"}),n(e.span,{className:"line-number",children:"11"}),n(e.span,{className:"line-number",children:"12"}),n(e.span,{className:"line-number",children:"13"}),n(e.span,{className:"line-number",children:"14"}),n(e.span,{className:"line-number",children:"15"})]})]}),`
`,l(e.p,{children:[`\u8F93\u51FA\u7ED3\u679C:
`,n(e.img,{src:"https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231106225827.png",alt:"20231106225827"})]}),`
`,n(e.p,{children:'\u4E0A\u9762\u7684\u4EE3\u7801\u7247\u6BB5\u7C7B\u4F3C\u4E8E\u7528\u4E8E\u6D4B\u91CF\u5BFC\u822A\u8BF7\u6C42\u7684TTFB\u7684\u4EE3\u7801\u7247\u6BB5\uFF0C\uFF0C\u53EA\u662F\u67E5\u8BE2\u7684\u4E0D\u662F "\u5BFC\u822A "\u6761\u76EE\uFF0C\u800C\u662F "\u8D44\u6E90 "\u6761\u76EE\u3002\u7531\u4E8E\u8FDE\u63A5\u5DF2\u7ECF\u6253\u5F00\uFF0C\u6216\u8D44\u6E90\u662F\u4ECE\u7F13\u5B58\u4E2D\u5373\u65F6\u83B7\u53D6\u7684\uFF0C\u56E0\u6B64\u4ECE\u4E3B\u6E90\u52A0\u8F7D\u7684\u67D0\u4E9B\u8D44\u6E90\u53EF\u80FD\u4F1A\u8FD4\u56DE 0 \u503C\uFF0C\u8FD9\u4E5F\u662F\u8BE5\u4EE3\u7801\u6BB5\u8003\u8651\u5230\u7684\u4E8B\u5B9E\u3002'}),`
`,l(e.h2,{id:"\u5982\u4F55\u63D0\u9AD8-ttfb",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5982\u4F55\u63D0\u9AD8-ttfb",children:"#"}),"\u5982\u4F55\u63D0\u9AD8 TTFB"]}),`
`,l(e.p,{children:["\u6211\u4EEC\u53D1\u5E03\u4E86\u5173\u4E8E",n(e.a,{href:"https://web.dev/articles/optimize-ttfb",target:"_blank",rel:"nofollow",children:"\u4F18\u5316 TTFB"})," \u7684\u6DF1\u5EA6\u6307\u5357\uFF0C\u4E3A\u60A8\u63D0\u4F9B\u66F4\u591A\u6539\u5584\u7F51\u7AD9 TTFB \u7684\u6307\u5BFC\u3002"]})]})}function d(r={}){const{wrapper:e}=r.components||{};return e?n(e,Object.assign({},r,{children:n(s,r)})):s(r)}const h="2023/11/9 01:52:20",p=`# Time to First Byte (TTFB) \u9996\u6B21\u5B57\u8282\u52A0\u8F7D\u65F6\u95F4

\u94FE\u63A5\uFF1Ahttps://web.dev/articles/ttfb?hl=zh-cn

## \u5B9A\u4E49

:::info
\u6CE8\uFF1A\u9996\u5B57\u8282\u65F6\u95F4 (TTFB) \u662F\u5B9E\u9A8C\u5BA4\u548C\u73B0\u573A\u6D4B\u91CF\u8FDE\u63A5\u5EFA\u7ACB\u65F6\u95F4\u548C\u7F51\u7EDC\u670D\u52A1\u5668\u54CD\u5E94\u901F\u5EA6\u7684\u57FA\u672C\u6307\u6807\u3002\u5B83\u6709\u52A9\u4E8E\u8BC6\u522B\u7F51\u7EDC\u670D\u52A1\u5668\u5BF9\u8BF7\u6C42\u7684\u54CD\u5E94\u901F\u5EA6\u662F\u5426\u8FC7\u6162\u3002\u5728\u5BFC\u822A\u8BF7\u6C42\uFF08\u5373 HTML \u6587\u6863\u8BF7\u6C42\uFF09\u7684\u60C5\u51B5\u4E0B\uFF0C\u5B83\u5148\u4E8E\u5176\u4ED6\u6240\u6709\u6709\u610F\u4E49\u7684\u52A0\u8F7D\u6027\u80FD\u6307\u6807\u3002
:::

## \u4EC0\u4E48\u662F TTFB\uFF1F
TTFB \u662F\u6307\u4ECE\u5BFC\u822A\u8BF7\u6C42\u5F00\u59CB\u5230\u5BA2\u6237\u7AEF\u6536\u5230\u670D\u52A1\u5668\u54CD\u5E94\u7684\u7B2C\u4E00\u4E2A\u5B57\u8282\u7684\u65F6\u95F4\u3002\u5B83\u5305\u62EC\u7F51\u7EDC\u8BBE\u7F6E\u65F6\u95F4\uFF08SSL\u3001DNS\u3001TCP\uFF09\u548C\u670D\u52A1\u5668\u7AEF\u5904\u7406\u65F6\u95F4\u3002

![20231106150301](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231106150301.png)
*\u7F51\u7EDC\u8BF7\u6C42\u9636\u6BB5\u53CA\u5176\u76F8\u5173\u65F6\u5E8F\u56FE\u3002TTFB \u6D4B\u91CF startTime \u4E0E responseStart \u4E4B\u95F4\u7684\u8017\u65F6\u3002\u8BE5\u6307\u6807\u7B49\u540C\u4E8E performance.getEntriesByType('navigation')[0].responseStart*

TTFB \u662F\u4EE5\u4E0B\u8BF7\u6C42\u9636\u6BB5\u7684\u603B\u548C\uFF1A

- \u91CD\u5B9A\u5411\u65F6\u95F4
- \u670D\u52A1\u5DE5\u4F5C\u8005\u542F\u52A8\u65F6\u95F4\uFF08\u5982\u9002\u7528\uFF09
- DNS \u67E5\u627E
- \u8FDE\u63A5\u548C TLS \u534F\u5546
- \u8BF7\u6C42\uFF0C\u76F4\u5230\u54CD\u5E94\u7684\u7B2C\u4E00\u4E2A\u5B57\u8282\u5230\u8FBE\u4E3A\u6B62
- \u51CF\u5C11\u8FDE\u63A5\u5EFA\u7ACB\u65F6\u95F4\u548C\u540E\u7AEF\u7684\u5EF6\u8FDF\u5C06\u6709\u52A9\u4E8E\u964D\u4F4E TTFB\u3002

### \u4EC0\u4E48\u662F\u826F\u597D\u7684 TTFB \u5206\u6570\uFF1F
\u7531\u4E8E TTFB \u4F18\u5148\u4E8E[\u4EE5\u7528\u6237\u4E3A\u4E2D\u5FC3\u7684\u6307\u6807](https://web.dev/articles/user-centric-performance-metrics)\uFF0C\u5982 "[\u9996\u6B21\u5185\u5BB9\u586B\u5145"\uFF08FCP\uFF09](https://web.dev/articles/fcp)\u548C "[\u6700\u5927\u5185\u5BB9\u586B\u5145"\uFF08LCP\uFF09](https://web.dev/articles/lcp)\uFF0C\u56E0\u6B64\u5EFA\u8BAE\u60A8\u7684\u670D\u52A1\u5668\u8DB3\u591F\u5FEB\u5730\u54CD\u5E94\u5BFC\u822A\u8BF7\u6C42\uFF0C\u4EE5\u4FBF\u7B2C 75 \u767E\u5206\u4F4D\u6570\u7684\u7528\u6237\u4F53\u9A8C\u5230 "\u826F\u597D "\u9608\u503C\u5185\u7684 FCP\u3002\u4F5C\u4E3A\u7C97\u7565\u7684\u6307\u5BFC\uFF0C\u5927\u591A\u6570\u7F51\u7AD9\u5E94\u52AA\u529B\u5C06\u7B2C\u4E00\u4E2A\u5B57\u8282\u7684\u65F6\u95F4\u63A7\u5236\u5728 0.8 \u79D2\u6216\u66F4\u77ED\u3002

![20231106151052](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231106151052.png)

:::info
TTFB \u5E76\u975E[\u6838\u5FC3\u7F51\u7AD9\u751F\u547D\u503C\u6307\u6807](https://web.dev/articles/vitals)\uFF0C\u56E0\u6B64\u7F51\u7AD9\u5E76\u4E0D\u7EDD\u5BF9\u9700\u8981\u8FBE\u5230 "\u826F\u597D "\u7684 TTFB \u95E8\u69DB\uFF0C\u53EA\u8981\u4E0D\u59A8\u788D\u5176\u5728\u91CD\u8981\u6307\u6807\u4E0A\u53D6\u5F97\u597D\u6210\u7EE9\u5373\u53EF\u3002

\u7F51\u7AD9\u63D0\u4F9B\u5185\u5BB9\u7684\u65B9\u5F0F\u5404\u4E0D\u76F8\u540C\u3002\u4F4E TTFB \u5BF9\u4E8E\u5C3D\u5FEB\u5411\u5BA2\u6237\u63D0\u4F9B\u6807\u8BB0\u81F3\u5173\u91CD\u8981\u3002\u4F46\u662F\uFF0C\u5982\u679C\u7F51\u7AD9\u5FEB\u901F\u4EA4\u4ED8\u4E86\u521D\u59CB\u6807\u8BB0\uFF0C\u4F46\u8BE5\u6807\u8BB0\u9700\u8981 JavaScript \u6765\u586B\u5145\u6709\u610F\u4E49\u7684\u5185\u5BB9\uFF08\u5982\u5355\u9875\u9762\u5E94\u7528\u7A0B\u5E8F (SPA)\uFF09\uFF0C\u90A3\u4E48\u5B9E\u73B0\u5C3D\u53EF\u80FD\u4F4E\u7684 TTFB \u5C31\u663E\u5F97\u5C24\u4E3A\u91CD\u8981\uFF0C\u8FD9\u6837\u5BA2\u6237\u7AEF\u5C31\u53EF\u4EE5\u66F4\u5FEB\u5730\u6E32\u67D3\u6807\u8BB0\u3002

\u76F8\u53CD\uFF0C\u670D\u52A1\u5668\u6E32\u67D3\u7684\u7F51\u7AD9\u4E0D\u9700\u8981\u90A3\u4E48\u591A\u5BA2\u6237\u7AEF\u5DE5\u4F5C\uFF0C\u5176 TTFB \u53EF\u80FD\u66F4\u9AD8\uFF0C\u4F46 FCP \u548C LCP \u503C\u5374\u6BD4\u5B8C\u5168\u5BA2\u6237\u7AEF\u6E32\u67D3\u7684\u4F53\u9A8C\u66F4\u597D\u3002\u8FD9\u5C31\u662F\u4E3A\u4EC0\u4E48 TTFB \u4E34\u754C\u503C\u53EA\u662F\u4E00\u4E2A "\u7C97\u7565\u7684\u6307\u5357"\uFF0C\u9700\u8981\u6839\u636E\u7F51\u7AD9\u63D0\u4F9B\u6838\u5FC3\u5185\u5BB9\u7684\u65B9\u5F0F\u8FDB\u884C\u6743\u8861\u3002
:::

## \u5982\u4F55\u6D4B\u91CF TTFB
TTFB \u53EF\u901A\u8FC7\u4EE5\u4E0B\u65B9\u6CD5\u5728[\u5B9E\u9A8C\u5BA4](https://web.dev/articles/user-centric-performance-metrics#in_the_lab)\u6216[\u5B9E\u5730](https://web.dev/articles/user-centric-performance-metrics#in_the_field)\u8FDB\u884C\u6D4B\u91CF\u3002

\u73B0\u573A\u5DE5\u5177
- [Chrome \u6D4F\u89C8\u5668\u7528\u6237\u4F53\u9A8C\u62A5\u544A](https://developer.chrome.com/docs/crux/)
- [web-vitals JavaScript \u5E93](https://github.com/GoogleChrome/web-vitals)

\u5B9E\u9A8C\u5BA4\u5DE5\u5177
- \u5728 Chrome \u6D4F\u89C8\u5668 DevTools \u7684[\u7F51\u7EDC\u9762\u677F](https://developer.chrome.com/docs/devtools/network/)\u4E2D
- [\u7F51\u9875\u6D4B\u8BD5](https://www.webpagetest.org/)

### \u5982\u4F55\u5224\u65AD\uFF1F\u5FEB\u901F\u3001\u5E73\u5747\u3001\u6162\u901F\uFF1F
\u5FEB\u901F/\u5E73\u5747/\u6162\u901F TTFB \u7684\u9608\u503C\u662F\uFF1A\u5FEB\u901F TTFB \u7684\u4E0A\u9650\u4E3A 800 \u6BEB\u79D2\uFF0C\u6162\u901F TTFB \u7684\u4E0B\u9650\u4E3A 1800 \u6BEB\u79D2\u3002

\u5BF9\u6BCF\u4E2A\u7F51\u7AD9\u7684\u7B2C 75 \u767E\u5206\u4F4D\u6570 (p75) TTFB \u8FDB\u884C\u5206\u6790\uFF0C\u6839\u636E\u5176\u5728\u8FD9\u4E9B\u9608\u503C\u4E4B\u95F4\u7684\u4F4D\u7F6E\u6765\u786E\u5B9A\u662F\u5FEB\u8FD8\u662F\u6162\u3002

\u6BCF\u53F0\u4E3B\u673A\u7684\u767E\u5206\u6BD4\u8BA1\u7B97\u65B9\u6CD5\u662F\uFF1A\u5C06 p75 TTFB \u4E3A\u5FEB\u901F\u3001\u5E73\u5747\u548C\u6162\u901F\u7684\u7F51\u7AD9\u6570\u91CF\u5206\u522B\u9664\u4EE5\u7F51\u7AD9\u603B\u6570\u3002

### \u5728 JavaScript \u4E2D\u6D4B\u91CF TTFB
\u60A8\u53EF\u4EE5\u4F7F\u7528[\u5BFC\u822A\u5B9A\u65F6 API](https://developer.mozilla.org/docs/Web/API/Navigation_timing_API) \u6D4B\u91CF\u6D4F\u89C8\u5668\u4E2D[\u5BFC\u822A\u8BF7\u6C42](https://developer.mozilla.org/docs/Web/API/Request/mode)\u7684 TTFB\u3002\u4E0B\u9762\u7684\u793A\u4F8B\u5C55\u793A\u4E86\u5982\u4F55\u521B\u5EFA\u4E00\u4E2A PerformanceObserver\uFF0C\u7528\u4E8E\u76D1\u542C\u5BFC\u822A\u6761\u76EE\u5E76\u5C06\u5176\u8BB0\u5F55\u5230\u63A7\u5236\u53F0\uFF1A

\`\`\`js
new PerformanceObserver((entryList) => {
  const [pageNav] = entryList.getEntriesByType('navigation');

  console.log(\`TTFB: \${pageNav.responseStart}\`);
}).observe({
  type: 'navigation',
  buffered: true
});
\`\`\`

::danger
\u6CE8\u610F\u5E76\u975E\u6240\u6709\u6D4F\u89C8\u5668\u90FD\u652F\u6301 PerformanceObserver \u6216\u5176\u7F13\u51B2\u6807\u5FD7\u3002\u8981\u83B7\u5F97\u5C3D\u53EF\u80FD\u591A\u7684\u6D4F\u89C8\u5668\u652F\u6301\uFF0C\u8BF7\u8003\u8651\u91C7\u7528 web-vitals \u8F6F\u4EF6\u5305\uFF0C\u4E0B\u6587\u5C06\u5BF9\u6B64\u8FDB\u884C\u8BA8\u8BBA\u3002
:::

[web-vitals JavaScript \u5E93](https://github.com/GoogleChrome/web-vitals)\u4E5F\u53EF\u4EE5\u5728\u6D4F\u89C8\u5668\u4E2D\u6D4B\u91CF TTFB\uFF0C\u4F46\u590D\u6742\u7A0B\u5EA6\u8F83\u4F4E\uFF1A

\`\`\`js
import {onTTFB} from 'web-vitals';

// Measure and log TTFB as soon as it's available.
onTTFB(console.log);
\`\`\`

### \u8861\u91CF\u8D44\u6E90\u8BF7\u6C42

TTFB \u9002\u7528\u4E8E\u6240\u6709\u8BF7\u6C42\uFF0C\u800C\u4E0D\u4EC5\u4EC5\u662F\u5BFC\u822A\u8BF7\u6C42\u3002\u5C24\u5176\u662F\u6258\u7BA1\u5728\u8DE8\u6E90\u670D\u52A1\u5668\u4E0A\u7684\u8D44\u6E90\uFF0C\u7531\u4E8E\u9700\u8981\u5EFA\u7ACB\u4E0E\u8FD9\u4E9B\u670D\u52A1\u5668\u7684\u8FDE\u63A5\uFF0C\u56E0\u6B64\u4F1A\u4EA7\u751F\u5EF6\u8FDF\u3002\u8981\u6D4B\u91CF\u73B0\u573A\u8D44\u6E90\u7684 TTFB\uFF0C\u8BF7\u4F7F\u7528 PerformanceObserver \u4E2D\u7684[\u8D44\u6E90\u5B9A\u65F6 API](https://developer.mozilla.org/docs/Web/API/Resource_Timing_API/Using_the_Resource_Timing_API)\uFF1A

\`\`\`js
new PerformanceObserver((entryList) => {
  const entries = entryList.getEntries();

  for (const entry of entries) {
    // Some resources may have a responseStart value of 0, due
    // to the resource being cached, or a cross-origin resource
    // being served without a Timing-Allow-Origin header set.
    if (entry.responseStart > 0) {
      console.log(\`TTFB: \${entry.responseStart}\`, entry.name);
    }
  }
}).observe({
  type: 'resource',
  buffered: true
});
\`\`\`

\u8F93\u51FA\u7ED3\u679C:
![20231106225827](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231106225827.png)

\u4E0A\u9762\u7684\u4EE3\u7801\u7247\u6BB5\u7C7B\u4F3C\u4E8E\u7528\u4E8E\u6D4B\u91CF\u5BFC\u822A\u8BF7\u6C42\u7684TTFB\u7684\u4EE3\u7801\u7247\u6BB5\uFF0C\uFF0C\u53EA\u662F\u67E5\u8BE2\u7684\u4E0D\u662F "\u5BFC\u822A "\u6761\u76EE\uFF0C\u800C\u662F "\u8D44\u6E90 "\u6761\u76EE\u3002\u7531\u4E8E\u8FDE\u63A5\u5DF2\u7ECF\u6253\u5F00\uFF0C\u6216\u8D44\u6E90\u662F\u4ECE\u7F13\u5B58\u4E2D\u5373\u65F6\u83B7\u53D6\u7684\uFF0C\u56E0\u6B64\u4ECE\u4E3B\u6E90\u52A0\u8F7D\u7684\u67D0\u4E9B\u8D44\u6E90\u53EF\u80FD\u4F1A\u8FD4\u56DE 0 \u503C\uFF0C\u8FD9\u4E5F\u662F\u8BE5\u4EE3\u7801\u6BB5\u8003\u8651\u5230\u7684\u4E8B\u5B9E\u3002

## \u5982\u4F55\u63D0\u9AD8 TTFB
\u6211\u4EEC\u53D1\u5E03\u4E86\u5173\u4E8E[\u4F18\u5316 TTFB](https://web.dev/articles/optimize-ttfb) \u7684\u6DF1\u5EA6\u6307\u5357\uFF0C\u4E3A\u60A8\u63D0\u4F9B\u66F4\u591A\u6539\u5584\u7F51\u7AD9 TTFB \u7684\u6307\u5BFC\u3002`;export{p as content,d as default,o as frontmatter,h as lastUpdatedTime,t as title,i as toc};
