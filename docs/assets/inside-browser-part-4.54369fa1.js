import{jsx as n,jsxs as l,Fragment as c}from"react/jsx-runtime";const t=void 0,a=[{id:"input-is-coming-to-the-compositor-\u8F93\u5165\u5230\u5408\u6210\u5668",text:"Input is coming to the Compositor \u8F93\u5165\u5230\u5408\u6210\u5668",depth:2},{id:"input-events-from-the-browsers-point-of-view-\u4ECE\u6D4F\u89C8\u5668\u89D2\u5EA6\u770B\u8F93\u5165\u4E8B\u4EF6",text:"Input events from the browser's point of view \u4ECE\u6D4F\u89C8\u5668\u89D2\u5EA6\u770B\u8F93\u5165\u4E8B\u4EF6",depth:2},{id:"compositor-receives-input-events-\u5408\u6210\u5668\u63A5\u6536\u8F93\u5165\u4E8B\u4EF6",text:"Compositor receives input events \u5408\u6210\u5668\u63A5\u6536\u8F93\u5165\u4E8B\u4EF6",depth:2},{id:"be-aware-when-you-write-event-handlers-\u7F16\u5199\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u65F6\u8981\u6CE8\u610F",text:"Be aware when you write event handlers \u7F16\u5199\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u65F6\u8981\u6CE8\u610F",depth:3},{id:"check-if-the-event-is-cancelable-\u68C0\u67E5\u4E8B\u4EF6\u662F\u5426\u53EF\u53D6\u6D88",text:"Check if the event is cancelable \u68C0\u67E5\u4E8B\u4EF6\u662F\u5426\u53EF\u53D6\u6D88",depth:2},{id:"finding-the-event-target",text:"Finding the event target",depth:2},{id:"minimizing-event-dispatches-to-the-main-thread-\u5C3D\u91CF\u51CF\u5C11\u4E3B\u7EBF\u7A0B\u7684\u4E8B\u4EF6\u6D3E\u53D1",text:"Minimizing event dispatches to the main thread \u5C3D\u91CF\u51CF\u5C11\u4E3B\u7EBF\u7A0B\u7684\u4E8B\u4EF6\u6D3E\u53D1",depth:2},{id:"usegetcoalescedeventsto-get-intra-frame-events-\u4F7F\u7528-getcoalescedevents-\u83B7\u53D6\u5E27\u5185\u4E8B\u4EF6",text:"Use\xA0getCoalescedEvents\xA0to get intra-frame events (\u4F7F\u7528 getCoalescedEvents \u83B7\u53D6\u5E27\u5185\u4E8B\u4EF6)",depth:2},{id:"next-steps",text:"Next steps",depth:2},{id:"use-lighthouse",text:"Use Lighthouse",depth:3},{id:"learn-how-to-measure-performance",text:"Learn how to measure performance",depth:3},{id:"add-feature-policy-to-your-site",text:"Add Feature Policy to your site",depth:3},{id:"wrap-up",text:"Wrap up",depth:2}],i="\u73B0\u4EE3\u7F51\u7EDC\u6D4F\u89C8\u5668\u5185\u5E55 \u2014 4";function r(s){const e=Object.assign({h1:"h1",a:"a",p:"p",code:"code",strong:"strong",hr:"hr",h2:"h2",img:"img",em:"em",h3:"h3",div:"div",button:"button",span:"span",pre:"pre"},s.components);return l(c,{children:[l(e.h1,{id:"\u73B0\u4EE3\u7F51\u7EDC\u6D4F\u89C8\u5668\u5185\u5E55--4",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u73B0\u4EE3\u7F51\u7EDC\u6D4F\u89C8\u5668\u5185\u5E55--4",children:"#"}),"\u73B0\u4EE3\u7F51\u7EDC\u6D4F\u89C8\u5668\u5185\u5E55 \u2014 4"]}),`
`,n(e.p,{children:n(e.code,{children:"metadata:"})}),`
`,l(e.p,{children:[n(e.strong,{children:"\u539F\u6807\u9898:"})," Inside look at modern web browser (part 4)"]}),`
`,l(e.p,{children:[n(e.strong,{children:"\u94FE\u63A5:"})," ",n(e.a,{href:"https://developer.chrome.com/blog/inside-browser-part4/",target:"_blank",rel:"nofollow",children:"https://developer.chrome.com/blog/inside-browser-part4/"})]}),`
`,n(e.hr,{}),`
`,l(e.h2,{id:"input-is-coming-to-the-compositor-\u8F93\u5165\u5230\u5408\u6210\u5668",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#input-is-coming-to-the-compositor-\u8F93\u5165\u5230\u5408\u6210\u5668",children:"#"}),"Input is coming to the Compositor \u8F93\u5165\u5230\u5408\u6210\u5668"]}),`
`,l(e.p,{children:["\u8FD9\u662F Chrome \u6D4F\u89C8\u5668\u56DB\u90E8\u66F2\u7CFB\u5217\u535A\u5BA2\u7684\u6700\u540E\u4E00\u7BC7\uFF0C\u63A2\u8BA8\u4E86 Chrome \u6D4F\u89C8\u5668\u662F\u5982\u4F55\u5904\u7406\u6211\u4EEC\u7684\u4EE3\u7801\u4EE5\u663E\u793A\u7F51\u7AD9\u7684\u3002\u5728\u4E0A\u4E00\u7BC7\u6587\u7AE0\u4E2D\uFF0C\u6211\u4EEC\u4E86\u89E3\u4E86",n(e.a,{href:"/chrome/modern-web-browser/inside-browser-part-3",children:"\u6E32\u67D3\u8FC7\u7A0B\u5E76\u5B66\u4E60\u4E86\u5408\u6210\u5668"}),"\u3002\u5728\u672C\u7BC7\u535A\u6587\u4E2D\uFF0C\u6211\u4EEC\u5C06\u4E86\u89E3\u5408\u6210\u5668\u5982\u4F55\u5728\u7528\u6237\u8F93\u5165\u65F6\u5B9E\u73B0\u6D41\u7545\u7684\u4EA4\u4E92\u3002"]}),`
`,l(e.h2,{id:"input-events-from-the-browsers-point-of-view-\u4ECE\u6D4F\u89C8\u5668\u89D2\u5EA6\u770B\u8F93\u5165\u4E8B\u4EF6",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#input-events-from-the-browsers-point-of-view-\u4ECE\u6D4F\u89C8\u5668\u89D2\u5EA6\u770B\u8F93\u5165\u4E8B\u4EF6",children:"#"}),"Input events from the browser's point of view \u4ECE\u6D4F\u89C8\u5668\u89D2\u5EA6\u770B\u8F93\u5165\u4E8B\u4EF6"]}),`
`,n(e.p,{children:'\u5F53\u60A8\u542C\u5230 "\u8F93\u5165\u4E8B\u4EF6 "\u65F6\uFF0C\u60A8\u53EF\u80FD\u53EA\u4F1A\u60F3\u5230\u5728\u6587\u672C\u6846\u4E2D\u6253\u5B57\u6216\u70B9\u51FB\u9F20\u6807\uFF0C\u4F46\u4ECE\u6D4F\u89C8\u5668\u7684\u89D2\u5EA6\u6765\u770B\uFF0C\u8F93\u5165\u610F\u5473\u7740\u7528\u6237\u7684\u4EFB\u4F55\u624B\u52BF\u3002\u9F20\u6807\u6EDA\u8F6E\u6EDA\u52A8\u662F\u4E00\u4E2A\u8F93\u5165\u4E8B\u4EF6\uFF0C\u89E6\u6478\u6216\u9F20\u6807\u79FB\u8FC7\u4E5F\u662F\u4E00\u4E2A\u8F93\u5165\u4E8B\u4EF6\u3002'}),`
`,n(e.p,{children:"\u5F53\u7528\u6237\u5728\u5C4F\u5E55\u4E0A\u505A\u51FA\u89E6\u6478\u7B49\u624B\u52BF\u65F6\uFF0C\u6D4F\u89C8\u5668\u8FDB\u7A0B\u4F1A\u9996\u5148\u63A5\u6536\u5230\u8BE5\u624B\u52BF\u3002\u4E0D\u8FC7\uFF0C\u6D4F\u89C8\u5668\u8FDB\u7A0B\u53EA\u77E5\u9053\u624B\u52BF\u53D1\u751F\u7684\u4F4D\u7F6E\uFF0C\u56E0\u4E3A\u6807\u7B7E\u9875\u5185\u7684\u5185\u5BB9\u662F\u7531\u5448\u73B0\u5668\u8FDB\u7A0B\u5904\u7406\u7684\u3002\u56E0\u6B64\uFF0C\u6D4F\u89C8\u5668\u8FDB\u7A0B\u4F1A\u5411\u5448\u73B0\u5668\u8FDB\u7A0B\u53D1\u9001\u4E8B\u4EF6\u7C7B\u578B\uFF08\u5982 touchstart\uFF09\u53CA\u5176\u5750\u6807\u3002\u5448\u73B0\u5668\u8FDB\u7A0B\u901A\u8FC7\u67E5\u627E\u4E8B\u4EF6\u76EE\u6807\u548C\u8FD0\u884C\u9644\u52A0\u7684\u4E8B\u4EF6\u76D1\u542C\u5668\u6765\u9002\u5F53\u5904\u7406\u8BE5\u4E8B\u4EF6\u3002"}),`
`,l(e.p,{children:[n(e.img,{src:"https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113164433.png",alt:"20231113164433"}),`
`,n(e.em,{children:"\u56FE 1\uFF1A\u8F93\u5165\u4E8B\u4EF6\u901A\u8FC7\u6D4F\u89C8\u5668\u8FDB\u7A0B\u4F20\u9012\u5230\u5448\u73B0\u5668\u8FDB\u7A0B"})]}),`
`,l(e.h2,{id:"compositor-receives-input-events-\u5408\u6210\u5668\u63A5\u6536\u8F93\u5165\u4E8B\u4EF6",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#compositor-receives-input-events-\u5408\u6210\u5668\u63A5\u6536\u8F93\u5165\u4E8B\u4EF6",children:"#"}),"Compositor receives input events \u5408\u6210\u5668\u63A5\u6536\u8F93\u5165\u4E8B\u4EF6"]}),`
`,n(e.p,{children:n(e.img,{src:"https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/202311131647540.gif?imageSlim",alt:"202311131647540"})}),`
`,n(e.p,{children:"\u5728\u4E0A\u4E00\u7BC7\u6587\u7AE0\u4E2D\uFF0C\u6211\u4EEC\u4E86\u89E3\u4E86\u5408\u6210\u5668\u5982\u4F55\u901A\u8FC7\u5408\u6210\u5149\u6805\u5316\u56FE\u5C42\u6765\u5E73\u6ED1\u5904\u7406\u6EDA\u52A8\u3002\u5982\u679C\u9875\u9762\u4E0A\u6CA1\u6709\u9644\u52A0\u8F93\u5165\u4E8B\u4EF6\u4FA6\u542C\u5668\uFF0C\u5408\u6210\u5668\u7EBF\u7A0B\u5C31\u53EF\u4EE5\u5B8C\u5168\u72EC\u7ACB\u4E8E\u4E3B\u7EBF\u7A0B\u521B\u5EFA\u65B0\u7684\u5408\u6210\u5E27\u3002\u4F46\u5982\u679C\u9875\u9762\u4E0A\u6709\u4E00\u4E9B\u4E8B\u4EF6\u76D1\u542C\u5668\u5462\uFF1F\u5408\u6210\u5668\u7EBF\u7A0B\u5982\u4F55\u786E\u5B9A\u4E8B\u4EF6\u662F\u5426\u9700\u8981\u5904\u7406\uFF1F"}),`
`,l(e.p,{children:[n(e.img,{src:"https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113164955.png",alt:"20231113164955"}),`
`,n(e.em,{children:"\u56FE 3\uFF1A\u63CF\u8FF0\u8F93\u5165\u5230\u975E\u5FEB\u901F\u6EDA\u52A8\u533A\u57DF\u7684\u793A\u610F\u56FE"})]}),`
`,l(e.h3,{id:"be-aware-when-you-write-event-handlers-\u7F16\u5199\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u65F6\u8981\u6CE8\u610F",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#be-aware-when-you-write-event-handlers-\u7F16\u5199\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u65F6\u8981\u6CE8\u610F",children:"#"}),"Be aware when you write event handlers \u7F16\u5199\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u65F6\u8981\u6CE8\u610F"]}),`
`,n(e.p,{children:"\u7F51\u7EDC\u5F00\u53D1\u4E2D\u5E38\u89C1\u7684\u4E8B\u4EF6\u5904\u7406\u6A21\u5F0F\u662F\u4E8B\u4EF6\u59D4\u6258\u3002\u7531\u4E8E\u4E8B\u4EF6\u4F1A\u5192\u6CE1\uFF0C\u56E0\u6B64\u53EF\u4EE5\u5728\u6700\u9876\u5C42\u7684\u5143\u7D20\u4E0A\u9644\u52A0\u4E00\u4E2A\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\uFF0C\u7136\u540E\u6839\u636E\u4E8B\u4EF6\u76EE\u6807\u59D4\u6258\u4EFB\u52A1\u3002\u60A8\u53EF\u80FD\u89C1\u8FC7\u6216\u5199\u8FC7\u7C7B\u4F3C\u4E0B\u9762\u8FD9\u6837\u7684\u4EE3\u7801\u3002"}),`
`,l(e.div,{className:"language-js line-numbers-mode",style:{backgroundColor:"#2e3440ff"},children:[n(e.button,{className:"copy"}),n(e.span,{className:"lang",children:"js"}),n(e.pre,{children:l(e.code,{className:"",children:[l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9"},children:"document"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#D8DEE9"},children:"body"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#88C0D0"},children:"addEventListener"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"("}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#A3BE8C"},children:"touchstart"}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#ECEFF4"},children:","}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"event"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"=>"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"    "}),n(e.span,{style:{color:"#81A1C1"},children:"if"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" ("}),n(e.span,{style:{color:"#D8DEE9"},children:"event"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#D8DEE9"},children:"target"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"==="}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"area"}),n(e.span,{style:{color:"#D8DEE9FF"},children:") "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"        "}),n(e.span,{style:{color:"#D8DEE9"},children:"event"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#88C0D0"},children:"preventDefault"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"()"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"    "}),n(e.span,{style:{color:"#ECEFF4"},children:"}"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#ECEFF4"},children:"}"}),n(e.span,{style:{color:"#D8DEE9FF"},children:")"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,n(e.span,{className:"line"})]})}),l(e.div,{className:"line-numbers-wrapper",children:[n(e.span,{className:"line-number",children:"1"}),n(e.span,{className:"line-number",children:"2"}),n(e.span,{className:"line-number",children:"3"}),n(e.span,{className:"line-number",children:"4"}),n(e.span,{className:"line-number",children:"5"})]})]}),`
`,n(e.p,{children:"\u7531\u4E8E\u53EA\u9700\u4E3A\u6240\u6709\u5143\u7D20\u7F16\u5199\u4E00\u4E2A\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\uFF0C\u56E0\u6B64\u8FD9\u79CD\u4E8B\u4EF6\u59D4\u6258\u6A21\u5F0F\u975E\u5E38\u7B26\u5408\u4EBA\u4F53\u5DE5\u7A0B\u5B66\u3002\u4F46\u662F\uFF0C\u5982\u679C\u4ECE\u6D4F\u89C8\u5668\u7684\u89D2\u5EA6\u6765\u770B\u8FD9\u6BB5\u4EE3\u7801\uFF0C\u73B0\u5728\u6574\u4E2A\u9875\u9762\u90FD\u88AB\u6807\u8BB0\u4E3A\u4E0D\u53EF\u5FEB\u901F\u6EDA\u52A8\u533A\u57DF\u3002\u8FD9\u610F\u5473\u7740\uFF0C\u5373\u4F7F\u60A8\u7684\u5E94\u7528\u7A0B\u5E8F\u4E0D\u5173\u5FC3\u9875\u9762\u67D0\u4E9B\u90E8\u5206\u7684\u8F93\u5165\uFF0C\u5408\u6210\u5668\u7EBF\u7A0B\u4E5F\u5FC5\u987B\u4E0E\u4E3B\u7EBF\u7A0B\u901A\u4FE1\uFF0C\u5E76\u5728\u6BCF\u6B21\u8F93\u5165\u4E8B\u4EF6\u5230\u6765\u65F6\u7B49\u5F85\u4E3B\u7EBF\u7A0B\u3002\u8FD9\u6837\uFF0C\u5408\u6210\u5668\u7684\u5E73\u6ED1\u6EDA\u52A8\u529F\u80FD\u5C31\u65E0\u6CD5\u5B9E\u73B0\u4E86\u3002"}),`
`,l(e.p,{children:[n(e.img,{src:"https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113165223.png",alt:"20231113165223"}),`
`,n(e.em,{children:"\u56FE 4\uFF1A\u5BF9\u8986\u76D6\u6574\u4E2A\u9875\u9762\u7684\u975E\u5FEB\u901F\u6EDA\u52A8\u533A\u57DF\u7684\u63CF\u8FF0\u8F93\u5165\u793A\u610F\u56FE"})]}),`
`,n(e.p,{children:"\u4E3A\u4E86\u907F\u514D\u8FD9\u79CD\u60C5\u51B5\u53D1\u751F\uFF0C\u60A8\u53EF\u4EE5\u5728\u4E8B\u4EF6\u76D1\u542C\u5668\u4E2D\u4F7F\u7528 passive: true \u9009\u9879\u3002\u8FD9\u6837\u6D4F\u89C8\u5668\u5C31\u4F1A\u77E5\u9053\u4F60\u4ECD\u60F3\u5728\u4E3B\u7EBF\u7A0B\u4E2D\u76D1\u542C\u4E8B\u4EF6\uFF0C\u4F46\u5408\u6210\u5668\u4E5F\u53EF\u4EE5\u7EE7\u7EED\u5408\u6210\u65B0\u5E27\u3002"}),`
`,l(e.div,{className:"language-js line-numbers-mode",style:{backgroundColor:"#2e3440ff"},children:[n(e.button,{className:"copy"}),n(e.span,{className:"lang",children:"js"}),n(e.pre,{children:l(e.code,{className:"",children:[l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9"},children:"document"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#D8DEE9"},children:"body"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#88C0D0"},children:"addEventListener"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"("}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#A3BE8C"},children:"touchstart"}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#ECEFF4"},children:","}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"event"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"=>"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"    "}),n(e.span,{style:{color:"#81A1C1"},children:"if"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" ("}),n(e.span,{style:{color:"#D8DEE9"},children:"event"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#D8DEE9"},children:"target"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"==="}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"area"}),n(e.span,{style:{color:"#D8DEE9FF"},children:") "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"        "}),n(e.span,{style:{color:"#D8DEE9"},children:"event"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#88C0D0"},children:"preventDefault"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"()"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"    "}),n(e.span,{style:{color:"#ECEFF4"},children:"}"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#ECEFF4"},children:"},"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"}),n(e.span,{style:{color:"#88C0D0"},children:"passive"}),n(e.span,{style:{color:"#ECEFF4"},children:":"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"true"}),n(e.span,{style:{color:"#ECEFF4"},children:"}"}),n(e.span,{style:{color:"#D8DEE9FF"},children:")"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,n(e.span,{className:"line"})]})}),l(e.div,{className:"line-numbers-wrapper",children:[n(e.span,{className:"line-number",children:"1"}),n(e.span,{className:"line-number",children:"2"}),n(e.span,{className:"line-number",children:"3"}),n(e.span,{className:"line-number",children:"4"}),n(e.span,{className:"line-number",children:"5"})]})]}),`
`,l(e.h2,{id:"check-if-the-event-is-cancelable-\u68C0\u67E5\u4E8B\u4EF6\u662F\u5426\u53EF\u53D6\u6D88",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#check-if-the-event-is-cancelable-\u68C0\u67E5\u4E8B\u4EF6\u662F\u5426\u53EF\u53D6\u6D88",children:"#"}),"Check if the event is cancelable \u68C0\u67E5\u4E8B\u4EF6\u662F\u5426\u53EF\u53D6\u6D88"]}),`
`,n(e.p,{children:"\u8BD5\u60F3\u4E00\u4E0B\uFF0C\u5982\u679C\u60A8\u60F3\u5C06\u9875\u9762\u4E2D\u7684\u4E00\u4E2A\u65B9\u6846\u7684\u6EDA\u52A8\u65B9\u5411\u9650\u5236\u4E3A\u53EA\u80FD\u6A2A\u5411\u6EDA\u52A8\uFF0C\u60A8\u4F1A\u600E\u4E48\u505A\u5462\uFF1F"}),`
`,l(e.p,{children:[n(e.img,{src:"https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113165516.png",alt:"20231113165516"}),`
`,n(e.em,{children:"\u56FE 5\uFF1A\u90E8\u5206\u9875\u9762\u56FA\u5B9A\u4E3A\u6C34\u5E73\u6EDA\u52A8\u7684\u7F51\u9875"})]}),`
`,l(e.p,{children:["\u5728\u6307\u9488\u4E8B\u4EF6\u4E2D\u4F7F\u7528 ",n(e.code,{children:"passive: true"})," \u9009\u9879\u610F\u5473\u7740\u9875\u9762\u6EDA\u52A8\u53EF\u4EE5\u5E73\u6ED1\uFF0C\u4F46\u5F53\u60A8\u60F3\u8981",n(e.code,{children:"preventDefault"}),"\u4EE5\u9650\u5236\u6EDA\u52A8\u65B9\u5411\u65F6\uFF0C\u5782\u76F4\u6EDA\u52A8\u53EF\u80FD\u5DF2\u7ECF\u5F00\u59CB\u3002\u60A8\u53EF\u4EE5\u4F7F\u7528 ",n(e.code,{children:"event.cancelable"})," \u65B9\u6CD5\u6765\u68C0\u67E5\u8FD9\u4E00\u70B9"]}),`
`,l(e.div,{className:"language-js line-numbers-mode",style:{backgroundColor:"#2e3440ff"},children:[n(e.button,{className:"copy"}),n(e.span,{className:"lang",children:"js"}),n(e.pre,{children:l(e.code,{className:"",children:[l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9"},children:"document"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#D8DEE9"},children:"body"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#88C0D0"},children:"addEventListener"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"("}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#A3BE8C"},children:"pointermove"}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#ECEFF4"},children:","}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"event"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"=>"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"    "}),n(e.span,{style:{color:"#81A1C1"},children:"if"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" ("}),n(e.span,{style:{color:"#D8DEE9"},children:"event"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#D8DEE9"},children:"cancelable"}),n(e.span,{style:{color:"#D8DEE9FF"},children:") "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"        "}),n(e.span,{style:{color:"#D8DEE9"},children:"event"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#88C0D0"},children:"preventDefault"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"()"}),n(e.span,{style:{color:"#81A1C1"},children:";"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#616E88"},children:"// block the native scroll"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"        "}),n(e.span,{style:{color:"#616E88"},children:"/*"})]}),`
`,n(e.span,{className:"line",children:n(e.span,{style:{color:"#616E88"},children:"        *  do what you want the application to do here"})}),`
`,n(e.span,{className:"line",children:n(e.span,{style:{color:"#616E88"},children:"        */"})}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"    "}),n(e.span,{style:{color:"#ECEFF4"},children:"}"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#ECEFF4"},children:"},"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"}),n(e.span,{style:{color:"#88C0D0"},children:"passive"}),n(e.span,{style:{color:"#ECEFF4"},children:":"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"true"}),n(e.span,{style:{color:"#ECEFF4"},children:"}"}),n(e.span,{style:{color:"#D8DEE9FF"},children:")"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,n(e.span,{className:"line"})]})}),l(e.div,{className:"line-numbers-wrapper",children:[n(e.span,{className:"line-number",children:"1"}),n(e.span,{className:"line-number",children:"2"}),n(e.span,{className:"line-number",children:"3"}),n(e.span,{className:"line-number",children:"4"}),n(e.span,{className:"line-number",children:"5"}),n(e.span,{className:"line-number",children:"6"}),n(e.span,{className:"line-number",children:"7"}),n(e.span,{className:"line-number",children:"8"})]})]}),`
`,l(e.p,{children:["\u6216\u8005\uFF0C\u60A8\u4E5F\u53EF\u4EE5\u4F7F\u7528 CSS \u89C4\u5219\uFF08\u5982 ",n(e.code,{children:"touch-action"}),"\uFF09\u6765\u5B8C\u5168\u6D88\u9664\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u3002"]}),`
`,l(e.div,{className:"language-scss line-numbers-mode",style:{backgroundColor:"#2e3440ff"},children:[n(e.button,{className:"copy"}),n(e.span,{className:"lang",children:"scss"}),n(e.pre,{children:l(e.code,{className:"",children:[l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"    "}),n(e.span,{style:{color:"#ECEFF4"},children:"#"}),n(e.span,{style:{color:"#8FBCBB"},children:"area"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"  "}),n(e.span,{style:{color:"#D8DEE9"},children:"touch-action"}),n(e.span,{style:{color:"#ECEFF4"},children:":"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"pan-x;"}),n(e.span,{style:{color:"#ECEFF4"},children:"}"})]}),`
`,n(e.span,{className:"line"})]})}),n(e.div,{className:"line-numbers-wrapper",children:n(e.span,{className:"line-number",children:"1"})})]}),`
`,l(e.h2,{id:"finding-the-event-target",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#finding-the-event-target",children:"#"}),"Finding the event target"]}),`
`,l(e.p,{children:[n(e.img,{src:"https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113170030.png",alt:"20231113170030"}),`
`,n(e.em,{children:"\u56FE 6\uFF1A\u4E3B\u7EBF\u7A0B\u67E5\u770B\u7ED8\u5236\u8BB0\u5F55\uFF0C\u8BE2\u95EE\u5728 x.y \u70B9\u4E0A\u7ED8\u5236\u4E86\u4EC0\u4E48\u3002"})]}),`
`,n(e.p,{children:"\u5F53\u5408\u6210\u5668\u7EBF\u7A0B\u5C06\u8F93\u5165\u4E8B\u4EF6\u53D1\u9001\u5230\u4E3B\u7EBF\u7A0B\u65F6\uFF0C\u9996\u5148\u8981\u8FD0\u884C\u7684\u662F\u627E\u5230\u4E8B\u4EF6\u76EE\u6807\u7684\u547D\u4E2D\u6D4B\u8BD5\u3002\u547D\u4E2D\u6D4B\u8BD5\u4F7F\u7528\u6E32\u67D3\u8FC7\u7A0B\u4E2D\u751F\u6210\u7684\u7ED8\u5236\u8BB0\u5F55\u6570\u636E\u6765\u627E\u51FA\u4E8B\u4EF6\u53D1\u751F\u7684\u70B9\u5750\u6807\u4E0B\u7684\u5185\u5BB9\u3002"}),`
`,l(e.div,{className:"island-directive tip",children:[n(e.p,{className:"island-directive-title",children:"\u539F\u6587"}),n(e.div,{className:"island-directive-content",children:n(e.p,{children:"When the compositor thread sends an input event to the main thread, the first thing to run is a hit test to find the event target. Hit test uses paint records data that was generated in the rendering process to find out what is underneath the point coordinates in which the event occurred."})})]}),`
`,l(e.h2,{id:"minimizing-event-dispatches-to-the-main-thread-\u5C3D\u91CF\u51CF\u5C11\u4E3B\u7EBF\u7A0B\u7684\u4E8B\u4EF6\u6D3E\u53D1",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#minimizing-event-dispatches-to-the-main-thread-\u5C3D\u91CF\u51CF\u5C11\u4E3B\u7EBF\u7A0B\u7684\u4E8B\u4EF6\u6D3E\u53D1",children:"#"}),"Minimizing event dispatches to the main thread \u5C3D\u91CF\u51CF\u5C11\u4E3B\u7EBF\u7A0B\u7684\u4E8B\u4EF6\u6D3E\u53D1"]}),`
`,n(e.p,{children:"\u5728\u4E0A\u4E00\u7BC7\u6587\u7AE0\u4E2D\uFF0C\u6211\u4EEC\u8BA8\u8BBA\u4E86\u5178\u578B\u663E\u793A\u5668\u6BCF\u79D2\u5237\u65B0\u5C4F\u5E55 60 \u6B21\u7684\u60C5\u51B5\uFF0C\u4EE5\u53CA\u6211\u4EEC\u9700\u8981\u5982\u4F55\u8DDF\u4E0A\u8282\u594F\u4EE5\u5B9E\u73B0\u6D41\u7545\u7684\u52A8\u753B\u6548\u679C\u3002\u5728\u8F93\u5165\u65B9\u9762\uFF0C\u5178\u578B\u7684\u89E6\u6478\u5C4F\u8BBE\u5907\u6BCF\u79D2\u4F1A\u4EA7\u751F 60-120 \u6B21\u89E6\u6478\u4E8B\u4EF6\uFF0C\u800C\u5178\u578B\u7684\u9F20\u6807\u6BCF\u79D2\u4F1A\u4EA7\u751F 100 \u6B21\u4E8B\u4EF6\u3002\u8F93\u5165\u4E8B\u4EF6\u7684\u4FDD\u771F\u5EA6\u9AD8\u4E8E\u6211\u4EEC\u7684\u5C4F\u5E55\u5237\u65B0\u901F\u5EA6\u3002"}),`
`,l(e.p,{children:["\u5982\u679C\u50CF ",n(e.code,{children:"touchmove"})," \u8FD9\u6837\u7684\u8FDE\u7EED\u4E8B\u4EF6\u6BCF\u79D2\u5411\u4E3B\u7EBF\u7A0B\u53D1\u9001 120 \u6B21\uFF0C\u90A3\u4E48\u4E0E\u5C4F\u5E55\u5237\u65B0\u7684\u901F\u5EA6\u76F8\u6BD4\uFF0C\u53EF\u80FD\u4F1A\u89E6\u53D1\u8FC7\u591A\u7684\u547D\u4E2D\u6D4B\u8BD5(hit test)\u548C JavaScript \u6267\u884C\u3002"]}),`
`,l(e.p,{children:[n(e.img,{src:"https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113170425.png",alt:"20231113170425"}),`
`,n(e.em,{children:"Figure 7: Events flooding(\u6D2A\u6C34) the frame timeline causing page jank(\u4E8B\u4EF6\u592A\u591A\u5BFC\u81F4\u9875\u9762\u5361\u987F)"})]}),`
`,l(e.p,{children:["\u4E3A\u4E86\u5C3D\u91CF\u51CF\u5C11\u5BF9\u4E3B\u7EBF\u7A0B\u7684\u8FC7\u591A\u8C03\u7528\uFF0CChrome \u6D4F\u89C8\u5668\u4F1A\u5C06\u8FDE\u7EED\u4E8B\u4EF6\uFF08\u5982",n(e.code,{children:"wheel"}),",\xA0",n(e.code,{children:"mousewheel"}),",\xA0",n(e.code,{children:"mousemove"}),",\xA0",n(e.code,{children:"pointermove"}),",\xA0",n(e.code,{children:"touchmove"}),"\uFF09\u805A\u5408\u5728\u4E00\u8D77\uFF0C\u5E76\u5C06\u5206\u6D3E\u5EF6\u8FDF\u5230\u4E0B\u4E00\u4E2A ",n(e.code,{children:"requestAnimationFrame"})," \u4E4B\u524D\u3002"]}),`
`,l(e.p,{children:[n(e.img,{src:"https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113170824.png",alt:"20231113170824"}),`
`,n(e.em,{children:"\u56FE 8\uFF1A\u65F6\u95F4\u7EBF\u4E0E\u4E4B\u524D\u76F8\u540C\uFF0C\u4F46\u4E8B\u4EF6\u6B63\u5728\u51DD\u805A\u548C\u5EF6\u8FDF"})]}),`
`,l(e.p,{children:["\u4EFB\u4F55\u79BB\u6563\u4E8B\u4EF6\uFF0C\u5982",n(e.code,{children:"keydown"}),",\xA0",n(e.code,{children:"keyup"}),",\xA0",n(e.code,{children:"mouseup"}),",\xA0",n(e.code,{children:"mousedown"}),",\xA0",n(e.code,{children:"touchstart"}),", \u548C\xA0",n(e.code,{children:"touchend"}),"\uFF0C\u90FD\u4F1A\u7ACB\u5373\u88AB\u6D3E\u53D1\u3002"]}),`
`,l(e.h2,{id:"usegetcoalescedeventsto-get-intra-frame-events-\u4F7F\u7528-getcoalescedevents-\u83B7\u53D6\u5E27\u5185\u4E8B\u4EF6",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#usegetcoalescedeventsto-get-intra-frame-events-\u4F7F\u7528-getcoalescedevents-\u83B7\u53D6\u5E27\u5185\u4E8B\u4EF6",children:"#"}),"Use\xA0",n(e.code,{children:"getCoalescedEvents"}),"\xA0to get intra-frame events (\u4F7F\u7528 getCoalescedEvents \u83B7\u53D6\u5E27\u5185\u4E8B\u4EF6)"]}),`
`,l(e.p,{children:["\u5BF9\u4E8E\u5927\u591A\u6570\u7F51\u7EDC\u5E94\u7528\u7A0B\u5E8F\u6765\u8BF4\uFF0C\u51DD\u805A\u4E8B\u4EF6\u8DB3\u4EE5\u63D0\u4F9B\u826F\u597D\u7684\u7528\u6237\u4F53\u9A8C\u3002\u4F46\u662F\uFF0C\u5982\u679C\u60A8\u6B63\u5728\u6784\u5EFA\u7ED8\u56FE\u5E94\u7528\u7A0B\u5E8F\u5E76\u6839\u636E ",n(e.code,{children:"touchmove"})," \u5750\u6807\u7ED8\u5236\u8DEF\u5F84\uFF0C\u60A8\u53EF\u80FD\u4F1A\u4E22\u5931\u4E2D\u95F4\u7684\u5750\u6807\u6765\u7ED8\u5236\u5E73\u6ED1\u7684\u7EBF\u6761\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u60A8\u53EF\u4EE5\u4F7F\u7528\u6307\u9488\u4E8B\u4EF6\u4E2D\u7684 ",n(e.code,{children:"getCoalescedEvents"})," \u65B9\u6CD5\u6765\u83B7\u53D6\u6709\u5173\u8FD9\u4E9B\u805A\u5408\u4E8B\u4EF6\u7684\u4FE1\u606F\u3002"]}),`
`,l(e.p,{children:[n(e.img,{src:"https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113171116.png",alt:"20231113171116"}),`
`,n(e.em,{children:"\u56FE 9\uFF1A\u5DE6\u4FA7\u662F\u5E73\u6ED1\u7684\u89E6\u6478\u624B\u52BF\u8DEF\u5F84\uFF0C\u53F3\u4FA7\u662F\u51DD\u805A\u7684\u6709\u9650\u8DEF\u5F84"})]}),`
`,l(e.div,{className:"language-js line-numbers-mode",style:{backgroundColor:"#2e3440ff"},children:[n(e.button,{className:"copy"}),n(e.span,{className:"lang",children:"js"}),n(e.pre,{children:l(e.code,{className:"",children:[l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9"},children:"window"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#88C0D0"},children:"addEventListener"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"("}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#A3BE8C"},children:"pointermove"}),n(e.span,{style:{color:"#ECEFF4"},children:"'"}),n(e.span,{style:{color:"#ECEFF4"},children:","}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"event"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"=>"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"    "}),n(e.span,{style:{color:"#81A1C1"},children:"const"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"events"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"="}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"event"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#88C0D0"},children:"getCoalescedEvents"}),n(e.span,{style:{color:"#D8DEE9FF"},children:"()"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"    "}),n(e.span,{style:{color:"#81A1C1"},children:"for"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" ("}),n(e.span,{style:{color:"#81A1C1"},children:"let"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"event"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"of"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"events"}),n(e.span,{style:{color:"#D8DEE9FF"},children:") "}),n(e.span,{style:{color:"#ECEFF4"},children:"{"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"        "}),n(e.span,{style:{color:"#81A1C1"},children:"const"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"x"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"="}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"event"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#D8DEE9"},children:"pageX"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"        "}),n(e.span,{style:{color:"#81A1C1"},children:"const"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"y"}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#81A1C1"},children:"="}),n(e.span,{style:{color:"#D8DEE9FF"},children:" "}),n(e.span,{style:{color:"#D8DEE9"},children:"event"}),n(e.span,{style:{color:"#ECEFF4"},children:"."}),n(e.span,{style:{color:"#D8DEE9"},children:"pageY"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#ECEFF4"},children:"        "}),n(e.span,{style:{color:"#616E88"},children:"// draw a line using x and y coordinates."})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#D8DEE9FF"},children:"    "}),n(e.span,{style:{color:"#ECEFF4"},children:"}"})]}),`
`,l(e.span,{className:"line",children:[n(e.span,{style:{color:"#ECEFF4"},children:"}"}),n(e.span,{style:{color:"#D8DEE9FF"},children:")"}),n(e.span,{style:{color:"#81A1C1"},children:";"})]}),`
`,n(e.span,{className:"line"})]})}),l(e.div,{className:"line-numbers-wrapper",children:[n(e.span,{className:"line-number",children:"1"}),n(e.span,{className:"line-number",children:"2"}),n(e.span,{className:"line-number",children:"3"}),n(e.span,{className:"line-number",children:"4"}),n(e.span,{className:"line-number",children:"5"}),n(e.span,{className:"line-number",children:"6"}),n(e.span,{className:"line-number",children:"7"}),n(e.span,{className:"line-number",children:"8"})]})]}),`
`,l(e.h2,{id:"next-steps",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#next-steps",children:"#"}),"Next steps"]}),`
`,l(e.p,{children:["\u5728\u672C\u7CFB\u5217\u4E2D\uFF0C\u6211\u4EEC\u4ECB\u7ECD\u4E86\u7F51\u7EDC\u6D4F\u89C8\u5668\u7684\u5185\u90E8\u5DE5\u4F5C\u539F\u7406\u3002\u5982\u679C\u60A8\u4ECE\u672A\u60F3\u8FC7 DevTools \u4E3A\u4EC0\u4E48\u5EFA\u8BAE\u5728\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u4E2D\u6DFB\u52A0 ",n(e.code,{children:"{passive: true}"})," \u6216\u4E3A\u4EC0\u4E48\u8981\u5728\u811A\u672C\u6807\u7B7E\u4E2D\u5199\u5165 ",n(e.code,{children:"async"})," \u5C5E\u6027\uFF0C\u6211\u5E0C\u671B\u672C\u7CFB\u5217\u80FD\u8BA9\u60A8\u4E86\u89E3\u6D4F\u89C8\u5668\u4E3A\u4EC0\u4E48\u9700\u8981\u8FD9\u4E9B\u4FE1\u606F\u6765\u63D0\u4F9B\u66F4\u5FEB\u3001\u66F4\u6D41\u7545\u7684\u7F51\u7EDC\u4F53\u9A8C\u3002"]}),`
`,l(e.h3,{id:"use-lighthouse",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#use-lighthouse",children:"#"}),"Use Lighthouse"]}),`
`,l(e.p,{children:["\u5982\u679C\u4F60\u60F3\u8BA9\u81EA\u5DF1\u7684\u4EE3\u7801\u5BF9\u6D4F\u89C8\u5668\u66F4\u53CB\u597D\uFF0C\u4F46\u53C8\u4E0D\u77E5\u9053\u4ECE\u4F55\u4E0B\u624B\uFF0C\u90A3\u4E48 ",n(e.a,{href:"https://developer.chrome.com/docs/lighthouse/overview/",target:"_blank",rel:"nofollow",children:"Lighthouse"})," \u662F\u4E00\u6B3E\u53EF\u4EE5\u5BF9\u4EFB\u4F55\u7F51\u7AD9\u8FDB\u884C\u5BA1\u8BA1\u7684\u5DE5\u5177\uFF0C\u5B83\u80FD\u4E3A\u4F60\u63D0\u4F9B\u4E00\u4EFD\u62A5\u544A\uFF0C\u8BF4\u660E\u54EA\u4E9B\u505A\u6CD5\u662F\u6B63\u786E\u7684\uFF0C\u54EA\u4E9B\u9700\u8981\u6539\u8FDB\u3002\u9605\u8BFB\u5BA1\u6838\u5217\u8868\u8FD8\u80FD\u8BA9\u4F60\u4E86\u89E3\u6D4F\u89C8\u5668\u5173\u6CE8\u54EA\u4E9B\u65B9\u9762\u3002"]}),`
`,l(e.h3,{id:"learn-how-to-measure-performance",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#learn-how-to-measure-performance",children:"#"}),"Learn how to measure performance"]}),`
`,l(e.p,{children:["\u4E0D\u540C\u7F51\u7AD9\u7684\u6027\u80FD\u8C03\u6574\u53EF\u80FD\u4F1A\u6709\u6240\u4E0D\u540C\uFF0C\u56E0\u6B64\u60A8\u5FC5\u987B\u6D4B\u91CF\u7F51\u7AD9\u7684\u6027\u80FD\u5E76\u51B3\u5B9A\u6700\u9002\u5408\u60A8\u7F51\u7AD9\u7684\u8C03\u6574\u3002Chrome DevTools \u56E2\u961F\u6709\u4E00\u4E9B\u5173\u4E8E",n(e.a,{href:"https://developers.google.com/web/tools/chrome-devtools/speed/get-started",target:"_blank",rel:"nofollow",children:"\u5982\u4F55\u8861\u91CF\u7F51\u7AD9\u6027\u80FD"}),"\u7684\u6559\u7A0B\u3002"]}),`
`,l(e.h3,{id:"add-feature-policy-to-your-site",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#add-feature-policy-to-your-site",children:"#"}),"Add Feature Policy to your site"]}),`
`,l(e.p,{children:["\u5982\u679C\u60A8\u60F3\u591A\u8D70\u4E00\u6B65\uFF0C",n(e.a,{href:"https://developers.google.com/web/updates/2018/06/feature-policy",target:"_blank",rel:"nofollow",children:"\u529F\u80FD\u7B56\u7565"}),"\u662F\u4E00\u9879\u65B0\u7684\u7F51\u7EDC\u5E73\u53F0\u529F\u80FD\uFF0C\u5B83\u53EF\u4EE5\u5728\u60A8\u521B\u5EFA\u9879\u76EE\u65F6\u4E3A\u60A8\u63D0\u4F9B\u4FDD\u62A4\u3002\u6253\u5F00\u529F\u80FD\u7B56\u7565\u53EF\u4EE5\u4FDD\u8BC1\u5E94\u7528\u7A0B\u5E8F\u7684\u7279\u5B9A\u884C\u4E3A\uFF0C\u9632\u6B62\u60A8\u72AF\u9519\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u4F60\u60F3\u786E\u4FDD\u4F60\u7684\u5E94\u7528\u7A0B\u5E8F\u6C38\u8FDC\u4E0D\u4F1A\u963B\u585E\u89E3\u6790\uFF0C\u4F60\u53EF\u4EE5\u5728\u540C\u6B65\u811A\u672C\u7B56\u7565\u4E0B\u8FD0\u884C\u4F60\u7684\u5E94\u7528\u7A0B\u5E8F\u3002\u5F53\u542F\u7528 ",n(e.code,{children:"sync-script\uFF1Anone"})," \u65F6\uFF0C\u4F1A\u963B\u6B62\u963B\u585E\u89E3\u6790\u5668\u7684 JavaScript \u6267\u884C\u3002\u8FD9\u6837\uFF0C\u60A8\u7684\u4EFB\u4F55\u4EE3\u7801\u90FD\u4E0D\u4F1A\u963B\u585E\u89E3\u6790\u5668\uFF0C\u6D4F\u89C8\u5668\u4E5F\u65E0\u9700\u62C5\u5FC3\u4F1A\u6682\u505C\u89E3\u6790\u5668\u3002"]}),`
`,l(e.h2,{id:"wrap-up",children:[n(e.a,{className:"header-anchor","aria-hidden":"true",href:"#wrap-up",children:"#"}),"Wrap up"]}),`
`,n(e.p,{children:n(e.img,{src:"https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113171720.png",alt:"20231113171720"})}),`
`,l(e.p,{children:["\u5F53\u6211\u5F00\u59CB\u521B\u5EFA\u7F51\u7AD9\u65F6\uFF0C\u6211\u51E0\u4E4E\u53EA\u5173\u5FC3\u5982\u4F55\u7F16\u5199\u4EE3\u7801\u4EE5\u53CA\u600E\u6837\u624D\u80FD\u63D0\u9AD8\u5DE5\u4F5C\u6548\u7387\u3002\u8FD9\u4E9B\u90FD\u5F88\u91CD\u8981\uFF0C\u4F46\u6211\u4EEC\u8FD8\u5E94\u8BE5\u8003\u8651\u6D4F",n(e.strong,{children:"\u89C8\u5668\u5982\u4F55\u4F7F\u7528\u6211\u4EEC\u7F16\u5199\u7684\u4EE3\u7801"}),"\u3002\u73B0\u4EE3\u6D4F\u89C8\u5668\u5DF2\u7ECF\u5E76\u5C06\u7EE7\u7EED\u81F4\u529B\u4E8E\u4E3A\u7528\u6237\u63D0\u4F9B\u66F4\u597D\u7684\u7F51\u7EDC\u4F53\u9A8C\u3002\u901A\u8FC7\u7EC4\u7EC7\u6211\u4EEC\u7684\u4EE3\u7801\u6765\u5584\u5F85\u6D4F\u89C8\u5668\uFF0C\u53CD\u8FC7\u6765\u4E5F\u80FD\u6539\u5584\u7528\u6237\u4F53\u9A8C\u3002\u6211\u5E0C\u671B\u60A8\u548C\u6211\u4E00\u8D77\u52AA\u529B\uFF0C\u5584\u5F85\u6D4F\u89C8\u5668\uFF01"]})]})}function d(s={}){const{wrapper:e}=s.components||{};return e?n(e,Object.assign({},s,{children:n(r,s)})):r(s)}const h="2023/11/13 20:59:38",p=`# \u73B0\u4EE3\u7F51\u7EDC\u6D4F\u89C8\u5668\u5185\u5E55 \u2014 4

\`metadata:\`

**\u539F\u6807\u9898:** Inside look at modern web browser (part 4)

**\u94FE\u63A5:** https://developer.chrome.com/blog/inside-browser-part4/

---

## Input is coming to the Compositor \u8F93\u5165\u5230\u5408\u6210\u5668

\u8FD9\u662F Chrome \u6D4F\u89C8\u5668\u56DB\u90E8\u66F2\u7CFB\u5217\u535A\u5BA2\u7684\u6700\u540E\u4E00\u7BC7\uFF0C\u63A2\u8BA8\u4E86 Chrome \u6D4F\u89C8\u5668\u662F\u5982\u4F55\u5904\u7406\u6211\u4EEC\u7684\u4EE3\u7801\u4EE5\u663E\u793A\u7F51\u7AD9\u7684\u3002\u5728\u4E0A\u4E00\u7BC7\u6587\u7AE0\u4E2D\uFF0C\u6211\u4EEC\u4E86\u89E3\u4E86[\u6E32\u67D3\u8FC7\u7A0B\u5E76\u5B66\u4E60\u4E86\u5408\u6210\u5668](./inside-browser-part-3.md)\u3002\u5728\u672C\u7BC7\u535A\u6587\u4E2D\uFF0C\u6211\u4EEC\u5C06\u4E86\u89E3\u5408\u6210\u5668\u5982\u4F55\u5728\u7528\u6237\u8F93\u5165\u65F6\u5B9E\u73B0\u6D41\u7545\u7684\u4EA4\u4E92\u3002

## Input events from the browser's point of view \u4ECE\u6D4F\u89C8\u5668\u89D2\u5EA6\u770B\u8F93\u5165\u4E8B\u4EF6

\u5F53\u60A8\u542C\u5230 "\u8F93\u5165\u4E8B\u4EF6 "\u65F6\uFF0C\u60A8\u53EF\u80FD\u53EA\u4F1A\u60F3\u5230\u5728\u6587\u672C\u6846\u4E2D\u6253\u5B57\u6216\u70B9\u51FB\u9F20\u6807\uFF0C\u4F46\u4ECE\u6D4F\u89C8\u5668\u7684\u89D2\u5EA6\u6765\u770B\uFF0C\u8F93\u5165\u610F\u5473\u7740\u7528\u6237\u7684\u4EFB\u4F55\u624B\u52BF\u3002\u9F20\u6807\u6EDA\u8F6E\u6EDA\u52A8\u662F\u4E00\u4E2A\u8F93\u5165\u4E8B\u4EF6\uFF0C\u89E6\u6478\u6216\u9F20\u6807\u79FB\u8FC7\u4E5F\u662F\u4E00\u4E2A\u8F93\u5165\u4E8B\u4EF6\u3002

\u5F53\u7528\u6237\u5728\u5C4F\u5E55\u4E0A\u505A\u51FA\u89E6\u6478\u7B49\u624B\u52BF\u65F6\uFF0C\u6D4F\u89C8\u5668\u8FDB\u7A0B\u4F1A\u9996\u5148\u63A5\u6536\u5230\u8BE5\u624B\u52BF\u3002\u4E0D\u8FC7\uFF0C\u6D4F\u89C8\u5668\u8FDB\u7A0B\u53EA\u77E5\u9053\u624B\u52BF\u53D1\u751F\u7684\u4F4D\u7F6E\uFF0C\u56E0\u4E3A\u6807\u7B7E\u9875\u5185\u7684\u5185\u5BB9\u662F\u7531\u5448\u73B0\u5668\u8FDB\u7A0B\u5904\u7406\u7684\u3002\u56E0\u6B64\uFF0C\u6D4F\u89C8\u5668\u8FDB\u7A0B\u4F1A\u5411\u5448\u73B0\u5668\u8FDB\u7A0B\u53D1\u9001\u4E8B\u4EF6\u7C7B\u578B\uFF08\u5982 touchstart\uFF09\u53CA\u5176\u5750\u6807\u3002\u5448\u73B0\u5668\u8FDB\u7A0B\u901A\u8FC7\u67E5\u627E\u4E8B\u4EF6\u76EE\u6807\u548C\u8FD0\u884C\u9644\u52A0\u7684\u4E8B\u4EF6\u76D1\u542C\u5668\u6765\u9002\u5F53\u5904\u7406\u8BE5\u4E8B\u4EF6\u3002

![20231113164433](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113164433.png)
*\u56FE 1\uFF1A\u8F93\u5165\u4E8B\u4EF6\u901A\u8FC7\u6D4F\u89C8\u5668\u8FDB\u7A0B\u4F20\u9012\u5230\u5448\u73B0\u5668\u8FDB\u7A0B*

## Compositor receives input events \u5408\u6210\u5668\u63A5\u6536\u8F93\u5165\u4E8B\u4EF6

![202311131647540](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/202311131647540.gif?imageSlim)

\u5728\u4E0A\u4E00\u7BC7\u6587\u7AE0\u4E2D\uFF0C\u6211\u4EEC\u4E86\u89E3\u4E86\u5408\u6210\u5668\u5982\u4F55\u901A\u8FC7\u5408\u6210\u5149\u6805\u5316\u56FE\u5C42\u6765\u5E73\u6ED1\u5904\u7406\u6EDA\u52A8\u3002\u5982\u679C\u9875\u9762\u4E0A\u6CA1\u6709\u9644\u52A0\u8F93\u5165\u4E8B\u4EF6\u4FA6\u542C\u5668\uFF0C\u5408\u6210\u5668\u7EBF\u7A0B\u5C31\u53EF\u4EE5\u5B8C\u5168\u72EC\u7ACB\u4E8E\u4E3B\u7EBF\u7A0B\u521B\u5EFA\u65B0\u7684\u5408\u6210\u5E27\u3002\u4F46\u5982\u679C\u9875\u9762\u4E0A\u6709\u4E00\u4E9B\u4E8B\u4EF6\u76D1\u542C\u5668\u5462\uFF1F\u5408\u6210\u5668\u7EBF\u7A0B\u5982\u4F55\u786E\u5B9A\u4E8B\u4EF6\u662F\u5426\u9700\u8981\u5904\u7406\uFF1F

![20231113164955](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113164955.png)
*\u56FE 3\uFF1A\u63CF\u8FF0\u8F93\u5165\u5230\u975E\u5FEB\u901F\u6EDA\u52A8\u533A\u57DF\u7684\u793A\u610F\u56FE*

### Be aware when you write event handlers \u7F16\u5199\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u65F6\u8981\u6CE8\u610F

\u7F51\u7EDC\u5F00\u53D1\u4E2D\u5E38\u89C1\u7684\u4E8B\u4EF6\u5904\u7406\u6A21\u5F0F\u662F\u4E8B\u4EF6\u59D4\u6258\u3002\u7531\u4E8E\u4E8B\u4EF6\u4F1A\u5192\u6CE1\uFF0C\u56E0\u6B64\u53EF\u4EE5\u5728\u6700\u9876\u5C42\u7684\u5143\u7D20\u4E0A\u9644\u52A0\u4E00\u4E2A\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\uFF0C\u7136\u540E\u6839\u636E\u4E8B\u4EF6\u76EE\u6807\u59D4\u6258\u4EFB\u52A1\u3002\u60A8\u53EF\u80FD\u89C1\u8FC7\u6216\u5199\u8FC7\u7C7B\u4F3C\u4E0B\u9762\u8FD9\u6837\u7684\u4EE3\u7801\u3002

\`\`\`js
document.body.addEventListener('touchstart', event => {
    if (event.target === area) {
        event.preventDefault();
    }
});
\`\`\`

\u7531\u4E8E\u53EA\u9700\u4E3A\u6240\u6709\u5143\u7D20\u7F16\u5199\u4E00\u4E2A\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\uFF0C\u56E0\u6B64\u8FD9\u79CD\u4E8B\u4EF6\u59D4\u6258\u6A21\u5F0F\u975E\u5E38\u7B26\u5408\u4EBA\u4F53\u5DE5\u7A0B\u5B66\u3002\u4F46\u662F\uFF0C\u5982\u679C\u4ECE\u6D4F\u89C8\u5668\u7684\u89D2\u5EA6\u6765\u770B\u8FD9\u6BB5\u4EE3\u7801\uFF0C\u73B0\u5728\u6574\u4E2A\u9875\u9762\u90FD\u88AB\u6807\u8BB0\u4E3A\u4E0D\u53EF\u5FEB\u901F\u6EDA\u52A8\u533A\u57DF\u3002\u8FD9\u610F\u5473\u7740\uFF0C\u5373\u4F7F\u60A8\u7684\u5E94\u7528\u7A0B\u5E8F\u4E0D\u5173\u5FC3\u9875\u9762\u67D0\u4E9B\u90E8\u5206\u7684\u8F93\u5165\uFF0C\u5408\u6210\u5668\u7EBF\u7A0B\u4E5F\u5FC5\u987B\u4E0E\u4E3B\u7EBF\u7A0B\u901A\u4FE1\uFF0C\u5E76\u5728\u6BCF\u6B21\u8F93\u5165\u4E8B\u4EF6\u5230\u6765\u65F6\u7B49\u5F85\u4E3B\u7EBF\u7A0B\u3002\u8FD9\u6837\uFF0C\u5408\u6210\u5668\u7684\u5E73\u6ED1\u6EDA\u52A8\u529F\u80FD\u5C31\u65E0\u6CD5\u5B9E\u73B0\u4E86\u3002

![20231113165223](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113165223.png)
*\u56FE 4\uFF1A\u5BF9\u8986\u76D6\u6574\u4E2A\u9875\u9762\u7684\u975E\u5FEB\u901F\u6EDA\u52A8\u533A\u57DF\u7684\u63CF\u8FF0\u8F93\u5165\u793A\u610F\u56FE*

\u4E3A\u4E86\u907F\u514D\u8FD9\u79CD\u60C5\u51B5\u53D1\u751F\uFF0C\u60A8\u53EF\u4EE5\u5728\u4E8B\u4EF6\u76D1\u542C\u5668\u4E2D\u4F7F\u7528 passive: true \u9009\u9879\u3002\u8FD9\u6837\u6D4F\u89C8\u5668\u5C31\u4F1A\u77E5\u9053\u4F60\u4ECD\u60F3\u5728\u4E3B\u7EBF\u7A0B\u4E2D\u76D1\u542C\u4E8B\u4EF6\uFF0C\u4F46\u5408\u6210\u5668\u4E5F\u53EF\u4EE5\u7EE7\u7EED\u5408\u6210\u65B0\u5E27\u3002

\`\`\`js
document.body.addEventListener('touchstart', event => {
    if (event.target === area) {
        event.preventDefault()
    }
 }, {passive: true});
\`\`\`

## Check if the event is cancelable \u68C0\u67E5\u4E8B\u4EF6\u662F\u5426\u53EF\u53D6\u6D88

\u8BD5\u60F3\u4E00\u4E0B\uFF0C\u5982\u679C\u60A8\u60F3\u5C06\u9875\u9762\u4E2D\u7684\u4E00\u4E2A\u65B9\u6846\u7684\u6EDA\u52A8\u65B9\u5411\u9650\u5236\u4E3A\u53EA\u80FD\u6A2A\u5411\u6EDA\u52A8\uFF0C\u60A8\u4F1A\u600E\u4E48\u505A\u5462\uFF1F

![20231113165516](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113165516.png)
*\u56FE 5\uFF1A\u90E8\u5206\u9875\u9762\u56FA\u5B9A\u4E3A\u6C34\u5E73\u6EDA\u52A8\u7684\u7F51\u9875*

\u5728\u6307\u9488\u4E8B\u4EF6\u4E2D\u4F7F\u7528 \`passive: true\` \u9009\u9879\u610F\u5473\u7740\u9875\u9762\u6EDA\u52A8\u53EF\u4EE5\u5E73\u6ED1\uFF0C\u4F46\u5F53\u60A8\u60F3\u8981\`preventDefault\`\u4EE5\u9650\u5236\u6EDA\u52A8\u65B9\u5411\u65F6\uFF0C\u5782\u76F4\u6EDA\u52A8\u53EF\u80FD\u5DF2\u7ECF\u5F00\u59CB\u3002\u60A8\u53EF\u4EE5\u4F7F\u7528 \`event.cancelable\` \u65B9\u6CD5\u6765\u68C0\u67E5\u8FD9\u4E00\u70B9

\`\`\`js
document.body.addEventListener('pointermove', event => {
    if (event.cancelable) {
        event.preventDefault(); // block the native scroll
        /*
        *  do what you want the application to do here
        */
    }
}, {passive: true});
\`\`\`

\u6216\u8005\uFF0C\u60A8\u4E5F\u53EF\u4EE5\u4F7F\u7528 CSS \u89C4\u5219\uFF08\u5982 \`touch-action\`\uFF09\u6765\u5B8C\u5168\u6D88\u9664\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u3002

\`\`\`scss
    #area {  touch-action: pan-x;}
\`\`\`

## Finding the event target

![20231113170030](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113170030.png)
*\u56FE 6\uFF1A\u4E3B\u7EBF\u7A0B\u67E5\u770B\u7ED8\u5236\u8BB0\u5F55\uFF0C\u8BE2\u95EE\u5728 x.y \u70B9\u4E0A\u7ED8\u5236\u4E86\u4EC0\u4E48\u3002*

\u5F53\u5408\u6210\u5668\u7EBF\u7A0B\u5C06\u8F93\u5165\u4E8B\u4EF6\u53D1\u9001\u5230\u4E3B\u7EBF\u7A0B\u65F6\uFF0C\u9996\u5148\u8981\u8FD0\u884C\u7684\u662F\u627E\u5230\u4E8B\u4EF6\u76EE\u6807\u7684\u547D\u4E2D\u6D4B\u8BD5\u3002\u547D\u4E2D\u6D4B\u8BD5\u4F7F\u7528\u6E32\u67D3\u8FC7\u7A0B\u4E2D\u751F\u6210\u7684\u7ED8\u5236\u8BB0\u5F55\u6570\u636E\u6765\u627E\u51FA\u4E8B\u4EF6\u53D1\u751F\u7684\u70B9\u5750\u6807\u4E0B\u7684\u5185\u5BB9\u3002

:::tip{title=\u539F\u6587}
When the compositor thread sends an input event to the main thread, the first thing to run is a hit test to find the event target. Hit test uses paint records data that was generated in the rendering process to find out what is underneath the point coordinates in which the event occurred.
:::

## Minimizing event dispatches to the main thread \u5C3D\u91CF\u51CF\u5C11\u4E3B\u7EBF\u7A0B\u7684\u4E8B\u4EF6\u6D3E\u53D1

\u5728\u4E0A\u4E00\u7BC7\u6587\u7AE0\u4E2D\uFF0C\u6211\u4EEC\u8BA8\u8BBA\u4E86\u5178\u578B\u663E\u793A\u5668\u6BCF\u79D2\u5237\u65B0\u5C4F\u5E55 60 \u6B21\u7684\u60C5\u51B5\uFF0C\u4EE5\u53CA\u6211\u4EEC\u9700\u8981\u5982\u4F55\u8DDF\u4E0A\u8282\u594F\u4EE5\u5B9E\u73B0\u6D41\u7545\u7684\u52A8\u753B\u6548\u679C\u3002\u5728\u8F93\u5165\u65B9\u9762\uFF0C\u5178\u578B\u7684\u89E6\u6478\u5C4F\u8BBE\u5907\u6BCF\u79D2\u4F1A\u4EA7\u751F 60-120 \u6B21\u89E6\u6478\u4E8B\u4EF6\uFF0C\u800C\u5178\u578B\u7684\u9F20\u6807\u6BCF\u79D2\u4F1A\u4EA7\u751F 100 \u6B21\u4E8B\u4EF6\u3002\u8F93\u5165\u4E8B\u4EF6\u7684\u4FDD\u771F\u5EA6\u9AD8\u4E8E\u6211\u4EEC\u7684\u5C4F\u5E55\u5237\u65B0\u901F\u5EA6\u3002

\u5982\u679C\u50CF \`touchmove\` \u8FD9\u6837\u7684\u8FDE\u7EED\u4E8B\u4EF6\u6BCF\u79D2\u5411\u4E3B\u7EBF\u7A0B\u53D1\u9001 120 \u6B21\uFF0C\u90A3\u4E48\u4E0E\u5C4F\u5E55\u5237\u65B0\u7684\u901F\u5EA6\u76F8\u6BD4\uFF0C\u53EF\u80FD\u4F1A\u89E6\u53D1\u8FC7\u591A\u7684\u547D\u4E2D\u6D4B\u8BD5(hit test)\u548C JavaScript \u6267\u884C\u3002

![20231113170425](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113170425.png)
*Figure 7: Events flooding(\u6D2A\u6C34) the frame timeline causing page jank(\u4E8B\u4EF6\u592A\u591A\u5BFC\u81F4\u9875\u9762\u5361\u987F)*

\u4E3A\u4E86\u5C3D\u91CF\u51CF\u5C11\u5BF9\u4E3B\u7EBF\u7A0B\u7684\u8FC7\u591A\u8C03\u7528\uFF0CChrome \u6D4F\u89C8\u5668\u4F1A\u5C06\u8FDE\u7EED\u4E8B\u4EF6\uFF08\u5982\`wheel\`,\xA0\`mousewheel\`,\xA0\`mousemove\`,\xA0\`pointermove\`,\xA0\`touchmove\`\uFF09\u805A\u5408\u5728\u4E00\u8D77\uFF0C\u5E76\u5C06\u5206\u6D3E\u5EF6\u8FDF\u5230\u4E0B\u4E00\u4E2A \`requestAnimationFrame\` \u4E4B\u524D\u3002

![20231113170824](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113170824.png)
*\u56FE 8\uFF1A\u65F6\u95F4\u7EBF\u4E0E\u4E4B\u524D\u76F8\u540C\uFF0C\u4F46\u4E8B\u4EF6\u6B63\u5728\u51DD\u805A\u548C\u5EF6\u8FDF*

\u4EFB\u4F55\u79BB\u6563\u4E8B\u4EF6\uFF0C\u5982\`keydown\`,\xA0\`keyup\`,\xA0\`mouseup\`,\xA0\`mousedown\`,\xA0\`touchstart\`, \u548C\xA0\`touchend\`\uFF0C\u90FD\u4F1A\u7ACB\u5373\u88AB\u6D3E\u53D1\u3002

## Use\xA0\`getCoalescedEvents\`\xA0to get intra-frame events (\u4F7F\u7528 getCoalescedEvents \u83B7\u53D6\u5E27\u5185\u4E8B\u4EF6)

\u5BF9\u4E8E\u5927\u591A\u6570\u7F51\u7EDC\u5E94\u7528\u7A0B\u5E8F\u6765\u8BF4\uFF0C\u51DD\u805A\u4E8B\u4EF6\u8DB3\u4EE5\u63D0\u4F9B\u826F\u597D\u7684\u7528\u6237\u4F53\u9A8C\u3002\u4F46\u662F\uFF0C\u5982\u679C\u60A8\u6B63\u5728\u6784\u5EFA\u7ED8\u56FE\u5E94\u7528\u7A0B\u5E8F\u5E76\u6839\u636E \`touchmove\` \u5750\u6807\u7ED8\u5236\u8DEF\u5F84\uFF0C\u60A8\u53EF\u80FD\u4F1A\u4E22\u5931\u4E2D\u95F4\u7684\u5750\u6807\u6765\u7ED8\u5236\u5E73\u6ED1\u7684\u7EBF\u6761\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u60A8\u53EF\u4EE5\u4F7F\u7528\u6307\u9488\u4E8B\u4EF6\u4E2D\u7684 \`getCoalescedEvents\` \u65B9\u6CD5\u6765\u83B7\u53D6\u6709\u5173\u8FD9\u4E9B\u805A\u5408\u4E8B\u4EF6\u7684\u4FE1\u606F\u3002

![20231113171116](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113171116.png)
*\u56FE 9\uFF1A\u5DE6\u4FA7\u662F\u5E73\u6ED1\u7684\u89E6\u6478\u624B\u52BF\u8DEF\u5F84\uFF0C\u53F3\u4FA7\u662F\u51DD\u805A\u7684\u6709\u9650\u8DEF\u5F84*

\`\`\`js
window.addEventListener('pointermove', event => {
    const events = event.getCoalescedEvents();
    for (let event of events) {
        const x = event.pageX;
        const y = event.pageY;
        // draw a line using x and y coordinates.
    }
});
\`\`\`

## Next steps

\u5728\u672C\u7CFB\u5217\u4E2D\uFF0C\u6211\u4EEC\u4ECB\u7ECD\u4E86\u7F51\u7EDC\u6D4F\u89C8\u5668\u7684\u5185\u90E8\u5DE5\u4F5C\u539F\u7406\u3002\u5982\u679C\u60A8\u4ECE\u672A\u60F3\u8FC7 DevTools \u4E3A\u4EC0\u4E48\u5EFA\u8BAE\u5728\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u4E2D\u6DFB\u52A0 \`{passive: true}\` \u6216\u4E3A\u4EC0\u4E48\u8981\u5728\u811A\u672C\u6807\u7B7E\u4E2D\u5199\u5165 \`async\` \u5C5E\u6027\uFF0C\u6211\u5E0C\u671B\u672C\u7CFB\u5217\u80FD\u8BA9\u60A8\u4E86\u89E3\u6D4F\u89C8\u5668\u4E3A\u4EC0\u4E48\u9700\u8981\u8FD9\u4E9B\u4FE1\u606F\u6765\u63D0\u4F9B\u66F4\u5FEB\u3001\u66F4\u6D41\u7545\u7684\u7F51\u7EDC\u4F53\u9A8C\u3002

### Use Lighthouse

\u5982\u679C\u4F60\u60F3\u8BA9\u81EA\u5DF1\u7684\u4EE3\u7801\u5BF9\u6D4F\u89C8\u5668\u66F4\u53CB\u597D\uFF0C\u4F46\u53C8\u4E0D\u77E5\u9053\u4ECE\u4F55\u4E0B\u624B\uFF0C\u90A3\u4E48 [Lighthouse](https://developer.chrome.com/docs/lighthouse/overview/) \u662F\u4E00\u6B3E\u53EF\u4EE5\u5BF9\u4EFB\u4F55\u7F51\u7AD9\u8FDB\u884C\u5BA1\u8BA1\u7684\u5DE5\u5177\uFF0C\u5B83\u80FD\u4E3A\u4F60\u63D0\u4F9B\u4E00\u4EFD\u62A5\u544A\uFF0C\u8BF4\u660E\u54EA\u4E9B\u505A\u6CD5\u662F\u6B63\u786E\u7684\uFF0C\u54EA\u4E9B\u9700\u8981\u6539\u8FDB\u3002\u9605\u8BFB\u5BA1\u6838\u5217\u8868\u8FD8\u80FD\u8BA9\u4F60\u4E86\u89E3\u6D4F\u89C8\u5668\u5173\u6CE8\u54EA\u4E9B\u65B9\u9762\u3002

### Learn how to measure performance

\u4E0D\u540C\u7F51\u7AD9\u7684\u6027\u80FD\u8C03\u6574\u53EF\u80FD\u4F1A\u6709\u6240\u4E0D\u540C\uFF0C\u56E0\u6B64\u60A8\u5FC5\u987B\u6D4B\u91CF\u7F51\u7AD9\u7684\u6027\u80FD\u5E76\u51B3\u5B9A\u6700\u9002\u5408\u60A8\u7F51\u7AD9\u7684\u8C03\u6574\u3002Chrome DevTools \u56E2\u961F\u6709\u4E00\u4E9B\u5173\u4E8E[\u5982\u4F55\u8861\u91CF\u7F51\u7AD9\u6027\u80FD](https://developers.google.com/web/tools/chrome-devtools/speed/get-started)\u7684\u6559\u7A0B\u3002

### Add Feature Policy to your site

\u5982\u679C\u60A8\u60F3\u591A\u8D70\u4E00\u6B65\uFF0C[\u529F\u80FD\u7B56\u7565](https://developers.google.com/web/updates/2018/06/feature-policy)\u662F\u4E00\u9879\u65B0\u7684\u7F51\u7EDC\u5E73\u53F0\u529F\u80FD\uFF0C\u5B83\u53EF\u4EE5\u5728\u60A8\u521B\u5EFA\u9879\u76EE\u65F6\u4E3A\u60A8\u63D0\u4F9B\u4FDD\u62A4\u3002\u6253\u5F00\u529F\u80FD\u7B56\u7565\u53EF\u4EE5\u4FDD\u8BC1\u5E94\u7528\u7A0B\u5E8F\u7684\u7279\u5B9A\u884C\u4E3A\uFF0C\u9632\u6B62\u60A8\u72AF\u9519\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u4F60\u60F3\u786E\u4FDD\u4F60\u7684\u5E94\u7528\u7A0B\u5E8F\u6C38\u8FDC\u4E0D\u4F1A\u963B\u585E\u89E3\u6790\uFF0C\u4F60\u53EF\u4EE5\u5728\u540C\u6B65\u811A\u672C\u7B56\u7565\u4E0B\u8FD0\u884C\u4F60\u7684\u5E94\u7528\u7A0B\u5E8F\u3002\u5F53\u542F\u7528 \`sync-script\uFF1Anone\` \u65F6\uFF0C\u4F1A\u963B\u6B62\u963B\u585E\u89E3\u6790\u5668\u7684 JavaScript \u6267\u884C\u3002\u8FD9\u6837\uFF0C\u60A8\u7684\u4EFB\u4F55\u4EE3\u7801\u90FD\u4E0D\u4F1A\u963B\u585E\u89E3\u6790\u5668\uFF0C\u6D4F\u89C8\u5668\u4E5F\u65E0\u9700\u62C5\u5FC3\u4F1A\u6682\u505C\u89E3\u6790\u5668\u3002

## Wrap up

![20231113171720](https://blog-1318409910.cos.ap-beijing.myqcloud.com/blog/20231113171720.png)

\u5F53\u6211\u5F00\u59CB\u521B\u5EFA\u7F51\u7AD9\u65F6\uFF0C\u6211\u51E0\u4E4E\u53EA\u5173\u5FC3\u5982\u4F55\u7F16\u5199\u4EE3\u7801\u4EE5\u53CA\u600E\u6837\u624D\u80FD\u63D0\u9AD8\u5DE5\u4F5C\u6548\u7387\u3002\u8FD9\u4E9B\u90FD\u5F88\u91CD\u8981\uFF0C\u4F46\u6211\u4EEC\u8FD8\u5E94\u8BE5\u8003\u8651\u6D4F**\u89C8\u5668\u5982\u4F55\u4F7F\u7528\u6211\u4EEC\u7F16\u5199\u7684\u4EE3\u7801**\u3002\u73B0\u4EE3\u6D4F\u89C8\u5668\u5DF2\u7ECF\u5E76\u5C06\u7EE7\u7EED\u81F4\u529B\u4E8E\u4E3A\u7528\u6237\u63D0\u4F9B\u66F4\u597D\u7684\u7F51\u7EDC\u4F53\u9A8C\u3002\u901A\u8FC7\u7EC4\u7EC7\u6211\u4EEC\u7684\u4EE3\u7801\u6765\u5584\u5F85\u6D4F\u89C8\u5668\uFF0C\u53CD\u8FC7\u6765\u4E5F\u80FD\u6539\u5584\u7528\u6237\u4F53\u9A8C\u3002\u6211\u5E0C\u671B\u60A8\u548C\u6211\u4E00\u8D77\u52AA\u529B\uFF0C\u5584\u5F85\u6D4F\u89C8\u5668\uFF01













`;export{p as content,d as default,t as frontmatter,h as lastUpdatedTime,i as title,a as toc};
